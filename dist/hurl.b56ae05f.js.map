{"version":3,"sources":["node_modules/@thi.ng/api/api.js","node_modules/@thi.ng/api/api/event.js","node_modules/@thi.ng/api/api/fn.js","node_modules/@thi.ng/api/api/logger.js","node_modules/@thi.ng/api/api/typedarray.js","node_modules/@thi.ng/api/assert.js","node_modules/@thi.ng/api/logger.js","node_modules/@thi.ng/api/mixin.js","node_modules/@thi.ng/api/decorators/configurable.js","node_modules/@thi.ng/api/decorators/deprecated.js","node_modules/@thi.ng/api/decorators/nomixin.js","node_modules/@thi.ng/api/decorators/sealed.js","node_modules/@thi.ng/api/mixins/ienable.js","node_modules/@thi.ng/api/mixins/inotify.js","node_modules/@thi.ng/api/mixins/iterable.js","node_modules/@thi.ng/api/mixins/iwatch.js","node_modules/@thi.ng/api/index.js","node_modules/@thi.ng/equiv/index.js","node_modules/@thi.ng/associative/dissoc.js","node_modules/@thi.ng/associative/internal/equiv.js","node_modules/@thi.ng/checks/exists-not-null.js","node_modules/@thi.ng/checks/exists.js","node_modules/@thi.ng/checks/has-crypto.js","node_modules/@thi.ng/checks/has-max-length.js","node_modules/@thi.ng/checks/has-min-length.js","node_modules/@thi.ng/checks/is-function.js","node_modules/@thi.ng/checks/has-performance.js","node_modules/@thi.ng/checks/has-wasm.js","node_modules/@thi.ng/checks/has-webgl.js","node_modules/@thi.ng/checks/has-websocket.js","node_modules/@thi.ng/checks/implements-function.js","node_modules/@thi.ng/checks/is-array.js","node_modules/@thi.ng/checks/is-arraylike.js","node_modules/@thi.ng/checks/is-blob.js","node_modules/@thi.ng/checks/is-boolean.js","node_modules/@thi.ng/checks/is-chrome.js","node_modules/@thi.ng/checks/is-date.js","node_modules/@thi.ng/checks/is-even.js","node_modules/@thi.ng/checks/is-false.js","node_modules/@thi.ng/checks/is-file.js","node_modules/@thi.ng/checks/is-firefox.js","node_modules/@thi.ng/checks/is-string.js","node_modules/@thi.ng/checks/is-hex-color.js","node_modules/@thi.ng/checks/is-ie.js","node_modules/@thi.ng/checks/is-in-range.js","node_modules/@thi.ng/checks/is-int32.js","node_modules/@thi.ng/checks/is-iterable.js","node_modules/@thi.ng/checks/is-map.js","node_modules/@thi.ng/checks/is-mobile.js","node_modules/@thi.ng/checks/is-nan.js","node_modules/@thi.ng/checks/is-negative.js","node_modules/@thi.ng/checks/is-nil.js","node_modules/@thi.ng/checks/is-node.js","node_modules/@thi.ng/checks/is-not-string-iterable.js","node_modules/@thi.ng/checks/is-null.js","node_modules/@thi.ng/checks/is-number.js","node_modules/@thi.ng/checks/is-object.js","node_modules/@thi.ng/checks/is-odd.js","node_modules/@thi.ng/checks/is-plain-object.js","node_modules/@thi.ng/checks/is-positive.js","node_modules/@thi.ng/checks/is-primitive.js","node_modules/@thi.ng/checks/is-promise.js","node_modules/@thi.ng/checks/is-promiselike.js","node_modules/@thi.ng/checks/is-regexp.js","node_modules/@thi.ng/checks/is-safari.js","node_modules/@thi.ng/checks/is-set.js","node_modules/@thi.ng/checks/is-symbol.js","node_modules/@thi.ng/checks/is-transferable.js","node_modules/@thi.ng/checks/is-true.js","node_modules/@thi.ng/checks/is-typedarray.js","node_modules/@thi.ng/checks/is-uint32.js","node_modules/@thi.ng/checks/is-undefined.js","node_modules/@thi.ng/checks/is-uuid.js","node_modules/@thi.ng/checks/is-uuid4.js","node_modules/@thi.ng/checks/is-zero.js","node_modules/@thi.ng/checks/index.js","node_modules/@thi.ng/associative/into.js","node_modules/@thi.ng/associative/array-set.js","node_modules/@thi.ng/associative/common-keys.js","node_modules/@thi.ng/transducers/reduced.js","node_modules/@thi.ng/errors/deferror.js","node_modules/@thi.ng/errors/illegal-arguments.js","node_modules/@thi.ng/errors/illegal-arity.js","node_modules/@thi.ng/errors/illegal-state.js","node_modules/@thi.ng/errors/unsupported.js","node_modules/@thi.ng/errors/index.js","node_modules/@thi.ng/transducers/reduce.js","node_modules/@thi.ng/transducers/rfn/push.js","node_modules/@thi.ng/transducers/iterator.js","node_modules/@thi.ng/transducers/func/compr.js","node_modules/@thi.ng/transducers/xform/map.js","node_modules/@thi.ng/transducers/transduce.js","node_modules/@thi.ng/transducers/run.js","node_modules/@thi.ng/transducers/step.js","node_modules/@thi.ng/transducers/internal/mathop.js","node_modules/@thi.ng/transducers/rfn/add.js","node_modules/@thi.ng/transducers/rfn/assoc-map.js","node_modules/@thi.ng/transducers/rfn/assoc-obj.js","node_modules/@thi.ng/transducers/rfn/conj.js","node_modules/@thi.ng/transducers/rfn/count.js","node_modules/@thi.ng/transducers/rfn/div.js","node_modules/@thi.ng/transducers/rfn/every.js","node_modules/@thi.ng/transducers/rfn/fill.js","node_modules/@thi.ng/compose/comp.js","node_modules/@thi.ng/compose/complement.js","node_modules/@thi.ng/compose/constantly.js","node_modules/@thi.ng/compose/delay.js","node_modules/@thi.ng/compose/delayed.js","node_modules/@thi.ng/compose/identity.js","node_modules/@thi.ng/compose/ifdef.js","node_modules/@thi.ng/compose/juxt.js","node_modules/@thi.ng/compose/partial.js","node_modules/@thi.ng/compose/thread-first.js","node_modules/@thi.ng/compose/thread-last.js","node_modules/@thi.ng/compose/trampoline.js","node_modules/@thi.ng/compose/index.js","node_modules/@thi.ng/transducers/internal/group-opts.js","node_modules/@thi.ng/transducers/rfn/group-by-map.js","node_modules/@thi.ng/transducers/rfn/frequencies.js","node_modules/@thi.ng/transducers/rfn/group-by-obj.js","node_modules/@thi.ng/transducers/rfn/group-binary.js","node_modules/@thi.ng/transducers/rfn/last.js","node_modules/@thi.ng/compare/index.js","node_modules/@thi.ng/transducers/rfn/max-compare.js","node_modules/@thi.ng/transducers/rfn/max.js","node_modules/@thi.ng/transducers/rfn/mean.js","node_modules/@thi.ng/transducers/rfn/min-compare.js","node_modules/@thi.ng/transducers/rfn/min.js","node_modules/@thi.ng/transducers/rfn/mul.js","node_modules/@thi.ng/transducers/rfn/push-copy.js","node_modules/@thi.ng/transducers/rfn/reductions.js","node_modules/@thi.ng/transducers/rfn/some.js","node_modules/@thi.ng/transducers/rfn/str.js","node_modules/@thi.ng/transducers/rfn/sub.js","node_modules/@thi.ng/transducers/xform/benchmark.js","node_modules/@thi.ng/transducers/xform/cat.js","node_modules/@thi.ng/transducers/xform/converge.js","node_modules/@thi.ng/transducers/iter/range.js","node_modules/@thi.ng/transducers/iter/range2d.js","node_modules/@thi.ng/transducers/iter/zip.js","node_modules/@thi.ng/transducers/xform/convolve.js","node_modules/@thi.ng/transducers/xform/dedupe.js","node_modules/@thi.ng/transducers/xform/delayed.js","node_modules/@thi.ng/transducers/xform/distinct.js","node_modules/@thi.ng/transducers/xform/throttle.js","node_modules/@thi.ng/transducers/xform/drop-nth.js","node_modules/@thi.ng/transducers/xform/drop-while.js","node_modules/@thi.ng/transducers/xform/drop.js","node_modules/@thi.ng/transducers/xform/duplicate.js","node_modules/@thi.ng/transducers/xform/filter.js","node_modules/@thi.ng/arrays/binary-search.js","node_modules/@thi.ng/arrays/ends-with.js","node_modules/@thi.ng/arrays/ensure-iterable.js","node_modules/@thi.ng/arrays/ensure-array.js","node_modules/@thi.ng/arrays/find.js","node_modules/@thi.ng/arrays/fuzzy-match.js","node_modules/@thi.ng/arrays/is-sorted.js","node_modules/@thi.ng/arrays/iterator.js","node_modules/@thi.ng/arrays/peek.js","node_modules/@thi.ng/arrays/swap.js","node_modules/@thi.ng/arrays/quicksort.js","node_modules/@thi.ng/random/api.js","node_modules/@thi.ng/random/smush32.js","node_modules/@thi.ng/random/system.js","node_modules/@thi.ng/random/xorshift128.js","node_modules/@thi.ng/random/xorwow.js","node_modules/@thi.ng/random/xsadd.js","node_modules/@thi.ng/random/random-id.js","node_modules/@thi.ng/random/weighted-random.js","node_modules/@thi.ng/random/index.js","node_modules/@thi.ng/arrays/shuffle.js","node_modules/@thi.ng/arrays/starts-with.js","node_modules/@thi.ng/arrays/swizzle.js","node_modules/@thi.ng/arrays/index.js","node_modules/@thi.ng/transducers/xform/filter-fuzzy.js","node_modules/@thi.ng/transducers/xform/flatten-with.js","node_modules/@thi.ng/transducers/xform/flatten.js","node_modules/@thi.ng/transducers/xform/map-indexed.js","node_modules/@thi.ng/transducers/xform/indexed.js","node_modules/@thi.ng/transducers/xform/interleave.js","node_modules/@thi.ng/transducers/func/comp.js","node_modules/@thi.ng/transducers/iter/norm-range.js","node_modules/@thi.ng/transducers/xform/mapcat.js","node_modules/@thi.ng/transducers/xform/partition.js","node_modules/@thi.ng/transducers/xform/interpolate.js","node_modules/@thi.ng/math/api.js","node_modules/@thi.ng/math/abs.js","node_modules/@thi.ng/math/angle.js","node_modules/@thi.ng/math/eqdelta.js","node_modules/@thi.ng/math/crossing.js","node_modules/@thi.ng/math/extrema.js","node_modules/@thi.ng/math/interval.js","node_modules/@thi.ng/math/fit.js","node_modules/@thi.ng/math/int.js","node_modules/@thi.ng/math/min-error.js","node_modules/@thi.ng/math/mix.js","node_modules/@thi.ng/math/prec.js","node_modules/@thi.ng/math/ratio.js","node_modules/@thi.ng/math/solve.js","node_modules/@thi.ng/math/step.js","node_modules/@thi.ng/math/index.js","node_modules/@thi.ng/transducers/xform/interpolate-hermite.js","node_modules/@thi.ng/transducers/xform/interpolate-linear.js","node_modules/@thi.ng/transducers/xform/interpose.js","node_modules/@thi.ng/transducers/xform/keep.js","node_modules/@thi.ng/transducers/xform/labeled.js","node_modules/@thi.ng/transducers/func/deep-transform.js","node_modules/@thi.ng/transducers/xform/map-deep.js","node_modules/@thi.ng/transducers/xform/map-keys.js","node_modules/@thi.ng/transducers/xform/map-nth.js","node_modules/@thi.ng/transducers/xform/map-vals.js","node_modules/@thi.ng/transducers/xform/take.js","node_modules/@thi.ng/transducers/xform/match-first.js","node_modules/@thi.ng/transducers/internal/drain.js","node_modules/@thi.ng/transducers/xform/take-last.js","node_modules/@thi.ng/transducers/xform/match-last.js","node_modules/@thi.ng/transducers/xform/moving-average.js","node_modules/@thi.ng/transducers/internal/sort-opts.js","node_modules/@thi.ng/transducers/xform/moving-median.js","node_modules/@thi.ng/transducers/xform/multiplex.js","node_modules/@thi.ng/transducers/func/renamer.js","node_modules/@thi.ng/transducers/xform/rename.js","node_modules/@thi.ng/transducers/xform/multiplex-obj.js","node_modules/@thi.ng/transducers/xform/noop.js","node_modules/@thi.ng/transducers/xform/pad-last.js","node_modules/@thi.ng/transducers/xform/page.js","node_modules/@thi.ng/transducers/xform/partition-by.js","node_modules/@thi.ng/transducers/xform/partition-of.js","node_modules/@thi.ng/transducers/xform/partition-sort.js","node_modules/@thi.ng/transducers/xform/partition-sync.js","node_modules/@thi.ng/transducers/xform/pluck.js","node_modules/@thi.ng/transducers/xform/sample.js","node_modules/@thi.ng/transducers/xform/scan.js","node_modules/@thi.ng/transducers/func/key-selector.js","node_modules/@thi.ng/transducers/xform/select-keys.js","node_modules/@thi.ng/transducers/xform/side-effect.js","node_modules/@thi.ng/transducers/xform/sliding-window.js","node_modules/@thi.ng/transducers/xform/stream-shuffle.js","node_modules/@thi.ng/transducers/xform/stream-sort.js","node_modules/@thi.ng/transducers/xform/struct.js","node_modules/@thi.ng/transducers/xform/swizzle.js","node_modules/@thi.ng/transducers/xform/take-nth.js","node_modules/@thi.ng/transducers/xform/take-while.js","node_modules/@thi.ng/transducers/xform/throttle-time.js","node_modules/@thi.ng/transducers/xform/toggle.js","node_modules/@thi.ng/transducers/xform/trace.js","node_modules/@thi.ng/transducers/xform/word-wrap.js","node_modules/@thi.ng/transducers/func/juxtr.js","node_modules/@thi.ng/transducers/func/lookup.js","node_modules/@thi.ng/transducers/iter/as-iterable.js","node_modules/@thi.ng/transducers/iter/repeatedly.js","node_modules/@thi.ng/transducers/iter/choices.js","node_modules/@thi.ng/transducers/iter/concat.js","node_modules/@thi.ng/transducers/iter/cycle.js","node_modules/@thi.ng/transducers/iter/repeat.js","node_modules/@thi.ng/transducers/iter/extend-sides.js","node_modules/@thi.ng/transducers/iter/iterate.js","node_modules/@thi.ng/transducers/iter/keys.js","node_modules/@thi.ng/transducers/iter/pad-sides.js","node_modules/@thi.ng/transducers/iter/pairs.js","node_modules/@thi.ng/transducers/iter/permutations.js","node_modules/@thi.ng/transducers/iter/range3d.js","node_modules/@thi.ng/transducers/iter/reverse.js","node_modules/@thi.ng/transducers/iter/symmetric.js","node_modules/@thi.ng/transducers/iter/tween.js","node_modules/@thi.ng/transducers/iter/vals.js","node_modules/@thi.ng/transducers/iter/wrap-sides.js","node_modules/@thi.ng/transducers/index.js","node_modules/@thi.ng/associative/utils.js","node_modules/@thi.ng/associative/internal/xform-setop.js","node_modules/@thi.ng/associative/difference.js","node_modules/@thi.ng/associative/equiv-map.js","node_modules/@thi.ng/binary/api.js","node_modules/@thi.ng/binary/align.js","node_modules/@thi.ng/binary/count.js","node_modules/@thi.ng/binary/mask.js","node_modules/@thi.ng/binary/edit.js","node_modules/@thi.ng/binary/float.js","node_modules/@thi.ng/binary/gray.js","node_modules/@thi.ng/binary/logic.js","node_modules/@thi.ng/binary/pow.js","node_modules/@thi.ng/binary/rotate.js","node_modules/@thi.ng/binary/splat.js","node_modules/@thi.ng/binary/swizzle.js","node_modules/@thi.ng/binary/index.js","node_modules/@thi.ng/associative/hash-map.js","node_modules/@thi.ng/associative/select-keys.js","node_modules/@thi.ng/associative/indexed.js","node_modules/@thi.ng/associative/intersection.js","node_modules/@thi.ng/associative/invert.js","node_modules/@thi.ng/associative/merge.js","node_modules/@thi.ng/associative/rename-keys.js","node_modules/@thi.ng/associative/join.js","node_modules/@thi.ng/dcons/index.js","node_modules/@thi.ng/associative/ll-set.js","node_modules/@thi.ng/associative/merge-apply.js","node_modules/@thi.ng/associative/merge-with.js","node_modules/@thi.ng/associative/merge-deep.js","node_modules/@thi.ng/associative/sorted-map.js","node_modules/@thi.ng/associative/sorted-set.js","node_modules/@thi.ng/associative/sparse-set.js","node_modules/@thi.ng/associative/union.js","node_modules/@thi.ng/associative/without-keys.js","node_modules/@thi.ng/associative/index.js","node_modules/@thi.ng/rstream/api.js","node_modules/@thi.ng/rstream/utils/idgen.js","node_modules/@thi.ng/rstream/subscription.js","node_modules/@thi.ng/rstream/stream-sync.js","node_modules/@thi.ng/rstream/utils/worker.js","node_modules/@thi.ng/rstream/subs/tunnel.js","node_modules/@thi.ng/rstream/forkjoin.js","node_modules/@thi.ng/rstream/metastream.js","node_modules/@thi.ng/rstream/pubsub.js","node_modules/@thi.ng/rstream/stream.js","node_modules/@thi.ng/rstream/stream-merge.js","node_modules/@thi.ng/rstream/from/iterable.js","node_modules/@thi.ng/rstream/trigger.js","node_modules/@thi.ng/rstream/from/interval.js","node_modules/@thi.ng/rstream/from/raf.js","node_modules/@thi.ng/rstream/tween.js","node_modules/@thi.ng/rstream/from/atom.js","node_modules/@thi.ng/rstream/from/event.js","node_modules/@thi.ng/rstream/from/promise.js","node_modules/@thi.ng/rstream/from/promises.js","node_modules/@thi.ng/paths/path.js","node_modules/@thi.ng/paths/getter.js","node_modules/@thi.ng/paths/setter.js","node_modules/@thi.ng/paths/update-in.js","node_modules/@thi.ng/paths/delete-in.js","node_modules/@thi.ng/paths/get-in.js","node_modules/@thi.ng/paths/mutator.js","node_modules/@thi.ng/paths/mut-in.js","node_modules/@thi.ng/paths/mut-in-many.js","node_modules/@thi.ng/paths/set-in.js","node_modules/@thi.ng/paths/set-in-many.js","node_modules/@thi.ng/paths/updater.js","node_modules/@thi.ng/paths/index.js","node_modules/@thi.ng/atom/idgen.js","node_modules/@thi.ng/atom/view.js","node_modules/@thi.ng/atom/atom.js","node_modules/@thi.ng/atom/cursor.js","node_modules/@thi.ng/atom/history.js","node_modules/@thi.ng/atom/transacted.js","node_modules/@thi.ng/atom/index.js","node_modules/@thi.ng/rstream/from/view.js","node_modules/@thi.ng/rstream/from/worker.js","node_modules/@thi.ng/rstream/subs/bisect.js","node_modules/@thi.ng/rstream/subs/post-worker.js","node_modules/@thi.ng/rstream/subs/resolve.js","node_modules/@thi.ng/rstream/subs/sidechain-partition.js","node_modules/@thi.ng/rstream/subs/sidechain-toggle.js","node_modules/@thi.ng/rstream/subs/timeout.js","node_modules/@thi.ng/rstream/subs/trace.js","node_modules/@thi.ng/rstream/subs/transduce.js","node_modules/@thi.ng/rstream/index.js","../../../AppData/Local/nvs/node/10.16.2/x64/node_modules/parcel-bundler/node_modules/querystring-es3/decode.js","../../../AppData/Local/nvs/node/10.16.2/x64/node_modules/parcel-bundler/node_modules/querystring-es3/encode.js","../../../AppData/Local/nvs/node/10.16.2/x64/node_modules/parcel-bundler/node_modules/querystring-es3/index.js","parse-href.js","hurl.js","../../../AppData/Local/nvs/node/10.16.2/x64/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["DEFAULT_EPS","SEMAPHORE","Symbol","EVENT_ALL","EVENT_ENABLE","EVENT_DISABLE","NO_OP","LogLevel","Type","GLType","GL2TYPE","TYPE2GL","undefined","SIZEOF","TYPEDARRAY_CTORS","Uint8Array","Uint8ClampedArray","Int8Array","Uint16Array","Int16Array","Uint32Array","Int32Array","Float32Array","Float64Array","typedArray","type","xs","uintType","x","intType","assert","process","test","msg","Error","NULL_LOGGER","Object","freeze","level","NONE","fine","debug","info","warn","severe","ConsoleLogger","constructor","id","FINE","args","log","DEBUG","INFO","WARN","SEVERE","console","mixin","behaviour","sharedBehaviour","instanceKeys","Reflect","ownKeys","sharedKeys","typeTag","_mixin","clazz","key","existing","getOwnPropertyDescriptor","prototype","configurable","defineProperty","value","writable","name","toString","enumerable","propertyIsEnumerable","hasInstance","state","_","__","descriptor","deprecated","target","prop","signature","fn","apply","arguments","nomixin","sealed","seal","IEnableMixin","_enabled","isEnabled","enable","notify","disable","toggle","inotify_dispatch","listeners","e","i","n","length","l","call","canceled","INotifyMixin","addListener","scope","_listeners","__listener","push","removeListener","idx","splice","f","iterable","iterator","IWatchMixin","addWatch","_watches","removeWatch","notifyWatches","oldState","newState","w","OBJP","getPrototypeOf","FN","STR","equiv","a","b","proto","equivObject","equivArrayLike","Set","equivSet","Map","equivMap","Date","getTime","RegExp","_equiv","size","keys","sort","k","hasOwnProperty","dissoc","coll","delete","dissocObj","obj","p","entries","get","has","existsAndNotNull","exists","t","hasCrypto","window","hasMaxLength","len","hasMinLength","isFunction","hasPerformance","performance","now","hasWASM","global","hasWebGL","document","createElement","getContext","hasWebSocket","WebSocket","implementsFunction","isArray","Array","isArrayLike","isBlob","Blob","isBoolean","isChrome","isDate","isEven","isFalse","isFile","File","isFirefox","isString","RE","isHexColor","isIE","navigator","userAgent","indexOf","isInRange","min","max","isInt32","isIterable","isMap","isMobile","isNaN","isNegative","isNil","isNode","versions","node","isNotStringAndIterable","isNull","isNumber","isObject","isOdd","isPlainObject","isPosititve","isPrimitive","isPromise","Promise","isPromiseLike","isRegExp","isSafari","isSet","isSymbol","isTransferable","ArrayBuffer","SharedArrayBuffer","MessagePort","isTrue","isTypedArray","isUint32","isUndefined","isUUID","isUUIDv4","isZero","into","dest","src","set","add","__private","WeakMap","__vals","inst","vals","ArraySet","opts","species","toStringTag","copy","$this","s","slice","empty","clear","first","notFound","eq","disj","o","forEach","thisArg","v","values","commonKeysMap","out","commonKeysObj","Reduced","val","deref","reduced","isReduced","ensureReduced","unreduced","defError","prefix","suffix","IllegalArgumentError","illegalArgs","IllegalArityError","illegalArity","IllegalStateError","illegalState","UnsupportedOperationError","unsupported","parseArgs","reduce","rfn","init","complete","acc","$reduce","reduceArray","reduceIterable","reducer","$$reduce","xform","y","iterator1","$iter","impl","compR","map","r","transduce","NO_OP_REDUCER","run","tx","fx","step","done","__mathop","initDefault","res","assocMap","assocObj","conj","count","offset","div","every","pred","fill","start","fillN","comp","fns","c","d","g","h","j","compL","reverse","compI","complement","constantly","delay","body","Delay","realized","isRealized","delayed","resolve","setTimeout","identity","ifDef","juxt","partial","foo","threadFirst","expr","threadLast","trampoline","__groupByOpts","assign","group","groupByMap","frequencies","groupByObj","_init","_reduce","branchPred","groupBinary","bits","branch","leaf","left","right","maxIndex","last","compare","compareNumAsc","compareNumDesc","maxCompare","cmp","Infinity","Math","mean","minCompare","mul","pushCopy","reductions","some","str","sep","join","sub","benchmark","prev","cat","converge","range","from","to","Range","range2d","fromX","toX","stepX","fromY","toY","stepY","rx","zip","iters","tuple","next","buildKernel1d","weights","w2","buildKernel2d","h2","kernelLookup1d","width","wrap","border","ox","xx","kernelLookup2d","height","oy","yy","kernelError","convolve1d","indices","kernel","kwidth","convolve2d","kheight","dedupe","distinct","seen","cache","throttle","_pred","dropNth","skip","dropWhile","ok","drop","m","duplicate","filter","binarySearch","buf","kx","low","high","mid","binarySearchNumeric","endsWith","needle","_eq","ensureIterable","ensureArray","ensureArrayLike","find","findIndex","fuzzyMatch","domain","query","nd","nq","q","isSorted","arr","end","curr","arrayIterator","peek","swap","multiSwap","quickSort","_cmp","_swap","pivot","INV_MAX","ARandom","float","norm","int","minmax","gaussian","scale","sum","DEFAULT_SEED","Smush32","seed","buffer","gen","random","SystemRandom","SYSTEM","XorShift128","bytes","XorWow","XsAdd","randomID","syms","rnd","weightedRandom","choices","total","shuffleRange","shuffle","startsWith","swizzle","order","filterFuzzy","iter","flattenWith","flatten","mapIndexed","indexed","interleave","_sep","_comp","normRange","inclLast","mapcat","partition","all","interpolate","chunk","PI","TAU","HALF_PI","THIRD_PI","QUARTER_PI","SIXTH_PI","INV_PI","INV_TAU","INV_HALF_PI","DEG2RAD","RAD2DEG","PHI","sqrt","SQRT2","SQRT3","SQRT2_2","SQRT2_3","THIRD","TWO_THIRD","SIXTH","EPS","Crossing","absDiff","abs","sign","eps","sincos","theta","sin","cos","cossin","absTheta","absInnerAngle","angleDist","atan2Abs","atan2","quadrant","deg","rad","csc","sec","cot","tan","loc","gamma","normCos","x2","__fastCos","fastCos","fastSin","eqDelta","eqDeltaFixed","isCrossOver","a1","a2","b1","b2","isCrossUnder","classifyCrossing","isMinima","isMaxima","index","minimaIndex","maximaIndex","minimaIndices","maximaIndices","clamp","clamp01","clamp11","wrap01","wrap11","min2id","min3id","min4id","max2id","max3id","max4id","smin","smax","ea","exp","eb","sclamp","absMin","absMax","foldback","inRange","inOpenRange","fit","fitClamped","fit01","fit10","fit11","M8","M16","signExtend8","signExtend16","addi8","divi8","muli8","subi8","andi8","ori8","xori8","noti8","lshifti8","rshifti8","addi16","divi16","muli16","subi16","andi16","ori16","xori16","noti16","lshifti16","rshifti16","addi32","divi32","muli32","subi32","andi32","ori32","xori32","lshifti32","rshifti32","noti32","addu8","divu8","mulu8","subu8","andu8","oru8","xoru8","notu8","lshiftu8","rshiftu8","addu16","divu16","mulu16","subu16","andu16","oru16","xoru16","notu16","lshiftu16","rshiftu16","addu32","divu32","mulu32","subu32","andu32","oru32","xoru32","notu32","lshiftu32","rshiftu32","minError","error","delta","minT","minE","mix","mixBilinear","u","mixQuadratic","mixCubic","t2","s2","mixHermite","y1","y2","mixCubicHermite","ta","tb","h00","h10","h01","h11","tangentCardinal","tc","tangentDiff3","tween","circular","cosine","decimated","floor","bounce","amp","tk","ease","pow","impulse","gain","parabola","cubicPulse","sinc","sigmoid","sigmoid11","fmod","fract","trunc","ceil","roundTo","prec","round","roundEps","simplifyRatio","num","denom","e1","e2","derivative","solveLinear","solveQuadratic","solveCubic","aa","bb","ba3","cbrt","acos","edge","smoothStep","edge2","smootherStep","expStep","interpolateHermite","interpolateLinear","interpose","keep","labeled","deepTransform","spec","mapfns","mapDeep","mapKeys","mapNth","off","mapVals","take","matchFirst","__drain","shift","takeLast","matchLast","movingAverage","period","__sortOpts","movingMedian","multiplex","renamer","kmap","ks","c2","c1","rename","multiplexObj","xforms","noop","padLast","rem","page","partitionBy","partitionOf","sizes","partitionSort","partitionSync","currKeys","mergeOnly","reset","backPressure","requiredInputs","collect","slot","String","required","pluck","sample","prob","scan","inito","completeo","reduceo","initi","completei","reducei","_acc","keySelector","selectKeys","sideEffect","slidingWindow","streamShuffle","maxSwaps","streamSort","struct","fields","takeNth","takeWhile","throttleTime","on","initial","trace","wordWrap","lineLength","delim","always","flag","juxtR","rs","aa1","ra","rb","aa2","rc","aa3","lookup1d","lookup2d","lookup3d","stridez","asIterable","repeatedly","concat","cycle","input","repeat","extendSides","numLeft","numRight","iterate","padSides","pairs","permutations","permutationsN","offsets","seqs","range3d","fromZ","toZ","stepZ","ry","z","_input","symmetric","head","stops","unshift","interval","wrapSides","_src","ctor","objValues","ensureMap","ensureSet","xformSetOp","op","difference","differenceR","__map","EquivMap","fromObject","_opts","pair","MASKS","align","addr","isAligned","popCount","hammingDist","clz32","LN2","ctz32","bitSize","defMask","maskL","maskH","bitClear","bit","bitFlip","bitSet","bitSetWindow","bitClearWindow","F32","I32","U32","floatToIntBits","floatToUintBits","intBitsToFloat","uintBitsToFloat","floatToSortableInt","encodeGray32","decodeGray32","bitNot","bitAnd","bitNand","bitOr","bitNor","bitXor","bitXnor","bitImply","bitAoi21","bitOai21","bitAoi22","bitOai22","bitMux","bitDemux","isPow2","ceilPow2","floorPow2","rotateLeft","rotateRight","splat4_24","splat4_32","splat8_24","splat8_32","splat16_32","same4","same8","lane8","lane","lane4","lane2","setLane8","setLane4","setLane2","swizzle8","swizzle4","flipBytes","__iterator","bins","DEFAULT_CAP","HashMap","cap","hash","load","mask","resize","overrides","selectKeysMap","selectKeysObj","records","ik","rv","intersection","intersectionR","invertMap","invertObj","mergeMap","mergeObj","renameKeysMap","km","renameKeysObj","found","joinWith","DCons","_length","release","cell","tail","ca","cb","seq","nthCell","$seq","cons","insertBefore","newCell","insertAfter","insertBeforeNth","ensureIndex","nthCellUnsafe","insertAfterNth","insertSorted","findWith","slices","at","del","insert","removed","remove","pop","setHead","setTail","setNth","nth","log2","asHead","asTail","inSize","numMerges","psize","qsize","toJSON","dir","dcons","LLSet","mergeApplyMap","mergeApplyObj","mergeMapWith","mergeObjWith","mergeDeepObj","Node","SortedMap","capacity","maxh","probability","DEFAULT_P","code","findPredNode","stack","pickHeight","E","SortedSet","fail","ASparseSet","dense","sparse","__copyTo","$c","SparseSet8","SparseSet16","SparseSet32","sparseSet","union","unionR","withoutKeysMap","withoutKeysObj","State","CloseMode","LOGGER","setLogger","logger","NEXT_ID","nextID","optsWithID","subscription","Subscription","parent","closeIn","closeOut","cacheLast","subs","getState","subscribe","ensureState","addWrapped","subscribeAll","wrapped","transform","xf","unsubscribe","cleanup","uacc","dispatch","notified","sync","StreamSync","srcIDs","psync","mapv","sources","realSourceIDs","invRealSourceIDs","idSources","sourceIDs","addAll","markDone","__owner","removeID","getSourceForID","removeAll","removeAllIDs","ids","getSources","inlineWorker","makeWorker","worker","Worker","URL","createObjectURL","tunnel","Tunnel","workers","maxWorkers","transferables","terminate","interrupt","addEventListener","data","postMessage","forkJoin","numWorkers","hardwareConcurrency","workerIDs","fork","results","forkBuffer","minChunkSize","chunkSize","joinBuffer","parts","metaStream","factory","MetaStream","stream","detach","pubsub","PubSub","topicfn","topic","topics","subscribeTopic","topicID","unsubscribeTopic","Stream","_inited","_cancel","cancel","merge","StreamMerge","fromIterable","setInterval","clearInterval","fromIterableSync","trigger","fromInterval","fromRAF","isActive","loop","requestAnimationFrame","cancelAnimationFrame","stop","clock","tweenNumber","speed","fromAtom","atom","emitFirst","changed","fromEvent","listenerOpts","streamOpts","listener","removeEventListener","fromDOMEvent","fromPromise","isError","err","catch","then","fromPromises","promises","toPath","path","split","getter","getterT","setter","setterT","_copy","compS","updateIn","updateInT","deleteIn","deleteInT","getIn","getInT","mutator","mutatorT","mutIn","mutInT","mutInMany","setIn","setInT","setInMany","updater","updaterT","View","lazy","isDirty","isLazy","lookup","unprocessed","pval","view","__decorate","decorators","desc","decorate","Atom","valid","_value","old","resetIn","swapIn","addView","Cursor","update","validate","selfUpdate","local","cval","History_1","History","maxLen","canUndo","history","canRedo","future","undo","EVENT_UNDO","redo","EVENT_REDO","record","prevV","EVENT_RECORD","___","Transacted","current","isTransaction","ensureTx","begin","commit","watch","fromView","fromWorker","_worker","ml","el","bisect","truthy","falsy","postWorker","transfer","Resolver","outstanding","sidechainPartition","side","SidechainPartition","sideSub","sidechainToggle","SidechainToggle","timeout","timeoutMs","Timeout","errorObj","resetTimeout","clearTimeout","timeoutId","reject","fulfilled","rejected","module","exports","qs","options","regexp","maxKeys","replace","kstr","vstr","substr","decodeURIComponent","stringifyPrimitive","isFinite","objectKeys","encodeURIComponent","decode","parse","require","encode","stringify","hrefs","parse_href","href","path_str","query_str","part","hash_str","full_path","link1","innerText","link2","link3","link4","appendChild","preloadForPage","base","fetch","json","JSON","pushHistory","pushState","config","route_obj","route_stream","load_stream","nav_stream_DOM","href_handler","preventDefault","location","querySelectorAll","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","hostname","protocol","ws","onmessage","event","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","overlay","createErrorOverlay","getElementById","stackTrace","innerHTML","getParents","modules","parents","dep","Function","deps","cached"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,MAAMA,WAAW,GAAG,IAApB;AACP;;;;;AAGO,MAAMC,SAAS,GAAGC,MAAM,EAAxB;;;;;;;;;ACJA,MAAMC,SAAS,GAAG,GAAlB;;AACA,MAAMC,YAAY,GAAG,QAArB;;AACA,MAAMC,aAAa,GAAG,SAAtB;;;;;;;;;;ACFP;;;AAGO,MAAMC,KAAK,GAAG,MAAM,CAAG,CAAvB;;;;;;;;;;ACHA,IAAIC,QAAJ;;;AACP,CAAC,UAAUA,QAAV,EAAoB;AACjBA,EAAAA,QAAQ,CAACA,QAAQ,CAAC,MAAD,CAAR,GAAmB,CAApB,CAAR,GAAiC,MAAjC;AACAA,EAAAA,QAAQ,CAACA,QAAQ,CAAC,OAAD,CAAR,GAAoB,CAArB,CAAR,GAAkC,OAAlC;AACAA,EAAAA,QAAQ,CAACA,QAAQ,CAAC,MAAD,CAAR,GAAmB,CAApB,CAAR,GAAiC,MAAjC;AACAA,EAAAA,QAAQ,CAACA,QAAQ,CAAC,MAAD,CAAR,GAAmB,CAApB,CAAR,GAAiC,MAAjC;AACAA,EAAAA,QAAQ,CAACA,QAAQ,CAAC,QAAD,CAAR,GAAqB,CAAtB,CAAR,GAAmC,QAAnC;AACAA,EAAAA,QAAQ,CAACA,QAAQ,CAAC,MAAD,CAAR,GAAmB,CAApB,CAAR,GAAiC,MAAjC;AACH,CAPD,EAOGA,QAAQ,wBAAKA,QAAQ,GAAG,EAAhB,CAPX;;;;;;;;;;ACDA;;;;;;;AAOO,IAAIC,IAAJ;;;AACP,CAAC,UAAUA,IAAV,EAAgB;AACbA,EAAAA,IAAI,CAACA,IAAI,CAAC,IAAD,CAAJ,GAAa,CAAd,CAAJ,GAAuB,IAAvB;AACAA,EAAAA,IAAI,CAACA,IAAI,CAAC,KAAD,CAAJ,GAAc,CAAf,CAAJ,GAAwB,KAAxB;AACAA,EAAAA,IAAI,CAACA,IAAI,CAAC,IAAD,CAAJ,GAAa,CAAd,CAAJ,GAAuB,IAAvB;AACAA,EAAAA,IAAI,CAACA,IAAI,CAAC,KAAD,CAAJ,GAAc,CAAf,CAAJ,GAAwB,KAAxB;AACAA,EAAAA,IAAI,CAACA,IAAI,CAAC,KAAD,CAAJ,GAAc,CAAf,CAAJ,GAAwB,KAAxB;AACAA,EAAAA,IAAI,CAACA,IAAI,CAAC,KAAD,CAAJ,GAAc,CAAf,CAAJ,GAAwB,KAAxB;AACAA,EAAAA,IAAI,CAACA,IAAI,CAAC,KAAD,CAAJ,GAAc,CAAf,CAAJ,GAAwB,KAAxB;AACAA,EAAAA,IAAI,CAACA,IAAI,CAAC,KAAD,CAAJ,GAAc,CAAf,CAAJ,GAAwB,KAAxB;AACAA,EAAAA,IAAI,CAACA,IAAI,CAAC,KAAD,CAAJ,GAAc,CAAf,CAAJ,GAAwB,KAAxB;AACH,CAVD,EAUGA,IAAI,oBAAKA,IAAI,GAAG,EAAZ,CAVP;AAWA;;;;;;;;;AAOO,IAAIC,MAAJ;;;AACP,CAAC,UAAUA,MAAV,EAAkB;AACfA,EAAAA,MAAM,CAACA,MAAM,CAAC,IAAD,CAAN,GAAe,IAAhB,CAAN,GAA8B,IAA9B;AACAA,EAAAA,MAAM,CAACA,MAAM,CAAC,IAAD,CAAN,GAAe,IAAhB,CAAN,GAA8B,IAA9B;AACAA,EAAAA,MAAM,CAACA,MAAM,CAAC,KAAD,CAAN,GAAgB,IAAjB,CAAN,GAA+B,KAA/B;AACAA,EAAAA,MAAM,CAACA,MAAM,CAAC,KAAD,CAAN,GAAgB,IAAjB,CAAN,GAA+B,KAA/B;AACAA,EAAAA,MAAM,CAACA,MAAM,CAAC,KAAD,CAAN,GAAgB,IAAjB,CAAN,GAA+B,KAA/B;AACAA,EAAAA,MAAM,CAACA,MAAM,CAAC,KAAD,CAAN,GAAgB,IAAjB,CAAN,GAA+B,KAA/B;AACAA,EAAAA,MAAM,CAACA,MAAM,CAAC,KAAD,CAAN,GAAgB,IAAjB,CAAN,GAA+B,KAA/B;AACH,CARD,EAQGA,MAAM,sBAAKA,MAAM,GAAG,EAAd,CART;AASA;;;;;AAGO,MAAMC,OAAO,GAAG;AACnB,GAAC;AAAK;AAAN,KAAiB;AAAE;AADA;AAEnB,GAAC;AAAK;AAAN,KAAiB;AAAE;AAFA;AAGnB,GAAC;AAAK;AAAN,KAAkB;AAAE;AAHD;AAInB,GAAC;AAAK;AAAN,KAAkB;AAAE;AAJD;AAKnB,GAAC;AAAK;AAAN,KAAkB;AAAE;AALD;AAMnB,GAAC;AAAK;AAAN,KAAkB;AAAE;AAND;AAOnB,GAAC;AAAK;AAAN,KAAkB;AAAE;;AAPD,CAAhB;AASP;;;;;;;;;;AAQO,MAAMC,OAAO,GAAG;AACnB,GAAC;AAAE;AAAH,KAAc;AAAK;AADA;AAEnB,GAAC;AAAE;AAAH,KAAc;AAAK;AAFA;AAGnB,GAAC;AAAE;AAAH,KAAe;AAAK;AAHD;AAInB,GAAC;AAAE;AAAH,KAAe;AAAK;AAJD;AAKnB,GAAC;AAAE;AAAH,KAAe;AAAK;AALD;AAMnB,GAAC;AAAE;AAAH,KAAe;AAAK;AAND;AAOnB,GAAC;AAAE;AAAH,KAAe;AAAK;AAPD;AAQnB,GAAC;AAAE;AAAH,KAAe;AAAK;AARD;AASnB,GAAC;AAAE;AAAH,KAAe;AAAK;AATD;AAUnB,GAAC;AAAE;AAAH,KAAeC;AAVI,CAAhB;AAYP;;;;;;AAIO,MAAMC,MAAM,GAAG;AAClB,GAAC;AAAE;AAAH,KAAc,CADI;AAElB,GAAC;AAAE;AAAH,KAAe,CAFG;AAGlB,GAAC;AAAE;AAAH,KAAc,CAHI;AAIlB,GAAC;AAAE;AAAH,KAAe,CAJG;AAKlB,GAAC;AAAE;AAAH,KAAe,CALG;AAMlB,GAAC;AAAE;AAAH,KAAe,CANG;AAOlB,GAAC;AAAE;AAAH,KAAe,CAPG;AAQlB,GAAC;AAAE;AAAH,KAAe,CARG;AASlB,GAAC;AAAE;AAAH,KAAe;AATG,CAAf;;AAWA,MAAMC,gBAAgB,GAAG;AAC5B,GAAC;AAAE;AAAH,KAAcC,UADc;AAE5B,GAAC;AAAE;AAAH,KAAeC,iBAFa;AAG5B,GAAC;AAAE;AAAH,KAAcC,SAHc;AAI5B,GAAC;AAAE;AAAH,KAAeC,WAJa;AAK5B,GAAC;AAAE;AAAH,KAAeC,UALa;AAM5B,GAAC;AAAE;AAAH,KAAeC,WANa;AAO5B,GAAC;AAAE;AAAH,KAAeC,UAPa;AAQ5B,GAAC;AAAE;AAAH,KAAeC,YARa;AAS5B,GAAC;AAAE;AAAH,KAAeC,YATa;AAU5B,GAAC;AAAK;AAAN,KAAiBR,UAVW;AAW5B,GAAC;AAAK;AAAN,KAAiBE,SAXW;AAY5B,GAAC;AAAK;AAAN,KAAkBC,WAZU;AAa5B,GAAC;AAAK;AAAN,KAAkBC,UAbU;AAc5B,GAAC;AAAK;AAAN,KAAkBC,WAdU;AAe5B,GAAC;AAAK;AAAN,KAAkBC,UAfU;AAgB5B,GAAC;AAAK;AAAN,KAAkBC;AAhBU,CAAzB;;;AAkBA,SAASE,UAAT,CAAoBC,IAApB,EAA0B,GAAGC,EAA7B,EAAiC;AACpC,SAAO,IAAIZ,gBAAgB,CAACW,IAAD,CAApB,CAA2B,GAAGC,EAA9B,CAAP;AACH;AACD;;;;;;;;AAMO,MAAMC,QAAQ,GAAIC,CAAD,IAAOA,CAAC,IAAI,KAAL,GAAa;AAAE;AAAf,EAA0BA,CAAC,IAAI,OAAL,GAAe;AAAE;AAAjB,EAA6B;AAAE;AAAjF;AACP;;;;;;;;;;AAMO,MAAMC,OAAO,GAAID,CAAD,IAAOA,CAAC,IAAI,CAAC,IAAN,IAAcA,CAAC,GAAG,IAAlB,GACxB;AAAE;AADsB,EAExBA,CAAC,IAAI,CAAC,MAAN,IAAgBA,CAAC,GAAG,MAApB,GACI;AAAE;AADN,EAEI;AAAE;AAJL;;;;;;;;;;;;;;ACrHP;;AACA;;;;;;AAMO,MAAME,MAAM,GAAG,OAAOC,OAAP,KAAmB,WAAnB,IAClB,kBAAyB,YADP,IAElB,cAAiC,GAFf,GAGhB,CAACC,IAAD,EAAOC,GAAG,GAAG,kBAAb,KAAoC;AAClC,MAAK,OAAOD,IAAP,KAAgB,UAAhB,IAA8B,CAACA,IAAI,EAApC,IAA2C,CAACA,IAAhD,EAAsD;AAClD,UAAM,IAAIE,KAAJ,CAAU,OAAOD,GAAP,KAAe,UAAf,GAA4BA,GAAG,EAA/B,GAAoCA,GAA9C,CAAN;AACH;AACJ,CAPiB,GAQhB3B,SARC;;;;;;;;;;ACPP;;AACO,MAAM6B,WAAW,GAAGC,MAAM,CAACC,MAAP,CAAc;AACrCC,EAAAA,KAAK,EAAE/B,iBAASgC,IADqB;;AAErCC,EAAAA,IAAI,GAAG,CAAG,CAF2B;;AAGrCC,EAAAA,KAAK,GAAG,CAAG,CAH0B;;AAIrCC,EAAAA,IAAI,GAAG,CAAG,CAJ2B;;AAKrCC,EAAAA,IAAI,GAAG,CAAG,CAL2B;;AAMrCC,EAAAA,MAAM,GAAG,CAAG;;AANyB,CAAd,CAApB;;;AAQA,MAAMC,aAAN,CAAoB;AACvBC,EAAAA,WAAW,CAACC,EAAD,EAAKT,KAAK,GAAG/B,iBAASyC,IAAtB,EAA4B;AACnC,SAAKD,EAAL,GAAUA,EAAV;AACA,SAAKT,KAAL,GAAaA,KAAb;AACH;;AACDE,EAAAA,IAAI,CAAC,GAAGS,IAAJ,EAAU;AACV,SAAKX,KAAL,IAAc/B,iBAASyC,IAAvB,IAA+B,KAAKE,GAAL,CAAS,MAAT,EAAiBD,IAAjB,CAA/B;AACH;;AACDR,EAAAA,KAAK,CAAC,GAAGQ,IAAJ,EAAU;AACX,SAAKX,KAAL,IAAc/B,iBAAS4C,KAAvB,IAAgC,KAAKD,GAAL,CAAS,OAAT,EAAkBD,IAAlB,CAAhC;AACH;;AACDP,EAAAA,IAAI,CAAC,GAAGO,IAAJ,EAAU;AACV,SAAKX,KAAL,IAAc/B,iBAAS6C,IAAvB,IAA+B,KAAKF,GAAL,CAAS,MAAT,EAAiBD,IAAjB,CAA/B;AACH;;AACDN,EAAAA,IAAI,CAAC,GAAGM,IAAJ,EAAU;AACV,SAAKX,KAAL,IAAc/B,iBAAS8C,IAAvB,IAA+B,KAAKH,GAAL,CAAS,MAAT,EAAiBD,IAAjB,CAA/B;AACH;;AACDL,EAAAA,MAAM,CAAC,GAAGK,IAAJ,EAAU;AACZ,SAAKX,KAAL,IAAc/B,iBAAS+C,MAAvB,IAAiC,KAAKJ,GAAL,CAAS,QAAT,EAAmBD,IAAnB,CAAjC;AACH;;AACDC,EAAAA,GAAG,CAACZ,KAAD,EAAQW,IAAR,EAAc;AACbM,IAAAA,OAAO,CAACL,GAAR,CAAa,IAAGZ,KAAM,KAAI,KAAKS,EAAG,GAAlC,EAAsC,GAAGE,IAAzC;AACH;;AAtBsB;;;;;;;;;;;ACT3B;;;;;;;;;;;;AAYO,MAAMO,KAAK,GAAG,CAACC,SAAD,EAAYC,eAAe,GAAG,EAA9B,KAAqC;AACtD,QAAMC,YAAY,GAAGC,OAAO,CAACC,OAAR,CAAgBJ,SAAhB,CAArB;AACA,QAAMK,UAAU,GAAGF,OAAO,CAACC,OAAR,CAAgBH,eAAhB,CAAnB;AACA,QAAMK,OAAO,GAAG7D,MAAM,CAAC,KAAD,CAAtB;;AACA,WAAS8D,MAAT,CAAgBC,KAAhB,EAAuB;AACnB,SAAK,IAAIC,GAAT,IAAgBP,YAAhB,EAA8B;AAC1B,YAAMQ,QAAQ,GAAG/B,MAAM,CAACgC,wBAAP,CAAgCH,KAAK,CAACI,SAAtC,EAAiDH,GAAjD,CAAjB;;AACA,UAAI,CAACC,QAAD,IAAaA,QAAQ,CAACG,YAA1B,EAAwC;AACpClC,QAAAA,MAAM,CAACmC,cAAP,CAAsBN,KAAK,CAACI,SAA5B,EAAuCH,GAAvC,EAA4C;AACxCM,UAAAA,KAAK,EAAEf,SAAS,CAACS,GAAD,CADwB;AAExCO,UAAAA,QAAQ,EAAE;AAF8B,SAA5C;AAIH,OALD,MAMK;AACDlB,QAAAA,OAAO,CAACL,GAAR,CAAa,iBAAgBe,KAAK,CAACS,IAAK,IAAGR,GAAG,CAACS,QAAJ,EAAe,EAA1D;AACH;AACJ;;AACDvC,IAAAA,MAAM,CAACmC,cAAP,CAAsBN,KAAK,CAACI,SAA5B,EAAuCN,OAAvC,EAAgD;AAAES,MAAAA,KAAK,EAAE;AAAT,KAAhD;AACA,WAAOP,KAAP;AACH;;AACD,OAAK,IAAIC,GAAT,IAAgBJ,UAAhB,EAA4B;AACxB1B,IAAAA,MAAM,CAACmC,cAAP,CAAsBP,MAAtB,EAA8BE,GAA9B,EAAmC;AAC/BM,MAAAA,KAAK,EAAEd,eAAe,CAACQ,GAAD,CADS;AAE/BU,MAAAA,UAAU,EAAElB,eAAe,CAACmB,oBAAhB,CAAqCX,GAArC;AAFmB,KAAnC;AAIH;;AACD9B,EAAAA,MAAM,CAACmC,cAAP,CAAsBP,MAAtB,EAA8B9D,MAAM,CAAC4E,WAArC,EAAkD;AAC9CN,IAAAA,KAAK,EAAG5C,CAAD,IAAO,CAAC,CAACA,CAAC,CAACmC,OAAD;AAD6B,GAAlD;AAGA,SAAOC,MAAP;AACH,CA9BM;;;;;;;;;;;ACZP;;;;;;AAMO,MAAMM,YAAY,GAAIS,KAAD,IAAW,UAAUC,CAAV,EAAaC,EAAb,EAAiBC,UAAjB,EAA6B;AAChEA,EAAAA,UAAU,CAACZ,YAAX,GAA0BS,KAA1B;AACH,CAFM;;;;;;;;;;;ACNP;;AACA;;;;;;;;AAQO,MAAMI,UAAU,GAAG,CAAClD,GAAD,EAAMiB,GAAG,GAAGK,OAAO,CAACL,GAApB,KAA4B,UAAUkC,MAAV,EAAkBC,IAAlB,EAAwBH,UAAxB,EAAoC;AACtF,QAAMI,SAAS,GAAI,GAAEF,MAAM,CAACtC,WAAP,CAAmB4B,IAAK,IAAGW,IAAI,CAACV,QAAL,EAAgB,EAAhE;AACA,QAAMY,EAAE,GAAGL,UAAU,CAACV,KAAtB;AACA,sBAAO,OAAOe,EAAP,KAAc,UAArB,EAAkC,GAAED,SAAU,oBAA9C;;AACAJ,EAAAA,UAAU,CAACV,KAAX,GAAmB,YAAY;AAC3BtB,IAAAA,GAAG,CAAE,cAAaoC,SAAU,KAAIrD,GAAG,IAAI,sBAAuB,EAA3D,CAAH;AACA,WAAOsD,EAAE,CAACC,KAAH,CAAS,IAAT,EAAeC,SAAf,CAAP;AACH,GAHD;;AAIA,SAAOP,UAAP;AACH,CATM;;;;;;;;;;;ACTP;;;;;;;AAOO,MAAMQ,OAAO,GAAG,CAACV,CAAD,EAAIC,EAAJ,EAAQC,UAAR,KAAuB;AAC1CA,EAAAA,UAAU,CAACZ,YAAX,GAA0B,KAA1B;AACH,CAFM;;;;;;;;;;;ACPP;;;;;AAKO,MAAMqB,MAAM,GAAI7C,WAAD,IAAiB;AACnCV,EAAAA,MAAM,CAACwD,IAAP,CAAY9C,WAAZ;AACAV,EAAAA,MAAM,CAACwD,IAAP,CAAY9C,WAAW,CAACuB,SAAxB;AACH,CAHM;;;;;;;;;;;ACLP;;AACA;;AACA;;;;;;AAMO,MAAMwB,YAAY,GAAG,kBAAM;AAC9BC,EAAAA,QAAQ,EAAE,IADoB;;AAE9BC,EAAAA,SAAS,GAAG;AACR,WAAO,KAAKD,QAAZ;AACH,GAJ6B;;AAK9BE,EAAAA,MAAM,GAAG;AACL,SAAKF,QAAL,GAAgB,IAAhB;;AACA,QAAI,KAAKG,MAAT,EAAiB;AACb,WAAKA,MAAL,CAAY;AAAElD,QAAAA,EAAE,EAAE3C,mBAAN;AAAoBgF,QAAAA,MAAM,EAAE;AAA5B,OAAZ;AACH;AACJ,GAV6B;;AAW9Bc,EAAAA,OAAO,GAAG;AACN,SAAKJ,QAAL,GAAgB,KAAhB;;AACA,QAAI,KAAKG,MAAT,EAAiB;AACb,WAAKA,MAAL,CAAY;AAAElD,QAAAA,EAAE,EAAE1C,oBAAN;AAAqB+E,QAAAA,MAAM,EAAE;AAA7B,OAAZ;AACH;AACJ,GAhB6B;;AAiB9Be,EAAAA,MAAM,GAAG;AACL,SAAKL,QAAL,GAAgB,KAAKI,OAAL,EAAhB,GAAiC,KAAKF,MAAL,EAAjC;AACA,WAAO,KAAKF,QAAZ;AACH;;AApB6B,CAAN,CAArB;;;;;;;;;;ACRP;;AACA;;AACO,MAAMM,gBAAgB,GAAG,CAACC,SAAD,EAAYC,CAAZ,KAAkB;AAC9C,MAAI,CAACD,SAAL,EACI;;AACJ,OAAK,IAAIE,CAAC,GAAG,CAAR,EAAWC,CAAC,GAAGH,SAAS,CAACI,MAAzB,EAAiCC,CAAtC,EAAyCH,CAAC,GAAGC,CAA7C,EAAgDD,CAAC,EAAjD,EAAqD;AACjDG,IAAAA,CAAC,GAAGL,SAAS,CAACE,CAAD,CAAb;AACAG,IAAAA,CAAC,CAAC,CAAD,CAAD,CAAKC,IAAL,CAAUD,CAAC,CAAC,CAAD,CAAX,EAAgBJ,CAAhB;;AACA,QAAIA,CAAC,CAACM,QAAN,EAAgB;AACZ;AACH;AACJ;AACJ,CAVM;AAWP;;;;;;;;AAKO,MAAMC,YAAY,GAAG,kBAAM;AAC9BC,EAAAA,WAAW,CAAC/D,EAAD,EAAKwC,EAAL,EAASwB,KAAT,EAAgB;AACvB,QAAIL,CAAC,GAAG,CAAC,KAAKM,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAAtC,EAA0CjE,EAA1C,CAAR;AACA,KAAC2D,CAAD,KAAOA,CAAC,GAAG,KAAKM,UAAL,CAAgBjE,EAAhB,IAAsB,EAAjC;;AACA,QAAI,KAAKkE,UAAL,CAAgBP,CAAhB,EAAmBnB,EAAnB,EAAuBwB,KAAvB,MAAkC,CAAC,CAAvC,EAA0C;AACtCL,MAAAA,CAAC,CAACQ,IAAF,CAAO,CAAC3B,EAAD,EAAKwB,KAAL,CAAP;AACA,aAAO,IAAP;AACH;;AACD,WAAO,KAAP;AACH,GAT6B;;AAU9BI,EAAAA,cAAc,CAACpE,EAAD,EAAKwC,EAAL,EAASwB,KAAT,EAAgB;AAC1B,QAAIV,SAAJ;AACA,QAAI,EAAEA,SAAS,GAAG,KAAKW,UAAnB,CAAJ,EACI,OAAO,KAAP;AACJ,UAAMN,CAAC,GAAGL,SAAS,CAACtD,EAAD,CAAnB;;AACA,QAAI2D,CAAJ,EAAO;AACH,YAAMU,GAAG,GAAG,KAAKH,UAAL,CAAgBP,CAAhB,EAAmBnB,EAAnB,EAAuBwB,KAAvB,CAAZ;;AACA,UAAIK,GAAG,KAAK,CAAC,CAAb,EAAgB;AACZV,QAAAA,CAAC,CAACW,MAAF,CAASD,GAAT,EAAc,CAAd;AACA,SAACV,CAAC,CAACD,MAAH,IAAa,OAAOJ,SAAS,CAACtD,EAAD,CAA7B;AACA,eAAO,IAAP;AACH;AACJ;;AACD,WAAO,KAAP;AACH,GAxB6B;;AAyB9BkD,EAAAA,MAAM,CAACK,CAAD,EAAI;AACN,QAAID,SAAJ;AACA,QAAI,EAAEA,SAAS,GAAG,KAAKW,UAAnB,CAAJ,EACI,OAAO,KAAP;AACJV,IAAAA,CAAC,CAAClB,MAAF,KAAaxE,SAAb,KAA2B0F,CAAC,CAAClB,MAAF,GAAW,IAAtC;AACAgB,IAAAA,gBAAgB,CAACC,SAAS,CAACC,CAAC,CAACvD,EAAH,CAAV,EAAkBuD,CAAlB,CAAhB;AACAF,IAAAA,gBAAgB,CAACC,SAAS,CAAClG,gBAAD,CAAV,EAAuBmG,CAAvB,CAAhB;AACH,GAhC6B;;AAiC9BW,EAAAA,UAAU,CAACZ,SAAD,EAAYiB,CAAZ,EAAeP,KAAf,EAAsB;AAC5B,QAAIR,CAAC,GAAGF,SAAS,CAACI,MAAlB;;AACA,WAAO,EAAEF,CAAF,IAAO,CAAd,EAAiB;AACb,YAAMG,CAAC,GAAGL,SAAS,CAACE,CAAD,CAAnB;;AACA,UAAIG,CAAC,CAAC,CAAD,CAAD,KAASY,CAAT,IAAcZ,CAAC,CAAC,CAAD,CAAD,KAASK,KAA3B,EAAkC;AAC9B;AACH;AACJ;;AACD,WAAOR,CAAP;AACH;;AA1C6B,CAAN,CAArB;;;;;;;;;;AClBP;;AACO,MAAMgB,QAAQ,GAAIlC,IAAD,IAAU,kBAAM;AACpC,IAAEnF,MAAM,CAACsH,QAAT,IAAqB;AACjB,WAAO,KAAKnC,IAAL,CAAP;AACH;;AAHmC,CAAN,CAA3B;;;;;;;;;;;ACDP;;AACO,MAAMoC,WAAW,GAAG,kBAAM;AAC7BC,EAAAA,QAAQ,CAAC3E,EAAD,EAAKwC,EAAL,EAAS;AACb,SAAKoC,QAAL,GAAgB,KAAKA,QAAL,IAAiB,EAAjC;;AACA,QAAI,KAAKA,QAAL,CAAc5E,EAAd,CAAJ,EAAuB;AACnB,aAAO,KAAP;AACH;;AACD,SAAK4E,QAAL,CAAc5E,EAAd,IAAoBwC,EAApB;AACA,WAAO,IAAP;AACH,GAR4B;;AAS7BqC,EAAAA,WAAW,CAAC7E,EAAD,EAAK;AACZ,QAAI,CAAC,KAAK4E,QAAV,EACI;;AACJ,QAAI,KAAKA,QAAL,CAAc5E,EAAd,CAAJ,EAAuB;AACnB,aAAO,KAAK4E,QAAL,CAAc5E,EAAd,CAAP;AACA,aAAO,IAAP;AACH;;AACD,WAAO,KAAP;AACH,GAjB4B;;AAkB7B8E,EAAAA,aAAa,CAACC,QAAD,EAAWC,QAAX,EAAqB;AAC9B,QAAI,CAAC,KAAKJ,QAAV,EACI;AACJ,UAAMK,CAAC,GAAG,KAAKL,QAAf;;AACA,SAAK,IAAI5E,EAAT,IAAeiF,CAAf,EAAkB;AACdA,MAAAA,CAAC,CAACjF,EAAD,CAAD,CAAMA,EAAN,EAAU+E,QAAV,EAAoBC,QAApB;AACH;AACJ;;AAzB4B,CAAN,CAApB;;;;;;;;;ACDP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;ACfA,MAAME,IAAI,GAAG7F,MAAM,CAAC8F,cAAP,CAAsB,EAAtB,CAAb;AACA,MAAMC,EAAE,GAAG,UAAX;AACA,MAAMC,GAAG,GAAG,QAAZ;;AACO,MAAMC,KAAK,GAAG,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAC3B,MAAIC,KAAJ;;AACA,MAAIF,CAAC,KAAKC,CAAV,EAAa;AACT,WAAO,IAAP;AACH;;AACD,MAAID,CAAC,IAAI,IAAT,EAAe;AACX,QAAI,OAAOA,CAAC,CAACD,KAAT,KAAmBF,EAAvB,EAA2B;AACvB,aAAOG,CAAC,CAACD,KAAF,CAAQE,CAAR,CAAP;AACH;AACJ,GAJD,MAKK;AACD,WAAOD,CAAC,IAAIC,CAAZ;AACH;;AACD,MAAIA,CAAC,IAAI,IAAT,EAAe;AACX,QAAI,OAAOA,CAAC,CAACF,KAAT,KAAmBF,EAAvB,EAA2B;AACvB,aAAOI,CAAC,CAACF,KAAF,CAAQC,CAAR,CAAP;AACH;AACJ,GAJD,MAKK;AACD,WAAOA,CAAC,IAAIC,CAAZ;AACH;;AACD,MAAI,OAAOD,CAAP,KAAaF,GAAb,IAAoB,OAAOG,CAAP,KAAaH,GAArC,EAA0C;AACtC,WAAO,KAAP;AACH;;AACD,MAAI,CAAEI,KAAK,GAAGpG,MAAM,CAAC8F,cAAP,CAAsBI,CAAtB,CAAT,EAAoCE,KAAK,IAAI,IAAT,IAAiBA,KAAK,KAAKP,IAAhE,MACEO,KAAK,GAAGpG,MAAM,CAAC8F,cAAP,CAAsBK,CAAtB,CAAT,EAAoCC,KAAK,IAAI,IAAT,IAAiBA,KAAK,KAAKP,IADhE,CAAJ,EAC2E;AACvE,WAAOQ,WAAW,CAACH,CAAD,EAAIC,CAAJ,CAAlB;AACH;;AACD,MAAI,OAAOD,CAAP,KAAaH,EAAb,IACAG,CAAC,CAAC7B,MAAF,KAAa7F,SADb,IAEA,OAAO2H,CAAP,KAAaJ,EAFb,IAGAI,CAAC,CAAC9B,MAAF,KAAa7F,SAHjB,EAG4B;AACxB,WAAO8H,cAAc,CAACJ,CAAD,EAAIC,CAAJ,CAArB;AACH;;AACD,MAAID,CAAC,YAAYK,GAAb,IAAoBJ,CAAC,YAAYI,GAArC,EAA0C;AACtC,WAAOC,QAAQ,CAACN,CAAD,EAAIC,CAAJ,CAAf;AACH;;AACD,MAAID,CAAC,YAAYO,GAAb,IAAoBN,CAAC,YAAYM,GAArC,EAA0C;AACtC,WAAOC,QAAQ,CAACR,CAAD,EAAIC,CAAJ,CAAf;AACH;;AACD,MAAID,CAAC,YAAYS,IAAb,IAAqBR,CAAC,YAAYQ,IAAtC,EAA4C;AACxC,WAAOT,CAAC,CAACU,OAAF,OAAgBT,CAAC,CAACS,OAAF,EAAvB;AACH;;AACD,MAAIV,CAAC,YAAYW,MAAb,IAAuBV,CAAC,YAAYU,MAAxC,EAAgD;AAC5C,WAAOX,CAAC,CAAC3D,QAAF,OAAiB4D,CAAC,CAAC5D,QAAF,EAAxB;AACH,GA7C0B,CA8C3B;;;AACA,SAAO2D,CAAC,KAAKA,CAAN,IAAWC,CAAC,KAAKA,CAAxB;AACH,CAhDM;;;;AAiDA,MAAMG,cAAc,GAAG,CAACJ,CAAD,EAAIC,CAAJ,EAAOW,MAAM,GAAGb,KAAhB,KAA0B;AACpD,MAAI3B,CAAC,GAAG4B,CAAC,CAAC7B,MAAV;;AACA,MAAIC,CAAC,KAAK6B,CAAC,CAAC9B,MAAZ,EAAoB;AAChB,WAAO,EAAEC,CAAF,IAAO,CAAP,IAAYwC,MAAM,CAACZ,CAAC,CAAC5B,CAAD,CAAF,EAAO6B,CAAC,CAAC7B,CAAD,CAAR,CAAzB,CACI;AACP;;AACD,SAAOA,CAAC,GAAG,CAAX;AACH,CAPM;;;;AAQA,MAAMkC,QAAQ,GAAG,CAACN,CAAD,EAAIC,CAAJ,EAAOW,MAAM,GAAGb,KAAhB,KAA0BC,CAAC,CAACa,IAAF,KAAWZ,CAAC,CAACY,IAAb,IAAqBD,MAAM,CAAC,CAAC,GAAGZ,CAAC,CAACc,IAAF,EAAJ,EAAcC,IAAd,EAAD,EAAuB,CAAC,GAAGd,CAAC,CAACa,IAAF,EAAJ,EAAcC,IAAd,EAAvB,CAAtE;;;;AACA,MAAMP,QAAQ,GAAG,CAACR,CAAD,EAAIC,CAAJ,EAAOW,MAAM,GAAGb,KAAhB,KAA0BC,CAAC,CAACa,IAAF,KAAWZ,CAAC,CAACY,IAAb,IAAqBD,MAAM,CAAC,CAAC,GAAGZ,CAAJ,EAAOe,IAAP,EAAD,EAAgB,CAAC,GAAGd,CAAJ,EAAOc,IAAP,EAAhB,CAAtE;;;;AACA,MAAMZ,WAAW,GAAG,CAACH,CAAD,EAAIC,CAAJ,EAAOW,MAAM,GAAGb,KAAhB,KAA0B;AACjD,MAAIjG,MAAM,CAACgH,IAAP,CAAYd,CAAZ,EAAe7B,MAAf,KAA0BrE,MAAM,CAACgH,IAAP,CAAYb,CAAZ,EAAe9B,MAA7C,EAAqD;AACjD,WAAO,KAAP;AACH;;AACD,OAAK,IAAI6C,CAAT,IAAchB,CAAd,EAAiB;AACb,QAAI,CAACC,CAAC,CAACgB,cAAF,CAAiBD,CAAjB,CAAD,IAAwB,CAACJ,MAAM,CAACZ,CAAC,CAACgB,CAAD,CAAF,EAAOf,CAAC,CAACe,CAAD,CAAR,CAAnC,EAAiD;AAC7C,aAAO,KAAP;AACH;AACJ;;AACD,SAAO,IAAP;AACH,CAVM;;;;;;;;;;;;AC9DA,SAASE,MAAT,CAAgBC,IAAhB,EAAsBL,IAAtB,EAA4B;AAC/B,OAAK,IAAIE,CAAT,IAAcF,IAAd,EAAoB;AAChBK,IAAAA,IAAI,CAACC,MAAL,CAAYJ,CAAZ;AACH;;AACD,SAAOG,IAAP;AACH;;AACM,MAAME,SAAS,GAAG,CAACC,GAAD,EAAMR,IAAN,KAAe;AACpC,OAAK,IAAIE,CAAT,IAAcF,IAAd,EAAoB;AAChB,WAAOQ,GAAG,CAACN,CAAD,CAAV;AACH;;AACD,SAAOM,GAAP;AACH,CALM;;;;;;;;;;;ACNP;;AACO,MAAMd,QAAQ,GAAG,CAACR,CAAD,EAAIC,CAAJ,KAAU;AAC9B,MAAID,CAAC,KAAKC,CAAV,EAAa;AACT,WAAO,IAAP;AACH;;AACD,MAAI,EAAEA,CAAC,YAAYM,GAAf,KAAuBP,CAAC,CAACa,IAAF,KAAWZ,CAAC,CAACY,IAAxC,EAA8C;AAC1C,WAAO,KAAP;AACH;;AACD,OAAK,IAAIU,CAAT,IAAcvB,CAAC,CAACwB,OAAF,EAAd,EAA2B;AACvB,QAAI,CAAC,kBAAMvB,CAAC,CAACwB,GAAF,CAAMF,CAAC,CAAC,CAAD,CAAP,CAAN,EAAmBA,CAAC,CAAC,CAAD,CAApB,CAAL,EAA+B;AAC3B,aAAO,KAAP;AACH;AACJ;;AACD,SAAO,IAAP;AACH,CAbM;;;;AAcA,MAAMjB,QAAQ,GAAG,CAACN,CAAD,EAAIC,CAAJ,KAAU;AAC9B,MAAID,CAAC,KAAKC,CAAV,EAAa;AACT,WAAO,IAAP;AACH;;AACD,MAAI,EAAEA,CAAC,YAAYI,GAAf,KAAuBL,CAAC,CAACa,IAAF,KAAWZ,CAAC,CAACY,IAAxC,EAA8C;AAC1C,WAAO,KAAP;AACH;;AACD,OAAK,IAAIG,CAAT,IAAchB,CAAC,CAACc,IAAF,EAAd,EAAwB;AACpB,QAAI,CAACb,CAAC,CAACyB,GAAF,CAAMV,CAAN,CAAL,EAAe;AACX,aAAO,KAAP;AACH;AACJ;;AACD,SAAO,IAAP;AACH,CAbM;;;;;;;;;;;ACfA,MAAMW,gBAAgB,GAAIrI,CAAD,IAAOA,CAAC,IAAI,IAArC;;;;;;;;;;;ACAA,MAAMsI,MAAM,GAAIC,CAAD,IAAOA,CAAC,KAAKvJ,SAA5B;;;;;;;;;;;ACAA,MAAMwJ,SAAS,GAAG,MAAM,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAAC,QAAD,CAAN,KAAqBzJ,SAA9E;;;;;;;;;;;ACAA,MAAM0J,YAAY,GAAG,CAACC,GAAD,EAAM3I,CAAN,KAAYA,CAAC,IAAI,IAAL,IAAaA,CAAC,CAAC6E,MAAF,IAAY8D,GAA1D;;;;;;;;;;;ACAA,MAAMC,YAAY,GAAG,CAACD,GAAD,EAAM3I,CAAN,KAAYA,CAAC,IAAI,IAAL,IAAaA,CAAC,CAAC6E,MAAF,IAAY8D,GAA1D;;;;;;;;;;;ACAA,MAAME,UAAU,GAAI7I,CAAD,IAAO,OAAOA,CAAP,KAAa,UAAvC;;;;;;;;;;;ACAP;;AACO,MAAM8I,cAAc,GAAG,MAAM,OAAOC,WAAP,KAAuB,WAAvB,IAAsC,4BAAWA,WAAW,CAACC,GAAvB,CAAnE;;;;;;;;;;;;ACDA,MAAMC,OAAO,GAAG,MAAO,OAAOR,MAAP,KAAkB,WAAlB,IAC1B,OAAOA,MAAM,CAAC,aAAD,CAAb,KAAiC,WADR,IAExB,OAAOS,MAAP,KAAkB,WAAlB,IACG,OAAOA,MAAM,CAAC,aAAD,CAAb,KAAiC,WAHlC;;;;;;;;;;;ACAA,MAAMC,QAAQ,GAAG,MAAM;AAC1B,MAAI;AACAC,IAAAA,QAAQ,CAACC,aAAT,CAAuB,QAAvB,EAAiCC,UAAjC,CAA4C,OAA5C;AACA,WAAO,IAAP;AACH,GAHD,CAIA,OAAO5E,CAAP,EAAU;AACN,WAAO,KAAP;AACH;AACJ,CARM;;;;;;;;;;;ACAA,MAAM6E,YAAY,GAAG,MAAM,OAAOC,SAAP,KAAqB,WAAhD;;;;;;;;;;;ACAA,MAAMC,kBAAkB,GAAG,CAACzJ,CAAD,EAAI2D,EAAJ,KAAW3D,CAAC,IAAI,IAAL,IAAa,OAAOA,CAAC,CAAC2D,EAAD,CAAR,KAAiB,UAApE;;;;;;;;;;ACAA,MAAM+F,OAAO,GAAGC,KAAK,CAACD,OAAtB;;;;;;;;;;ACAA,MAAME,WAAW,GAAI5J,CAAD,IAAOA,CAAC,IAAI,IAAL,IAAa,OAAOA,CAAP,KAAa,UAA1B,IAAwCA,CAAC,CAAC6E,MAAF,KAAa7F,SAAhF;;;;;;;;;;;ACAA,MAAM6K,MAAM,GAAI7J,CAAD,IAAOA,CAAC,YAAY8J,IAAnC;;;;;;;;;;;ACAA,MAAMC,SAAS,GAAI/J,CAAD,IAAO,OAAOA,CAAP,KAAa,SAAtC;;;;;;;;;;;ACAA,MAAMgK,QAAQ,GAAG,MAAM,OAAOvB,MAAP,KAAkB,WAAlB,IAAiC,CAAC,CAACA,MAAM,CAAC,QAAD,CAAhE;;;;;;;;;;;ACAA,MAAMwB,MAAM,GAAIjK,CAAD,IAAOA,CAAC,YAAYmH,IAAnC;;;;;;;;;;;ACAA,MAAM+C,MAAM,GAAIlK,CAAD,IAAOA,CAAC,GAAG,CAAJ,KAAU,CAAhC;;;;;;;;;;;ACAA,MAAMmK,OAAO,GAAInK,CAAD,IAAOA,CAAC,KAAK,KAA7B;;;;;;;;;;;ACAA,MAAMoK,MAAM,GAAIpK,CAAD,IAAOA,CAAC,YAAYqK,IAAnC;;;;;;;;;;;ACAA,MAAMC,SAAS,GAAG,MAAM,OAAO7B,MAAP,KAAkB,WAAlB,IAAiC,CAAC,CAACA,MAAM,CAAC,gBAAD,CAAjE;;;;;;;;;;;ACAA,MAAM8B,QAAQ,GAAIvK,CAAD,IAAO,OAAOA,CAAP,KAAa,QAArC;;;;;;;;;;;ACAP;;AACA,MAAMwK,EAAE,GAAG,mDAAX;;AACO,MAAMC,UAAU,GAAIzK,CAAD,IAAO,wBAASA,CAAT,KAAewK,EAAE,CAACpK,IAAH,CAAQJ,CAAR,CAAzC;;;;;;;;;;;ACFA,MAAM0K,IAAI,GAAG,MAAM,OAAOtB,QAAP,KAAoB,WAApB,KACrB,OAAOA,QAAQ,CAAC,cAAD,CAAf,KAAoC,WAApC,IACGuB,SAAS,CAACC,SAAV,CAAoBC,OAApB,CAA4B,MAA5B,IAAsC,CAFpB,CAAnB;;;;;;;;;;;ACAA,MAAMC,SAAS,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWhL,CAAX,KAAiBA,CAAC,IAAI+K,GAAL,IAAY/K,CAAC,IAAIgL,GAApD;;;;;;;;;;;ACAA,MAAMC,OAAO,GAAIjL,CAAD,IAAO,OAAOA,CAAP,KAAa,QAAb,IAAyB,CAACA,CAAC,GAAG,CAAL,MAAYA,CAA5D;;;;;;;;;;;ACAA,MAAMkL,UAAU,GAAIlL,CAAD,IAAOA,CAAC,IAAI,IAAL,IAAa,OAAOA,CAAC,CAAC1B,MAAM,CAACsH,QAAR,CAAR,KAA8B,UAArE;;;;;;;;;;;ACAA,MAAMuF,KAAK,GAAInL,CAAD,IAAOA,CAAC,YAAYiH,GAAlC;;;;;;;;;;;ACAA,MAAMmE,QAAQ,GAAG,MAAM,OAAOT,SAAP,KAAqB,WAArB,IAC1B,mDAAmDvK,IAAnD,CAAwDuK,SAAS,CAACC,SAAlE,CADG;;;;;;;;;;;ACAA,MAAMS,KAAK,GAAIrL,CAAD,IAAOA,CAAC,KAAKA,CAA3B;;;;;;;;;;;ACAA,MAAMsL,UAAU,GAAItL,CAAD,IAAO,OAAOA,CAAP,KAAa,QAAb,IAAyBA,CAAC,GAAG,CAAvD;;;;;;;;;;;ACAP;;;;AAIO,MAAMuL,KAAK,GAAIvL,CAAD,IAAOA,CAAC,IAAI,IAA1B;;;;;;;;;;;;ACJA,MAAMwL,MAAM,GAAG,MAAM;AACxB,MAAI,OAAOrL,OAAP,KAAmB,QAAvB,EAAiC;AAC7B,QAAI,OAAOA,OAAO,CAACsL,QAAf,KAA4B,QAAhC,EAA0C;AACtC,UAAI,OAAOtL,OAAO,CAACsL,QAAR,CAAiBC,IAAxB,KAAiC,WAArC,EAAkD;AAC9C,eAAO,IAAP;AACH;AACJ;AACJ;;AACD,SAAO,KAAP;AACH,CATM;;;;;;;;;;;ACAA,MAAMC,sBAAsB,GAAI3L,CAAD,IAAOA,CAAC,IAAI,IAAL,IACzC,OAAOA,CAAP,KAAa,QAD4B,IAEzC,OAAOA,CAAC,CAAC1B,MAAM,CAACsH,QAAR,CAAR,KAA8B,UAF3B;;;;;;;;;;;ACAA,MAAMgG,MAAM,GAAI5L,CAAD,IAAOA,CAAC,KAAK,IAA5B;;;;;;;;;;;ACAA,MAAM6L,QAAQ,GAAI7L,CAAD,IAAO,OAAOA,CAAP,KAAa,QAArC;;;;;;;;;;;ACAA,MAAM8L,QAAQ,GAAI9L,CAAD,IAAOA,CAAC,KAAK,IAAN,IAAc,OAAOA,CAAP,KAAa,QAAnD;;;;;;;;;;;ACAA,MAAM+L,KAAK,GAAI/L,CAAD,IAAOA,CAAC,GAAG,CAAJ,KAAU,CAA/B;;;;;;;;;;ACAP,MAAMqG,IAAI,GAAG7F,MAAM,CAAC8F,cAApB;AACA;;;;;;;AAMO,MAAM0F,aAAa,GAAIhM,CAAD,IAAO;AAChC,MAAIiI,CAAJ;AACA,SAAQjI,CAAC,IAAI,IAAL,IACJ,OAAOA,CAAP,KAAa,QADT,KAEH,CAACiI,CAAC,GAAG5B,IAAI,CAACrG,CAAD,CAAT,MAAkB,IAAlB,IAA0BqG,IAAI,CAAC4B,CAAD,CAAJ,KAAY,IAFnC,CAAR;AAGH,CALM;;;;;;;;;;;ACPA,MAAMgE,WAAW,GAAIjM,CAAD,IAAO,OAAOA,CAAP,KAAa,QAAb,IAAyBA,CAAC,GAAG,CAAxD;;;;;;;;;;;ACAA,MAAMkM,WAAW,GAAIlM,CAAD,IAAO;AAC9B,QAAMuI,CAAC,GAAG,OAAOvI,CAAjB;AACA,SAAOuI,CAAC,KAAK,QAAN,IAAkBA,CAAC,KAAK,QAA/B;AACH,CAHM;;;;;;;;;;;ACAA,MAAM4D,SAAS,GAAInM,CAAD,IAAOA,CAAC,YAAYoM,OAAtC;;;;;;;;;;;ACAP;;AACO,MAAMC,aAAa,GAAIrM,CAAD,IAAOA,CAAC,YAAYoM,OAAb,IAC/B,4CAAmBpM,CAAnB,EAAsB,MAAtB,KAAiC,4CAAmBA,CAAnB,EAAsB,OAAtB,CAD/B;;;;;;;;;;;ACDA,MAAMsM,QAAQ,GAAItM,CAAD,IAAOA,CAAC,YAAYqH,MAArC;;;;;;;;;;;ACAP;;AACO,MAAMkF,QAAQ,GAAG,MAAM,OAAO5B,SAAP,KAAqB,WAArB,IAC1B,SAASvK,IAAT,CAAcuK,SAAS,CAACC,SAAxB,CAD0B,IAE1B,CAAC,yBAFE;;;;;;;;;;;ACDA,MAAM4B,KAAK,GAAIxM,CAAD,IAAOA,CAAC,YAAY+G,GAAlC;;;;;;;;;;;ACAA,MAAM0F,QAAQ,GAAIzM,CAAD,IAAO,OAAOA,CAAP,KAAa,QAArC;;;;;;;;;;;ACAA,MAAM0M,cAAc,GAAI1M,CAAD,IAAOA,CAAC,YAAY2M,WAAb,IAChC,OAAOC,iBAAP,KAA6B,WAA7B,IACG5M,CAAC,YAAY4M,iBAFgB,IAGhC,OAAOC,WAAP,KAAuB,WAAvB,IAAsC7M,CAAC,YAAY6M,WAHjD;;;;;;;;;;;ACAA,MAAMC,MAAM,GAAI9M,CAAD,IAAOA,CAAC,KAAK,IAA5B;;;;;;;;;;;ACAA,MAAM+M,YAAY,GAAI/M,CAAD,IAAOA,CAAC,KAC/BA,CAAC,CAACkB,WAAF,KAAkBxB,YAAlB,IACGM,CAAC,CAACkB,WAAF,KAAkB1B,WADrB,IAEGQ,CAAC,CAACkB,WAAF,KAAkB/B,UAFrB,IAGGa,CAAC,CAACkB,WAAF,KAAkB9B,iBAHrB,IAIGY,CAAC,CAACkB,WAAF,KAAkB7B,SAJrB,IAKGW,CAAC,CAACkB,WAAF,KAAkB5B,WALrB,IAMGU,CAAC,CAACkB,WAAF,KAAkB3B,UANrB,IAOGS,CAAC,CAACkB,WAAF,KAAkBzB,UAPrB,IAQGO,CAAC,CAACkB,WAAF,KAAkBvB,YATU,CAA7B;;;;;;;;;;;ACAA,MAAMqN,QAAQ,GAAIhN,CAAD,IAAO,OAAOA,CAAP,KAAa,QAAb,IAAyBA,CAAC,KAAK,CAAN,KAAYA,CAA7D;;;;;;;;;;;ACAA,MAAMiN,WAAW,GAAIjN,CAAD,IAAOA,CAAC,KAAKhB,SAAjC;;;;;;;;;;ACAP,MAAMwL,EAAE,GAAG,iEAAX;;AACO,MAAM0C,MAAM,GAAIlN,CAAD,IAAOwK,EAAE,CAACpK,IAAH,CAAQJ,CAAR,CAAtB;;;;;;;;;;ACDP,MAAMwK,EAAE,GAAG,wEAAX;;AACO,MAAM2C,QAAQ,GAAInN,CAAD,IAAOwK,EAAE,CAACpK,IAAH,CAAQJ,CAAR,CAAxB;;;;;;;;;;;ACDA,MAAMoN,MAAM,GAAIpN,CAAD,IAAOA,CAAC,KAAK,CAA5B;;;;;;;;;;ACAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AA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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;A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AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,cAEA;AACA;AACA;;AACA,SAAS1mC,cAAT,CAAw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","file":"hurl.b56ae05f.js","sourceRoot":"..","sourcesContent":["export const DEFAULT_EPS = 1e-6;\n/**\n * Internal use only. **Do NOT use in user land code!**\n */\nexport const SEMAPHORE = Symbol();\n","export const EVENT_ALL = \"*\";\nexport const EVENT_ENABLE = \"enable\";\nexport const EVENT_DISABLE = \"disable\";\n","/**\n * No-effect placeholder function.\n */\nexport const NO_OP = () => { };\n","export var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"FINE\"] = 0] = \"FINE\";\n    LogLevel[LogLevel[\"DEBUG\"] = 1] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 3] = \"WARN\";\n    LogLevel[LogLevel[\"SEVERE\"] = 4] = \"SEVERE\";\n    LogLevel[LogLevel[\"NONE\"] = 5] = \"NONE\";\n})(LogLevel || (LogLevel = {}));\n","/**\n * Type enums for Typedarray-backed buffers.\n *\n * @see GLType\n * @see GL2TYPE\n * @see TYPE2GL\n */\nexport var Type;\n(function (Type) {\n    Type[Type[\"U8\"] = 0] = \"U8\";\n    Type[Type[\"U8C\"] = 1] = \"U8C\";\n    Type[Type[\"I8\"] = 2] = \"I8\";\n    Type[Type[\"U16\"] = 3] = \"U16\";\n    Type[Type[\"I16\"] = 4] = \"I16\";\n    Type[Type[\"U32\"] = 5] = \"U32\";\n    Type[Type[\"I32\"] = 6] = \"I32\";\n    Type[Type[\"F32\"] = 7] = \"F32\";\n    Type[Type[\"F64\"] = 8] = \"F64\";\n})(Type || (Type = {}));\n/**\n * WebGL numeric type constants. Use `GL2TYPE` to convert, if needed.\n *\n * @see Type\n * @see GL2TYPE\n * @see TYPE2GL\n */\nexport var GLType;\n(function (GLType) {\n    GLType[GLType[\"I8\"] = 5120] = \"I8\";\n    GLType[GLType[\"U8\"] = 5121] = \"U8\";\n    GLType[GLType[\"I16\"] = 5122] = \"I16\";\n    GLType[GLType[\"U16\"] = 5123] = \"U16\";\n    GLType[GLType[\"I32\"] = 5124] = \"I32\";\n    GLType[GLType[\"U32\"] = 5125] = \"U32\";\n    GLType[GLType[\"F32\"] = 5126] = \"F32\";\n})(GLType || (GLType = {}));\n/**\n * Conversion from `GLType` to `Type` enums.\n */\nexport const GL2TYPE = {\n    [5120 /* I8 */]: 2 /* I8 */,\n    [5121 /* U8 */]: 0 /* U8 */,\n    [5122 /* I16 */]: 4 /* I16 */,\n    [5123 /* U16 */]: 3 /* U16 */,\n    [5124 /* I32 */]: 6 /* I32 */,\n    [5125 /* U32 */]: 5 /* U32 */,\n    [5126 /* F32 */]: 7 /* F32 */\n};\n/**\n * Potentially lossy conversion from `Type` to `GLType` enums.\n *\n * Not all enums are mappable:\n *\n * - `F64` maps to `undefined`, since unsupported by WebGL\n * - `U8C` maps to U8\n */\nexport const TYPE2GL = {\n    [2 /* I8 */]: 5120 /* I8 */,\n    [0 /* U8 */]: 5121 /* U8 */,\n    [1 /* U8C */]: 5121 /* U8 */,\n    [4 /* I16 */]: 5122 /* I16 */,\n    [3 /* U16 */]: 5123 /* U16 */,\n    [6 /* I32 */]: 5124 /* I32 */,\n    [6 /* I32 */]: 5124 /* I32 */,\n    [5 /* U32 */]: 5125 /* U32 */,\n    [7 /* F32 */]: 5126 /* F32 */,\n    [8 /* F64 */]: undefined\n};\n/**\n * Size information (in bytes) for `Type` enums. For `GLType`, use this\n * form, e.g. `SIZEOF[GL2TYPE[GLType.F32]]`\n */\nexport const SIZEOF = {\n    [0 /* U8 */]: 1,\n    [1 /* U8C */]: 1,\n    [2 /* I8 */]: 1,\n    [3 /* U16 */]: 2,\n    [4 /* I16 */]: 2,\n    [5 /* U32 */]: 4,\n    [6 /* I32 */]: 4,\n    [7 /* F32 */]: 4,\n    [8 /* F64 */]: 8\n};\nexport const TYPEDARRAY_CTORS = {\n    [0 /* U8 */]: Uint8Array,\n    [1 /* U8C */]: Uint8ClampedArray,\n    [2 /* I8 */]: Int8Array,\n    [3 /* U16 */]: Uint16Array,\n    [4 /* I16 */]: Int16Array,\n    [5 /* U32 */]: Uint32Array,\n    [6 /* I32 */]: Int32Array,\n    [7 /* F32 */]: Float32Array,\n    [8 /* F64 */]: Float64Array,\n    [5121 /* U8 */]: Uint8Array,\n    [5120 /* I8 */]: Int8Array,\n    [5123 /* U16 */]: Uint16Array,\n    [5122 /* I16 */]: Int16Array,\n    [5125 /* U32 */]: Uint32Array,\n    [5124 /* I32 */]: Int32Array,\n    [5126 /* F32 */]: Float32Array\n};\nexport function typedArray(type, ...xs) {\n    return new TYPEDARRAY_CTORS[type](...xs);\n}\n/**\n * Returns the smallest possible *unsigned* int type enum for given `x`.\n * E.g. if `x <= 256`, the function returns `Type.U8`.\n *\n * @param x\n */\nexport const uintType = (x) => x <= 0x100 ? 0 /* U8 */ : x <= 0x10000 ? 3 /* U16 */ : 5 /* U32 */;\n/**\n * Returns the smallest possible *signed* int type enum for given `x`.\n * E.g. if `x >= -128 && x < 128`, the function returns `Type.I8`.\n *\n * @param x\n */\nexport const intType = (x) => x >= -0x80 && x < 0x80\n    ? 2 /* I8 */\n    : x >= -0x8000 && x < 0x8000\n        ? 4 /* I16 */\n        : 6 /* I32 */;\n","import { NO_OP } from \"./api/fn\";\n/**\n * Takes a `test` result or predicate function without args and throws\n * error with given `msg` if test failed (i.e. is falsy). The function\n * is only enabled if `NODE_ENV != \"production\"` or if\n * `UMBRELLA_ASSERTS = 1`.\n */\nexport const assert = typeof process === \"undefined\" ||\n    process.env.NODE_ENV !== \"production\" ||\n    process.env.UMBRELLA_ASSERTS === \"1\"\n    ? (test, msg = \"assertion failed\") => {\n        if ((typeof test === \"function\" && !test()) || !test) {\n            throw new Error(typeof msg === \"function\" ? msg() : msg);\n        }\n    }\n    : NO_OP;\n","import { LogLevel } from \"./api/logger\";\nexport const NULL_LOGGER = Object.freeze({\n    level: LogLevel.NONE,\n    fine() { },\n    debug() { },\n    info() { },\n    warn() { },\n    severe() { }\n});\nexport class ConsoleLogger {\n    constructor(id, level = LogLevel.FINE) {\n        this.id = id;\n        this.level = level;\n    }\n    fine(...args) {\n        this.level <= LogLevel.FINE && this.log(\"FINE\", args);\n    }\n    debug(...args) {\n        this.level <= LogLevel.DEBUG && this.log(\"DEBUG\", args);\n    }\n    info(...args) {\n        this.level <= LogLevel.INFO && this.log(\"INFO\", args);\n    }\n    warn(...args) {\n        this.level <= LogLevel.WARN && this.log(\"WARN\", args);\n    }\n    severe(...args) {\n        this.level <= LogLevel.SEVERE && this.log(\"SEVERE\", args);\n    }\n    log(level, args) {\n        console.log(`[${level}] ${this.id}:`, ...args);\n    }\n}\n","/**\n * Class behavior mixin based on:\n * http://raganwald.com/2015/06/26/decorators-in-es7.html\n *\n * Additionally only injects/overwrites properties in target, which are\n * NOT marked with `@nomixin` (i.e. haven't set their `configurable`\n * property descriptor flag to `false`)\n *\n * @param behaviour to mixin\n * @param sharedBehaviour\n * @returns decorator function\n */\nexport const mixin = (behaviour, sharedBehaviour = {}) => {\n    const instanceKeys = Reflect.ownKeys(behaviour);\n    const sharedKeys = Reflect.ownKeys(sharedBehaviour);\n    const typeTag = Symbol(\"isa\");\n    function _mixin(clazz) {\n        for (let key of instanceKeys) {\n            const existing = Object.getOwnPropertyDescriptor(clazz.prototype, key);\n            if (!existing || existing.configurable) {\n                Object.defineProperty(clazz.prototype, key, {\n                    value: behaviour[key],\n                    writable: true\n                });\n            }\n            else {\n                console.log(`not patching: ${clazz.name}.${key.toString()}`);\n            }\n        }\n        Object.defineProperty(clazz.prototype, typeTag, { value: true });\n        return clazz;\n    }\n    for (let key of sharedKeys) {\n        Object.defineProperty(_mixin, key, {\n            value: sharedBehaviour[key],\n            enumerable: sharedBehaviour.propertyIsEnumerable(key)\n        });\n    }\n    Object.defineProperty(_mixin, Symbol.hasInstance, {\n        value: (x) => !!x[typeTag]\n    });\n    return _mixin;\n};\n","/**\n * Property decorator factory. Sets `configurable` flag of PropertyDescriptor\n * to given state.\n *\n * @param state\n */\nexport const configurable = (state) => function (_, __, descriptor) {\n    descriptor.configurable = state;\n};\n","import { assert } from \"../assert\";\n/**\n * Method property decorator factory. Augments original method with\n * deprecation message (via console), shown when method is invoked.\n * Accepts optional message arg. Throws error if assigned property\n * is not a function.\n *\n * @param msg deprecation message\n */\nexport const deprecated = (msg, log = console.log) => function (target, prop, descriptor) {\n    const signature = `${target.constructor.name}#${prop.toString()}`;\n    const fn = descriptor.value;\n    assert(typeof fn === \"function\", `${signature} is not a function`);\n    descriptor.value = function () {\n        log(`DEPRECATED ${signature}: ${msg || \"will be removed soon\"}`);\n        return fn.apply(this, arguments);\n    };\n    return descriptor;\n};\n","/**\n * Method property decorator. Sets `configurable` flag of\n * PropertyDescriptor to `false` (same as `@configurable(false)`).\n * Intended to be used in combination with mixin decorators to enable\n * partial implementations of mixed-in behaviors in target class and\n * avoid them being overidden by mixed-in behaviour.\n */\nexport const nomixin = (_, __, descriptor) => {\n    descriptor.configurable = false;\n};\n","/**\n * Class decorator. Seals both constructor and prototype.\n *\n * @param constructor\n */\nexport const sealed = (constructor) => {\n    Object.seal(constructor);\n    Object.seal(constructor.prototype);\n};\n","import { EVENT_DISABLE, EVENT_ENABLE } from \"../api/event\";\nimport { mixin } from \"../mixin\";\n/**\n * Mixin class decorator, injects IEnable default implementation, incl.\n * a `_enabled` property. If the target also implements the `INotify`\n * interface, `enable()` and `disable()` will automatically emit the\n * respective events.\n */\nexport const IEnableMixin = mixin({\n    _enabled: true,\n    isEnabled() {\n        return this._enabled;\n    },\n    enable() {\n        this._enabled = true;\n        if (this.notify) {\n            this.notify({ id: EVENT_ENABLE, target: this });\n        }\n    },\n    disable() {\n        this._enabled = false;\n        if (this.notify) {\n            this.notify({ id: EVENT_DISABLE, target: this });\n        }\n    },\n    toggle() {\n        this._enabled ? this.disable() : this.enable();\n        return this._enabled;\n    }\n});\n","import { EVENT_ALL } from \"../api/event\";\nimport { mixin } from \"../mixin\";\nexport const inotify_dispatch = (listeners, e) => {\n    if (!listeners)\n        return;\n    for (let i = 0, n = listeners.length, l; i < n; i++) {\n        l = listeners[i];\n        l[0].call(l[1], e);\n        if (e.canceled) {\n            return;\n        }\n    }\n};\n/**\n * Mixin class decorator, injects INotify default implementation, incl.\n * a lazily instantiated `_listeners` property object, storing\n * registered listeners.\n */\nexport const INotifyMixin = mixin({\n    addListener(id, fn, scope) {\n        let l = (this._listeners = this._listeners || {})[id];\n        !l && (l = this._listeners[id] = []);\n        if (this.__listener(l, fn, scope) === -1) {\n            l.push([fn, scope]);\n            return true;\n        }\n        return false;\n    },\n    removeListener(id, fn, scope) {\n        let listeners;\n        if (!(listeners = this._listeners))\n            return false;\n        const l = listeners[id];\n        if (l) {\n            const idx = this.__listener(l, fn, scope);\n            if (idx !== -1) {\n                l.splice(idx, 1);\n                !l.length && delete listeners[id];\n                return true;\n            }\n        }\n        return false;\n    },\n    notify(e) {\n        let listeners;\n        if (!(listeners = this._listeners))\n            return false;\n        e.target === undefined && (e.target = this);\n        inotify_dispatch(listeners[e.id], e);\n        inotify_dispatch(listeners[EVENT_ALL], e);\n    },\n    __listener(listeners, f, scope) {\n        let i = listeners.length;\n        while (--i >= 0) {\n            const l = listeners[i];\n            if (l[0] === f && l[1] === scope) {\n                break;\n            }\n        }\n        return i;\n    }\n});\n","import { mixin } from \"../mixin\";\nexport const iterable = (prop) => mixin({\n    *[Symbol.iterator]() {\n        yield* this[prop];\n    }\n});\n","import { mixin } from \"../mixin\";\nexport const IWatchMixin = mixin({\n    addWatch(id, fn) {\n        this._watches = this._watches || {};\n        if (this._watches[id]) {\n            return false;\n        }\n        this._watches[id] = fn;\n        return true;\n    },\n    removeWatch(id) {\n        if (!this._watches)\n            return;\n        if (this._watches[id]) {\n            delete this._watches[id];\n            return true;\n        }\n        return false;\n    },\n    notifyWatches(oldState, newState) {\n        if (!this._watches)\n            return;\n        const w = this._watches;\n        for (let id in w) {\n            w[id](id, oldState, newState);\n        }\n    }\n});\n","export * from \"./api\";\nexport * from \"./api/event\";\nexport * from \"./api/fn\";\nexport * from \"./api/logger\";\nexport * from \"./api/typedarray\";\nexport * from \"./assert\";\nexport * from \"./logger\";\nexport * from \"./mixin\";\nexport * from \"./decorators/configurable\";\nexport * from \"./decorators/deprecated\";\nexport * from \"./decorators/nomixin\";\nexport * from \"./decorators/sealed\";\nexport * from \"./mixins/ienable\";\nexport * from \"./mixins/inotify\";\nexport * from \"./mixins/iterable\";\nexport * from \"./mixins/iwatch\";\n","const OBJP = Object.getPrototypeOf({});\nconst FN = \"function\";\nconst STR = \"string\";\nexport const equiv = (a, b) => {\n    let proto;\n    if (a === b) {\n        return true;\n    }\n    if (a != null) {\n        if (typeof a.equiv === FN) {\n            return a.equiv(b);\n        }\n    }\n    else {\n        return a == b;\n    }\n    if (b != null) {\n        if (typeof b.equiv === FN) {\n            return b.equiv(a);\n        }\n    }\n    else {\n        return a == b;\n    }\n    if (typeof a === STR || typeof b === STR) {\n        return false;\n    }\n    if (((proto = Object.getPrototypeOf(a)), proto == null || proto === OBJP) &&\n        ((proto = Object.getPrototypeOf(b)), proto == null || proto === OBJP)) {\n        return equivObject(a, b);\n    }\n    if (typeof a !== FN &&\n        a.length !== undefined &&\n        typeof b !== FN &&\n        b.length !== undefined) {\n        return equivArrayLike(a, b);\n    }\n    if (a instanceof Set && b instanceof Set) {\n        return equivSet(a, b);\n    }\n    if (a instanceof Map && b instanceof Map) {\n        return equivMap(a, b);\n    }\n    if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime();\n    }\n    if (a instanceof RegExp && b instanceof RegExp) {\n        return a.toString() === b.toString();\n    }\n    // NaN\n    return a !== a && b !== b;\n};\nexport const equivArrayLike = (a, b, _equiv = equiv) => {\n    let l = a.length;\n    if (l === b.length) {\n        while (--l >= 0 && _equiv(a[l], b[l]))\n            ;\n    }\n    return l < 0;\n};\nexport const equivSet = (a, b, _equiv = equiv) => a.size === b.size && _equiv([...a.keys()].sort(), [...b.keys()].sort());\nexport const equivMap = (a, b, _equiv = equiv) => a.size === b.size && _equiv([...a].sort(), [...b].sort());\nexport const equivObject = (a, b, _equiv = equiv) => {\n    if (Object.keys(a).length !== Object.keys(b).length) {\n        return false;\n    }\n    for (let k in a) {\n        if (!b.hasOwnProperty(k) || !_equiv(a[k], b[k])) {\n            return false;\n        }\n    }\n    return true;\n};\n","export function dissoc(coll, keys) {\n    for (let k of keys) {\n        coll.delete(k);\n    }\n    return coll;\n}\nexport const dissocObj = (obj, keys) => {\n    for (let k of keys) {\n        delete obj[k];\n    }\n    return obj;\n};\n","import { equiv } from \"@thi.ng/equiv\";\nexport const equivMap = (a, b) => {\n    if (a === b) {\n        return true;\n    }\n    if (!(b instanceof Map) || a.size !== b.size) {\n        return false;\n    }\n    for (let p of a.entries()) {\n        if (!equiv(b.get(p[0]), p[1])) {\n            return false;\n        }\n    }\n    return true;\n};\nexport const equivSet = (a, b) => {\n    if (a === b) {\n        return true;\n    }\n    if (!(b instanceof Set) || a.size !== b.size) {\n        return false;\n    }\n    for (let k of a.keys()) {\n        if (!b.has(k)) {\n            return false;\n        }\n    }\n    return true;\n};\n","export const existsAndNotNull = (x) => x != null;\n","export const exists = (t) => t !== undefined;\n","export const hasCrypto = () => typeof window !== \"undefined\" && window[\"crypto\"] !== undefined;\n","export const hasMaxLength = (len, x) => x != null && x.length <= len;\n","export const hasMinLength = (len, x) => x != null && x.length >= len;\n","export const isFunction = (x) => typeof x === \"function\";\n","import { isFunction } from \"./is-function\";\nexport const hasPerformance = () => typeof performance !== \"undefined\" && isFunction(performance.now);\n","export const hasWASM = () => (typeof window !== \"undefined\" &&\n    typeof window[\"WebAssembly\"] !== \"undefined\") ||\n    (typeof global !== \"undefined\" &&\n        typeof global[\"WebAssembly\"] !== \"undefined\");\n","export const hasWebGL = () => {\n    try {\n        document.createElement(\"canvas\").getContext(\"webgl\");\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n};\n","export const hasWebSocket = () => typeof WebSocket !== \"undefined\";\n","export const implementsFunction = (x, fn) => x != null && typeof x[fn] === \"function\";\n","export const isArray = Array.isArray;\n","export const isArrayLike = (x) => x != null && typeof x !== \"function\" && x.length !== undefined;\n","export const isBlob = (x) => x instanceof Blob;\n","export const isBoolean = (x) => typeof x === \"boolean\";\n","export const isChrome = () => typeof window !== \"undefined\" && !!window[\"chrome\"];\n","export const isDate = (x) => x instanceof Date;\n","export const isEven = (x) => x % 2 === 0;\n","export const isFalse = (x) => x === false;\n","export const isFile = (x) => x instanceof File;\n","export const isFirefox = () => typeof window !== \"undefined\" && !!window[\"InstallTrigger\"];\n","export const isString = (x) => typeof x === \"string\";\n","import { isString } from \"./is-string\";\nconst RE = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\nexport const isHexColor = (x) => isString(x) && RE.test(x);\n","export const isIE = () => typeof document !== \"undefined\" &&\n    (typeof document[\"documentMode\"] !== \"undefined\" ||\n        navigator.userAgent.indexOf(\"MSIE\") > 0);\n","export const isInRange = (min, max, x) => x >= min && x <= max;\n","export const isInt32 = (x) => typeof x === \"number\" && (x | 0) === x;\n","export const isIterable = (x) => x != null && typeof x[Symbol.iterator] === \"function\";\n","export const isMap = (x) => x instanceof Map;\n","export const isMobile = () => typeof navigator !== \"undefined\" &&\n    /mobile|tablet|ip(ad|hone|od)|android|silk|crios/i.test(navigator.userAgent);\n","export const isNaN = (x) => x !== x;\n","export const isNegative = (x) => typeof x === \"number\" && x < 0;\n","/**\n * Checks if x is null or undefined.\n *\n */\nexport const isNil = (x) => x == null;\n","export const isNode = () => {\n    if (typeof process === \"object\") {\n        if (typeof process.versions === \"object\") {\n            if (typeof process.versions.node !== \"undefined\") {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n","export const isNotStringAndIterable = (x) => x != null &&\n    typeof x !== \"string\" &&\n    typeof x[Symbol.iterator] === \"function\";\n","export const isNull = (x) => x === null;\n","export const isNumber = (x) => typeof x === \"number\";\n","export const isObject = (x) => x !== null && typeof x === \"object\";\n","export const isOdd = (x) => x % 2 !== 0;\n","const OBJP = Object.getPrototypeOf;\n/**\n * Similar to `isObject()`, but also checks if prototype is that of\n * `Object` (or `null`).\n *\n * @param x\n */\nexport const isPlainObject = (x) => {\n    let p;\n    return (x != null &&\n        typeof x === \"object\" &&\n        ((p = OBJP(x)) === null || OBJP(p) === null));\n};\n","export const isPosititve = (x) => typeof x === \"number\" && x > 0;\n","export const isPrimitive = (x) => {\n    const t = typeof x;\n    return t === \"string\" || t === \"number\";\n};\n","export const isPromise = (x) => x instanceof Promise;\n","import { implementsFunction } from \"./implements-function\";\nexport const isPromiseLike = (x) => x instanceof Promise ||\n    (implementsFunction(x, \"then\") && implementsFunction(x, \"catch\"));\n","export const isRegExp = (x) => x instanceof RegExp;\n","import { isChrome } from \"./is-chrome\";\nexport const isSafari = () => typeof navigator !== \"undefined\" &&\n    /Safari/.test(navigator.userAgent) &&\n    !isChrome();\n","export const isSet = (x) => x instanceof Set;\n","export const isSymbol = (x) => typeof x === \"symbol\";\n","export const isTransferable = (x) => x instanceof ArrayBuffer ||\n    (typeof SharedArrayBuffer !== \"undefined\" &&\n        x instanceof SharedArrayBuffer) ||\n    (typeof MessagePort !== \"undefined\" && x instanceof MessagePort);\n","export const isTrue = (x) => x === true;\n","export const isTypedArray = (x) => x &&\n    (x.constructor === Float32Array ||\n        x.constructor === Uint32Array ||\n        x.constructor === Uint8Array ||\n        x.constructor === Uint8ClampedArray ||\n        x.constructor === Int8Array ||\n        x.constructor === Uint16Array ||\n        x.constructor === Int16Array ||\n        x.constructor === Int32Array ||\n        x.constructor === Float64Array);\n","export const isUint32 = (x) => typeof x === \"number\" && x >>> 0 === x;\n","export const isUndefined = (x) => x === undefined;\n","const RE = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nexport const isUUID = (x) => RE.test(x);\n","const RE = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\nexport const isUUIDv4 = (x) => RE.test(x);\n","export const isZero = (x) => x === 0;\n","export * from \"./exists-not-null\";\nexport * from \"./exists\";\nexport * from \"./has-crypto\";\nexport * from \"./has-max-length\";\nexport * from \"./has-min-length\";\nexport * from \"./has-performance\";\nexport * from \"./has-wasm\";\nexport * from \"./has-webgl\";\nexport * from \"./has-websocket\";\nexport * from \"./implements-function\";\nexport * from \"./is-array\";\nexport * from \"./is-arraylike\";\nexport * from \"./is-blob\";\nexport * from \"./is-boolean\";\nexport * from \"./is-chrome\";\nexport * from \"./is-date\";\nexport * from \"./is-even\";\nexport * from \"./is-false\";\nexport * from \"./is-file\";\nexport * from \"./is-firefox\";\nexport * from \"./is-function\";\nexport * from \"./is-hex-color\";\nexport * from \"./is-ie\";\nexport * from \"./is-in-range\";\nexport * from \"./is-int32\";\nexport * from \"./is-iterable\";\nexport * from \"./is-map\";\nexport * from \"./is-mobile\";\nexport * from \"./is-nan\";\nexport * from \"./is-negative\";\nexport * from \"./is-nil\";\nexport * from \"./is-node\";\nexport * from \"./is-not-string-iterable\";\nexport * from \"./is-null\";\nexport * from \"./is-number\";\nexport * from \"./is-object\";\nexport * from \"./is-odd\";\nexport * from \"./is-plain-object\";\nexport * from \"./is-positive\";\nexport * from \"./is-primitive\";\nexport * from \"./is-promise\";\nexport * from \"./is-promiselike\";\nexport * from \"./is-regexp\";\nexport * from \"./is-safari\";\nexport * from \"./is-set\";\nexport * from \"./is-string\";\nexport * from \"./is-symbol\";\nexport * from \"./is-transferable\";\nexport * from \"./is-true\";\nexport * from \"./is-typedarray\";\nexport * from \"./is-uint32\";\nexport * from \"./is-undefined\";\nexport * from \"./is-uuid\";\nexport * from \"./is-uuid4\";\nexport * from \"./is-zero\";\n","import { isMap } from \"@thi.ng/checks\";\nexport function into(dest, src) {\n    if (isMap(dest)) {\n        for (let x of src) {\n            dest.set(x[0], x[1]);\n        }\n    }\n    else {\n        for (let x of src) {\n            dest.add(x);\n        }\n    }\n    return dest;\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { dissoc } from \"./dissoc\";\nimport { equivSet } from \"./internal/equiv\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst __vals = (inst) => __private.get(inst).vals;\n/**\n * An alternative set implementation to the native ES6 Set type. Uses\n * customizable equality/equivalence predicate and so is more useful\n * when dealing with structured data. Implements full API of native Set\n * and by the default uses `@thi.ng/equiv` for equivalence checking.\n *\n * Additionally, the type also implements the `ICopy`, `IEmpty` and\n * `IEquiv` interfaces itself.\n */\nexport class ArraySet extends Set {\n    constructor(vals, opts = {}) {\n        super();\n        __private.set(this, { equiv: opts.equiv || equiv, vals: [] });\n        vals && this.into(vals);\n    }\n    *[Symbol.iterator]() {\n        yield* __vals(this);\n    }\n    get [Symbol.species]() {\n        return ArraySet;\n    }\n    get [Symbol.toStringTag]() {\n        return \"ArraySet\";\n    }\n    get size() {\n        return __vals(this).length;\n    }\n    copy() {\n        const $this = __private.get(this);\n        const s = new ArraySet(null, { equiv: $this.equiv });\n        __private.get(s).vals = $this.vals.slice();\n        return s;\n    }\n    empty() {\n        return new ArraySet(null, this.opts());\n    }\n    clear() {\n        __vals(this).length = 0;\n    }\n    first() {\n        if (this.size) {\n            return __vals(this)[0];\n        }\n    }\n    add(key) {\n        !this.has(key) && __vals(this).push(key);\n        return this;\n    }\n    into(keys) {\n        return into(this, keys);\n    }\n    has(key) {\n        return this.get(key, SEMAPHORE) !== SEMAPHORE;\n    }\n    /**\n     * Returns the canonical value for `x`, if present. If the set\n     * contains no equivalent for `x`, returns `notFound`.\n     *\n     * @param key\n     * @param notFound\n     */\n    get(key, notFound) {\n        const $this = __private.get(this);\n        const eq = $this.equiv;\n        const vals = $this.vals;\n        for (let i = vals.length; --i >= 0;) {\n            if (eq(vals[i], key)) {\n                return vals[i];\n            }\n        }\n        return notFound;\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        const eq = $this.equiv;\n        const vals = $this.vals;\n        for (let i = vals.length; --i >= 0;) {\n            if (eq(vals[i], key)) {\n                vals.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    }\n    disj(keys) {\n        return dissoc(this, keys);\n    }\n    equiv(o) {\n        return equivSet(this, o);\n    }\n    forEach(fn, thisArg) {\n        const vals = __vals(this);\n        for (let i = vals.length; --i >= 0;) {\n            const v = vals[i];\n            fn.call(thisArg, v, v, this);\n        }\n    }\n    *entries() {\n        for (let v of __vals(this)) {\n            yield [v, v];\n        }\n    }\n    *keys() {\n        yield* __vals(this);\n    }\n    *values() {\n        yield* __vals(this);\n    }\n    opts() {\n        return { equiv: __private.get(this).equiv };\n    }\n}\n","/**\n * Like `commonKeysObj()`, but for ES6 Maps.\n *\n * @param a\n * @param b\n * @param out\n */\nexport const commonKeysMap = (a, b, out = []) => {\n    for (let k of a.keys()) {\n        b.has(k) && out.push(k);\n    }\n    return out;\n};\n/**\n * Returns array of keys present in both args, i.e. the set intersection\n * of the given objects' key / property sets.\n *\n * ```\n * commonKeys({ a: 1, b: 2 }, { c: 10, b: 20, a: 30 })\n * // [ \"a\", \"b\" ]\n * ```\n *\n * @param a\n * @param b\n * @param out\n */\nexport const commonKeysObj = (a, b, out = []) => {\n    for (let k in a) {\n        b.hasOwnProperty(k) && out.push(k);\n    }\n    return out;\n};\n","export class Reduced {\n    constructor(val) {\n        this.value = val;\n    }\n    deref() {\n        return this.value;\n    }\n}\nexport const reduced = (x) => new Reduced(x);\nexport const isReduced = (x) => x instanceof Reduced;\nexport const ensureReduced = (x) => x instanceof Reduced ? x : new Reduced(x);\nexport const unreduced = (x) => (x instanceof Reduced ? x.deref() : x);\n","export const defError = (prefix, suffix = (msg) => (msg !== undefined ? \": \" + msg : \"\")) => class extends Error {\n    constructor(msg) {\n        super(prefix(msg) + suffix(msg));\n    }\n};\n","import { defError } from \"./deferror\";\nexport const IllegalArgumentError = defError(() => \"illegal argument(s)\");\nexport const illegalArgs = (msg) => {\n    throw new IllegalArgumentError(msg);\n};\n","import { defError } from \"./deferror\";\nexport const IllegalArityError = defError(() => \"illegal arity\");\nexport const illegalArity = (n) => {\n    throw new IllegalArityError(n);\n};\n","import { defError } from \"./deferror\";\nexport const IllegalStateError = defError(() => \"illegal state\");\nexport const illegalState = (msg) => {\n    throw new IllegalStateError(msg);\n};\n","import { defError } from \"./deferror\";\nexport const UnsupportedOperationError = defError(() => \"unsupported operation\");\nexport const unsupported = (msg) => {\n    throw new UnsupportedOperationError(msg);\n};\n","export * from \"./deferror\";\nexport * from \"./illegal-arguments\";\nexport * from \"./illegal-arity\";\nexport * from \"./illegal-state\";\nexport * from \"./unsupported\";\n","import { implementsFunction, isArrayLike, isIterable } from \"@thi.ng/checks\";\nimport { illegalArity } from \"@thi.ng/errors\";\nimport { isReduced, unreduced } from \"./reduced\";\nconst parseArgs = (args) => args.length === 2\n    ? [undefined, args[1]]\n    : args.length === 3\n        ? [args[1], args[2]]\n        : illegalArity(args.length);\nexport function reduce(...args) {\n    const rfn = args[0];\n    const init = rfn[0];\n    const complete = rfn[1];\n    const reduce = rfn[2];\n    args = parseArgs(args);\n    const acc = args[0] == null ? init() : args[0];\n    const xs = args[1];\n    return unreduced(complete(implementsFunction(xs, \"$reduce\")\n        ? xs.$reduce(reduce, acc)\n        : isArrayLike(xs)\n            ? reduceArray(reduce, acc, xs)\n            : reduceIterable(reduce, acc, xs)));\n}\nconst reduceArray = (rfn, acc, xs) => {\n    for (let i = 0, n = xs.length; i < n; i++) {\n        acc = rfn(acc, xs[i]);\n        if (isReduced(acc)) {\n            acc = acc.deref();\n            break;\n        }\n    }\n    return acc;\n};\nconst reduceIterable = (rfn, acc, xs) => {\n    for (let x of xs) {\n        acc = rfn(acc, x);\n        if (isReduced(acc)) {\n            acc = acc.deref();\n            break;\n        }\n    }\n    return acc;\n};\n/**\n * Convenience helper for building a full `Reducer` using the identity\n * function (i.e. `(x) => x`) as completion step (true for 90% of all\n * bundled transducers).\n *\n * @param init init step of reducer\n * @param rfn reduction step of reducer\n */\nexport const reducer = (init, rfn) => [init, (acc) => acc, rfn];\nexport const $$reduce = (rfn, args) => {\n    const n = args.length - 1;\n    return isIterable(args[n])\n        ? args.length > 1\n            ? reduce(rfn.apply(null, args.slice(0, n)), args[n])\n            : reduce(rfn(), args[0])\n        : undefined;\n};\n","import { reducer } from \"../reduce\";\nexport function push(xs) {\n    return xs\n        ? [...xs]\n        : reducer(() => [], (acc, x) => (acc.push(x), acc));\n}\n","import { NO_OP, SEMAPHORE } from \"@thi.ng/api\";\nimport { isIterable } from \"@thi.ng/checks\";\nimport { isReduced, unreduced } from \"./reduced\";\nimport { push } from \"./rfn/push\";\n/**\n * Takes a transducer and input iterable. Returns iterator of\n * transformed results.\n *\n * @param xform\n * @param xs\n */\nexport function* iterator(xform, xs) {\n    const rfn = xform(push());\n    const complete = rfn[1];\n    const reduce = rfn[2];\n    for (let x of xs) {\n        const y = reduce([], x);\n        if (isReduced(y)) {\n            yield* unreduced(complete(y.deref()));\n            return;\n        }\n        if (y.length) {\n            yield* y;\n        }\n    }\n    yield* unreduced(complete([]));\n}\n/**\n * Optimized version of `iterator()` for transducers which are\n * guaranteed to:\n *\n * 1) Only produce none or a single result per input\n * 2) Do not require a `completion` reduction step\n *\n * @param xform\n * @param xs\n */\nexport function* iterator1(xform, xs) {\n    const reduce = xform([NO_OP, NO_OP, (_, x) => x])[2];\n    for (let x of xs) {\n        let y = reduce(SEMAPHORE, x);\n        if (isReduced(y)) {\n            y = unreduced(y.deref());\n            if (y !== SEMAPHORE) {\n                yield y;\n            }\n            return;\n        }\n        if (y !== SEMAPHORE) {\n            yield y;\n        }\n    }\n}\n/**\n * Helper function used by various transducers to wrap themselves as\n * transforming iterators. Delegates to `iterator1()` by default.\n *\n * @param xform\n * @param args\n * @param impl\n */\nexport const $iter = (xform, args, impl = iterator1) => {\n    const n = args.length - 1;\n    return isIterable(args[n])\n        ? args.length > 1\n            ? impl(xform.apply(null, args.slice(0, n)), args[n])\n            : impl(xform(), args[0])\n        : undefined;\n};\n","/**\n * Reducer composition helper. Takes existing reducer `rfn` (a 3-tuple)\n * and a reducing function `fn`. Returns a new reducer tuple of this\n * form:\n *\n * ```\n * [rfn[0], rfn[1], fn]\n * ```\n *\n * `rfn[2]` reduces values of type `B` into an accumulator of type `A`.\n * `fn` accepts values of type `C` and produces interim results of type\n * `B`, which are then (possibly) passed to the \"inner\" `rfn[2]`\n * function. Therefore the resulting reducer takes inputs of `C` and an\n * accumulator of type `A`.\n *\n * It is assumed that `fn` internally calls `rfn[2]` to pass its own\n * results for further processing by the nested reducer `rfn`.\n *\n * @param rfn\n * @param fn\n */\nexport const compR = (rfn, fn) => [rfn[0], rfn[1], fn];\n","import { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function map(fn, src) {\n    return src\n        ? iterator1(map(fn), src)\n        : (rfn) => {\n            const r = rfn[2];\n            return compR(rfn, (acc, x) => r(acc, fn(x)));\n        };\n}\n","import { illegalArity } from \"@thi.ng/errors\";\nimport { reduce } from \"./reduce\";\nimport { map } from \"./xform/map\";\nexport function transduce(...args) {\n    let acc, xs;\n    switch (args.length) {\n        case 4:\n            xs = args[3];\n            acc = args[2];\n            break;\n        case 3:\n            xs = args[2];\n            break;\n        case 2:\n            return map((x) => transduce(args[0], args[1], x));\n        default:\n            illegalArity(args.length);\n    }\n    return reduce(args[0](args[1]), acc, xs);\n}\n","import { NO_OP } from \"@thi.ng/api\";\nimport { transduce } from \"./transduce\";\nconst NO_OP_REDUCER = [NO_OP, NO_OP, NO_OP];\nexport function run(tx, ...args) {\n    if (args.length === 1) {\n        transduce(tx, NO_OP_REDUCER, args[0]);\n    }\n    else {\n        const fx = args[0];\n        transduce(tx, [NO_OP, NO_OP, (_, x) => fx(x)], args[1]);\n    }\n}\n","import { isReduced } from \"./reduced\";\nimport { push } from \"./rfn/push\";\n/**\n * Single-step transducer execution wrapper.\n * Returns array if transducer produces multiple results\n * and undefined if there was no output. Else returns single\n * result value.\n *\n * Likewise, once a transducer has produced a final / reduced\n * value, all further invocations of the stepper function will\n * return undefined.\n *\n * ```\n * // single result\n * step(map(x => x * 10))(1);\n * // 10\n *\n * // multiple results\n * step(mapcat(x => [x, x + 1, x + 2]))(1)\n * // [ 1, 2, 3 ]\n *\n * // no result\n * f = step(filter((x) => !(x & 1)))\n * f(1); // undefined\n * f(2); // 2\n *\n * // reduced value termination\n * f = step(take(2));\n * f(1); // 1\n * f(1); // 1\n * f(1); // undefined\n * f(1); // undefined\n * ```\n *\n * @param tx\n */\nexport const step = (tx) => {\n    const [_, complete, reduce] = tx(push());\n    _;\n    let done = false;\n    return (x) => {\n        if (!done) {\n            let acc = reduce([], x);\n            done = isReduced(acc);\n            if (done) {\n                acc = complete(acc.deref());\n            }\n            return acc.length === 1 ? acc[0] : acc.length > 0 ? acc : undefined;\n        }\n    };\n};\n","import { $$reduce, reducer } from \"../reduce\";\nexport const __mathop = (rfn, fn, initDefault, args) => {\n    const res = $$reduce(rfn, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const init = args[0] || initDefault;\n    return reducer(() => init, fn);\n};\n","import { __mathop } from \"../internal/mathop\";\nexport function add(...args) {\n    return __mathop(add, (acc, x) => acc + x, 0, args);\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function assocMap(xs) {\n    return xs\n        ? reduce(assocMap(), xs)\n        : reducer(() => new Map(), (acc, [k, v]) => acc.set(k, v));\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function assocObj(xs) {\n    return xs\n        ? reduce(assocObj(), xs)\n        : reducer(() => ({}), (acc, [k, v]) => ((acc[k] = v), acc));\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function conj(xs) {\n    return xs\n        ? reduce(conj(), xs)\n        : reducer(() => new Set(), (acc, x) => acc.add(x));\n}\n","import { reducer, $$reduce } from \"../reduce\";\nexport function count(...args) {\n    const res = $$reduce(count, args);\n    if (res !== undefined) {\n        return res;\n    }\n    let offset = args[0] || 0;\n    let step = args[1] || 1;\n    return reducer(() => offset, (acc, _) => acc + step);\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function div(init, xs) {\n    return xs\n        ? reduce(div(init), xs)\n        : reducer(() => init, (acc, x) => acc / x);\n}\n","import { $$reduce, reducer } from \"../reduce\";\nimport { reduced } from \"../reduced\";\nexport function every(...args) {\n    const res = $$reduce(every, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const pred = args[0];\n    return reducer(() => true, pred\n        ? (acc, x) => (pred(x) ? acc : reduced(false))\n        : (acc, x) => (x ? acc : reduced(false)));\n}\n","import { $$reduce, reducer } from \"../reduce\";\nexport function fill(...args) {\n    const res = $$reduce(fill, args);\n    if (res !== undefined) {\n        return res;\n    }\n    let start = args[0] || 0;\n    return reducer(() => [], (acc, x) => ((acc[start++] = x), acc));\n}\nexport function fillN(...args) {\n    return fill(...args);\n}\n","import { illegalArity } from \"@thi.ng/errors\";\nexport function comp(...fns) {\n    let [a, b, c, d, e, f, g, h, i, j] = fns;\n    switch (fns.length) {\n        case 0:\n            illegalArity(0);\n        case 1:\n            return a;\n        case 2:\n            return (...xs) => a(b(...xs));\n        case 3:\n            return (...xs) => a(b(c(...xs)));\n        case 4:\n            return (...xs) => a(b(c(d(...xs))));\n        case 5:\n            return (...xs) => a(b(c(d(e(...xs)))));\n        case 6:\n            return (...xs) => a(b(c(d(e(f(...xs))))));\n        case 7:\n            return (...xs) => a(b(c(d(e(f(g(...xs)))))));\n        case 8:\n            return (...xs) => a(b(c(d(e(f(g(h(...xs))))))));\n        case 9:\n            return (...xs) => a(b(c(d(e(f(g(h(i(...xs)))))))));\n        case 10:\n        default:\n            const fn = (...xs) => a(b(c(d(e(f(g(h(i(j(...xs))))))))));\n            return fns.length === 10 ? fn : comp(fn, ...fns.slice(10));\n    }\n}\nexport function compL(...fns) {\n    return comp.apply(null, fns.reverse());\n}\n/**\n * @deprecated renamed to `compL`\n */\nexport const compI = compL;\n","export function complement(f) {\n    return (...xs) => !f(...xs);\n}\n","export const constantly = (x) => () => x;\n","export const delay = (body) => new Delay(body);\nexport class Delay {\n    constructor(body) {\n        this.body = body;\n        this.realized = false;\n    }\n    deref() {\n        if (!this.realized) {\n            this.value = this.body();\n            this.realized = true;\n        }\n        return this.value;\n    }\n    isRealized() {\n        return this.realized;\n    }\n}\n","export const delayed = (x, t) => new Promise((resolve) => setTimeout(() => resolve(x), t));\n","export const identity = (x) => x;\n","/**\n * Returns f(x) iff `x` is not null or undefined.\n *\n * @param f\n * @param x\n */\nexport const ifDef = (f, x) => x != null ? f(x) : undefined;\n","export function juxt(...fns) {\n    const [a, b, c, d, e, f, g, h] = fns;\n    switch (fns.length) {\n        case 1:\n            return (x) => [a(x)];\n        case 2:\n            return (x) => [a(x), b(x)];\n        case 3:\n            return (x) => [a(x), b(x), c(x)];\n        case 4:\n            return (x) => [a(x), b(x), c(x), d(x)];\n        case 5:\n            return (x) => [a(x), b(x), c(x), d(x), e(x)];\n        case 6:\n            return (x) => [a(x), b(x), c(x), d(x), e(x), f(x)];\n        case 7:\n            return (x) => [a(x), b(x), c(x), d(x), e(x), f(x), g(x)];\n        case 8:\n            return (x) => [a(x), b(x), c(x), d(x), e(x), f(x), g(x), h(x)];\n        default:\n            return (x) => {\n                let res = new Array(fns.length);\n                for (let i = fns.length; --i >= 0;) {\n                    res[i] = fns[i](x);\n                }\n                return res;\n            };\n    }\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nexport function partial(fn, ...args) {\n    let [a, b, c, d, e, f, g, h] = args;\n    switch (args.length) {\n        case 1:\n            return (...xs) => fn(a, ...xs);\n        case 2:\n            return (...xs) => fn(a, b, ...xs);\n        case 3:\n            return (...xs) => fn(a, b, c, ...xs);\n        case 4:\n            return (...xs) => fn(a, b, c, d, ...xs);\n        case 5:\n            return (...xs) => fn(a, b, c, d, e, ...xs);\n        case 6:\n            return (...xs) => fn(a, b, c, d, e, f, ...xs);\n        case 7:\n            return (...xs) => fn(a, b, c, d, e, f, g, ...xs);\n        case 8:\n            return (...xs) => fn(a, b, c, d, e, f, g, h, ...xs);\n        default:\n            illegalArgs();\n    }\n}\nexport const foo = partial((a, b) => a + b, \"a\");\n","/**\n * Takes an `init` value and a number of functions and/or function\n * tuples, consisting of: `[fn, ...args]`. Executes each function\n * (or tuple) with the return value of the previous expression inserted\n * as first argument, using `init` for the first expression.\n *\n * ```\n * const neg = (x) => -x;\n * const sub = (a, b) => a - b;\n * const div = (a, b) => a / b;\n *\n * threadFirst(\n *   5,\n *   neg,       // -5\n *   [sub, 20], // -5 - 20 = -25\n *   [div, 10]  // -25 / 10 = -2.5\n * );\n *\n * // -2.5\n * ```\n *\n * @see threadLast\n *\n * @param init\n * @param fns\n */\nexport const threadFirst = (init, ...fns) => fns.reduce((acc, expr) => typeof expr === \"function\"\n    ? expr(acc)\n    : expr[0](acc, ...expr.slice(1)), init);\n","/**\n * Takes an `init` value and a number of functions and/or function\n * tuples, consisting of: `[fn, ...args]`. Executes each function\n * (or tuple) with the return value of the previous expression inserted\n * as last argument, using `init` for the first expression.\n *\n * ```\n * const neg = (x) => -x;\n * const sub = (a, b) => a - b;\n * const div = (a, b) => a / b;\n *\n * threadLast(\n *   5,\n *   neg,       // -5\n *   [sub, 10], // 20 - (-5) = 25\n *   [div, 10]  // 10 / 25 = 0.4\n * );\n *\n * // 0.4\n * ```\n *\n * @see threadFirst\n *\n * @param init\n * @param fns\n */\nexport const threadLast = (init, ...fns) => fns.reduce((acc, expr) => typeof expr === \"function\"\n    ? expr(acc)\n    : expr[0](...expr.slice(1), acc), init);\n","/**\n * Takes a function returning either a no-arg function (thunk) or its\n * already realized (non-function) result. Re-executes thunk for as long\n * as it returns another function/thunk. Once a non-function result has\n * been produced, `trampoline` returns that value itself. If the final\n * result should be function, it needs to wrapped (e.g. as a 1-elem\n * array).\n *\n * This function should be used for non-stack consuming recursion. I.e.\n * a trampoline is a form of continuation passing style and only ever\n * consumes max. 2 extra stack frames, independent from recursion depth.\n *\n * ```\n * const countdown = (acc, x) =>\n *   x >= 0 ?\n *     () => (acc.push(x), countdown(acc, x-1)) :\n *     acc;\n *\n * trampoline(countdown([], 4))\n * // [ 4, 3, 2, 1, 0 ]\n *\n * trampoline(countdown([], -1))\n * // []\n * ```\n *\n * @param f\n */\nexport const trampoline = (f) => {\n    while (typeof f === \"function\") {\n        f = f();\n    }\n    return f;\n};\n","export * from \"./comp\";\nexport * from \"./complement\";\nexport * from \"./constantly\";\nexport * from \"./delay\";\nexport * from \"./delayed\";\nexport * from \"./identity\";\nexport * from \"./ifdef\";\nexport * from \"./juxt\";\nexport * from \"./partial\";\nexport * from \"./thread-first\";\nexport * from \"./thread-last\";\nexport * from \"./trampoline\";\n","import { identity } from \"@thi.ng/compose\";\nimport { push } from \"../rfn/push\";\n/**\n * Shared helper function for groupBy* reducers\n *\n * @param opts\n */\nexport const __groupByOpts = (opts) => (Object.assign({ key: identity, group: push() }, opts));\n","import { __groupByOpts } from \"../internal/group-opts\";\nimport { $$reduce, reducer } from \"../reduce\";\nexport function groupByMap(...args) {\n    const res = $$reduce(groupByMap, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const opts = __groupByOpts(args[0]);\n    const [init, _, reduce] = opts.group;\n    _; // ignore\n    return reducer(() => new Map(), (acc, x) => {\n        const k = opts.key(x);\n        return acc.set(k, acc.has(k)\n            ? reduce(acc.get(k), x)\n            : reduce(init(), x));\n    });\n}\n","import { identity } from \"@thi.ng/compose\";\nimport { $$reduce } from \"../reduce\";\nimport { count } from \"./count\";\nimport { groupByMap } from \"./group-by-map\";\nexport function frequencies(...args) {\n    return ($$reduce(frequencies, args) ||\n        groupByMap({ key: args[0] || identity, group: count() }));\n}\n","import { __groupByOpts } from \"../internal/group-opts\";\nimport { $$reduce, reducer } from \"../reduce\";\nexport function groupByObj(...args) {\n    const res = $$reduce(groupByObj, args);\n    if (res) {\n        return res;\n    }\n    const opts = __groupByOpts(args[0]);\n    const [_init, _, _reduce] = opts.group;\n    _; // ignore\n    return reducer(() => ({}), (acc, x) => {\n        const k = opts.key(x);\n        acc[k] = acc[k]\n            ? _reduce(acc[k], x)\n            : _reduce(_init(), x);\n        return acc;\n    });\n}\n","import { groupByObj } from \"./group-by-obj\";\nimport { push } from \"./push\";\nconst branchPred = (key, b, l, r) => (x) => (key(x) & b ? r : l);\n/**\n * Creates a bottom-up, unbalanced binary tree of desired depth and\n * choice of data structures. Any value can be indexed, as long as a\n * numeric representation (key) can be obtained. This numeric key is\n * produced by the supplied `key` function. IMPORTANT: the returned\n * values MUST be unsigned and less than the provided bit length (i.e.\n * `0 .. (2^bits) - 1` range).\n *\n * By default the tree is constructed using plain objects for branches,\n * with left branches stored as \"l\" and right ones as \"r\". The original\n * values are stored at the lowest tree level using a customizable\n * nested reducer. By default leaves are collected in arrays (using the\n * `push()` reducer), but any suitable reducer can be used (e.g.\n * `conj()` to collect values into sets).\n *\n * Index by lowest 4-bits of ID value:\n *\n * ```\n * tree = reduce(\n *   groupBinary(4, x => x.id & 0xf),\n *   [{id: 3}, {id: 8}, {id: 15}, {id: 0}]\n * )\n *\n * tree.l.l.l.l\n * // [ { id: 0 } ]\n * tree.r.r.r.r\n * // [ { id: 15 } ]\n * tree.l.l.r.r\n * // [ { id: 3 } ]\n * ```\n *\n * Collecting as array:\n *\n * ```\n * tree = reduce(\n *   groupBinary(4, identity, ()=>[], push(), 0, 1),\n *   [1,2,3,4,5,6,7]\n * )\n *\n * tree[0][1][0][1] // 0101 == 5 in binary\n * // [ 5 ]\n *\n * tree[0][1][1]    // 011* == branch\n * // [ [ 6 ], [ 7 ] ]\n * ```\n *\n * Using `frequencies` as leaf reducer:\n *\n * ```\n * tree = reduce(\n *   groupBinary(3, (x: string) => x.length, null, frequencies()),\n *   \"aa bbb dddd ccccc bbb eeee fff\".split(\" \")\n * )\n * // [ [ undefined,\n * //     [ Map { 'aa' => 1 },\n * //       Map { 'bbb' => 2, 'fff' => 1 } ] ],\n * //   [ [ Map { 'dddd' => 1, 'eeee' => 1 },\n * //       Map { 'ccccc' => 1 } ] ] ]\n *\n * tree[0][1][1]\n * // Map { 'bbb' => 2, 'fff' => 1 }\n * ```\n *\n * @param bits index range (always from 0)\n * @param key key function\n * @param branch function to create a new branch container (object or\n * array)\n * @param leaf reducer for leaf collection\n * @param left key for storing left branches (e.g. `0` for arrays)\n * @param right key for storing right branches (e.g. `1` for arrays)\n */\nexport const groupBinary = (bits, key, branch, leaf, left = \"l\", right = \"r\") => {\n    const init = branch || (() => ({}));\n    let rfn = groupByObj({\n        key: branchPred(key, 1, left, right),\n        group: leaf || push()\n    });\n    for (let i = 2, maxIndex = 1 << bits; i < maxIndex; i <<= 1) {\n        rfn = groupByObj({\n            key: branchPred(key, i, left, right),\n            group: [init, rfn[1], rfn[2]]\n        });\n    }\n    return [init, rfn[1], rfn[2]];\n};\n","import { NO_OP } from \"@thi.ng/api\";\nimport { reduce, reducer } from \"../reduce\";\nexport function last(xs) {\n    return xs ? reduce(last(), xs) : reducer(NO_OP, (_, x) => x);\n}\n","export const compare = (a, b) => {\n    if (a === b) {\n        return 0;\n    }\n    if (a == null) {\n        return b == null ? 0 : -1;\n    }\n    if (b == null) {\n        return a == null ? 0 : 1;\n    }\n    if (typeof a.compare === \"function\") {\n        return a.compare(b);\n    }\n    if (typeof b.compare === \"function\") {\n        return -b.compare(a);\n    }\n    return a < b ? -1 : a > b ? 1 : 0;\n};\n/**\n * Numeric comparator (ascending order)\n *\n * @param a\n * @param b\n */\nexport const compareNumAsc = (a, b) => a - b;\n/**\n * Numeric comparator (descending order)\n *\n * @param a\n * @param b\n */\nexport const compareNumDesc = (a, b) => b - a;\n","import { compare } from \"@thi.ng/compare\";\nimport { $$reduce, reducer } from \"../reduce\";\nexport function maxCompare(...args) {\n    const res = $$reduce(maxCompare, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const init = args[0];\n    const cmp = args[1] || compare;\n    return reducer(init, (acc, x) => (cmp(acc, x) >= 0 ? acc : x));\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function max(xs) {\n    return xs\n        ? reduce(max(), xs)\n        : reducer(() => -Infinity, (acc, x) => Math.max(acc, x));\n}\n","import { reduce } from \"../reduce\";\nexport function mean(xs) {\n    let n = 1;\n    return xs\n        ? reduce(mean(), xs)\n        : [\n            () => (n = 0),\n            (acc) => (n > 1 ? acc / n : acc),\n            (acc, x) => (n++, acc + x)\n        ];\n}\n","import { compare } from \"@thi.ng/compare\";\nimport { $$reduce, reducer } from \"../reduce\";\nexport function minCompare(...args) {\n    const res = $$reduce(minCompare, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const init = args[0];\n    const cmp = args[1] || compare;\n    return reducer(init, (acc, x) => (cmp(acc, x) <= 0 ? acc : x));\n}\n","import { reduce, reducer } from \"../reduce\";\nexport function min(xs) {\n    return xs\n        ? reduce(min(), xs)\n        : reducer(() => Infinity, (acc, x) => Math.min(acc, x));\n}\n","import { __mathop } from \"../internal/mathop\";\nexport function mul(...args) {\n    return __mathop(mul, (acc, x) => acc * x, 1, args);\n}\n","import { reducer } from \"../reduce\";\nexport const pushCopy = () => reducer(() => [], (acc, x) => ((acc = acc.slice()).push(x), acc));\n","import { reduce } from \"../reduce\";\nimport { isReduced, reduced } from \"../reduced\";\nexport function reductions(rfn, xs) {\n    const [init, complete, _reduce] = rfn;\n    return xs\n        ? reduce(reductions(rfn), xs)\n        : [\n            () => [init()],\n            (acc) => ((acc[acc.length - 1] = complete(acc[acc.length - 1])), acc),\n            (acc, x) => {\n                const res = _reduce(acc[acc.length - 1], x);\n                if (isReduced(res)) {\n                    acc.push(res.deref());\n                    return reduced(acc);\n                }\n                acc.push(res);\n                return acc;\n            }\n        ];\n}\n","import { $$reduce, reducer } from \"../reduce\";\nimport { reduced } from \"../reduced\";\nexport function some(...args) {\n    const res = $$reduce(some, args);\n    if (res !== undefined) {\n        return res;\n    }\n    const pred = args[0];\n    return reducer(() => false, pred\n        ? (acc, x) => (pred(x) ? reduced(true) : acc)\n        : (acc, x) => (x ? reduced(true) : acc));\n}\n","import { reducer } from \"../reduce\";\nexport function str(sep, xs) {\n    sep = sep || \"\";\n    let first = true;\n    return xs\n        ? [...xs].join(sep)\n        : reducer(() => \"\", (acc, x) => ((acc = first ? acc + x : acc + sep + x), (first = false), acc));\n}\n","import { __mathop } from \"../internal/mathop\";\nexport function sub(...args) {\n    return __mathop(sub, (acc, x) => acc - x, 0, args);\n}\n","import { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function benchmark(src) {\n    return src\n        ? iterator1(benchmark(), src)\n        : (rfn) => {\n            const r = rfn[2];\n            let prev = Date.now();\n            return compR(rfn, (acc, _) => {\n                const t = Date.now();\n                const x = t - prev;\n                prev = t;\n                return r(acc, x);\n            });\n        };\n}\n","import { compR } from \"../func/compr\";\nimport { ensureReduced, isReduced, unreduced } from \"../reduced\";\n/**\n * Transducer to concatenate iterable values. Iterates over each input\n * and emits individual values down stream, therefore removing one level\n * of nesting from the input. If, during processing, the transducer is\n * given a wrapped `reduced()` input iterable, it will still be\n * processed as normal, but then immediately triggers early termination\n * by wrapping its own result in `reduced()`. E.g. this behavior allows\n * a `mapcat()` user functions to benefit from `reduced` results.\n *\n * ```\n * [...iterator(comp(map((x) => [x, x]), cat()), [1, 2, 3, 4])]\n * // [ 1, 1, 2, 2, 3, 3, 4, 4 ]\n *\n * [...iterator(\n *   comp(\n *     mapIndexed((i, x) => [[i], [x, x]]),\n *     cat(),\n *     cat()\n *   ),\n *   \"abc\"\n * )]\n * // [ 0, 'a', 'a', 1, 'b', 'b', 2, 'c', 'c' ]\n *\n * [...mapcat((x)=>(x > 1 ? reduced([x, x]) : [x, x]), [1, 2, 3, 4])]\n * // [ 1, 1, 2, 2 ]\n * ```\n *\n * @see thi.ng/transducers/iter/concat\n * @see thi.ng/transducers/xform/mapcat\n */\nexport const cat = () => (rfn) => {\n    const r = rfn[2];\n    return compR(rfn, (acc, x) => {\n        if (x) {\n            for (let y of unreduced(x)) {\n                acc = r(acc, y);\n                if (isReduced(acc)) {\n                    break;\n                }\n            }\n        }\n        return isReduced(x) ? ensureReduced(acc) : acc;\n    });\n};\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nimport { ensureReduced } from \"../reduced\";\nexport function converge(...args) {\n    return ($iter(converge, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const pred = args[0];\n            let prev = SEMAPHORE;\n            let done = false;\n            return compR(rfn, (acc, x) => {\n                if (done || (prev !== SEMAPHORE && pred(prev, x))) {\n                    done = true;\n                    return ensureReduced(r(acc, x));\n                }\n                prev = x;\n                return r(acc, x);\n            });\n        }));\n}\n","import { isReduced } from \"../reduced\";\nexport function range(from, to, step) {\n    return new Range(from, to, step);\n}\n/**\n * Simple class wrapper around given range interval and implementing\n * `Iterable` and `IReducible` interfaces, the latter is used to\n * accelerate use with `reduce`.\n */\nexport class Range {\n    constructor(from, to, step) {\n        if (from === undefined) {\n            from = 0;\n            to = Infinity;\n        }\n        else if (to === undefined) {\n            to = from;\n            from = 0;\n        }\n        step = step === undefined ? (from < to ? 1 : -1) : step;\n        this.from = from;\n        this.to = to;\n        this.step = step;\n    }\n    *[Symbol.iterator]() {\n        const step = this.step;\n        const to = this.to;\n        let from = this.from;\n        if (step > 0) {\n            while (from < to) {\n                yield from;\n                from += step;\n            }\n        }\n        else if (step < 0) {\n            while (from > to) {\n                yield from;\n                from += step;\n            }\n        }\n    }\n    $reduce(rfn, acc) {\n        const step = this.step;\n        if (step > 0) {\n            for (let i = this.from, n = this.to; i < n && !isReduced(acc); i += step) {\n                acc = rfn(acc, i);\n            }\n        }\n        else {\n            for (let i = this.from, n = this.to; i > n && !isReduced(acc); i += step) {\n                acc = rfn(acc, i);\n            }\n        }\n        return acc;\n    }\n}\n","import { illegalArity } from \"@thi.ng/errors\";\nimport { range } from \"./range\";\nexport function* range2d(...args) {\n    let fromX, toX, stepX;\n    let fromY, toY, stepY;\n    switch (args.length) {\n        case 6:\n            stepX = args[4];\n            stepY = args[5];\n        case 4:\n            [fromX, toX, fromY, toY] = args;\n            break;\n        case 2:\n            [toX, toY] = args;\n            fromX = fromY = 0;\n            break;\n        default:\n            illegalArity(args.length);\n    }\n    const rx = range(fromX, toX, stepX);\n    for (let y of range(fromY, toY, stepY)) {\n        for (let x of rx) {\n            yield [x, y];\n        }\n    }\n}\n","export function* zip(...src) {\n    const iters = src.map((s) => s[Symbol.iterator]());\n    while (true) {\n        const tuple = [];\n        for (let i of iters) {\n            let v = i.next();\n            if (v.done) {\n                return;\n            }\n            tuple.push(v.value);\n        }\n        yield tuple;\n    }\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nimport { range } from \"../iter/range\";\nimport { range2d } from \"../iter/range2d\";\nimport { zip } from \"../iter/zip\";\nimport { iterator1 } from \"../iterator\";\nimport { add } from \"../rfn/add\";\nimport { transduce } from \"../transduce\";\nimport { map } from \"./map\";\nexport const buildKernel1d = (weights, w) => {\n    const w2 = w >> 1;\n    return [...zip(weights, range(-w2, w2 + 1))];\n};\nexport const buildKernel2d = (weights, w, h) => {\n    const w2 = w >> 1;\n    const h2 = h >> 1;\n    return [...zip(weights, range2d(-w2, w2 + 1, -h2, h2 + 1))];\n};\nconst kernelLookup1d = (src, x, width, wrap, border) => wrap\n    ? ({ 0: w, 1: ox }) => {\n        const xx = x < -ox ? width + ox : x >= width - ox ? ox - 1 : x + ox;\n        return w * src[xx];\n    }\n    : ({ 0: w, 1: ox }) => {\n        return x < -ox || x >= width - ox ? border : w * src[x + ox];\n    };\nconst kernelLookup2d = (src, x, y, width, height, wrap, border) => wrap\n    ? ({ 0: w, 1: { 0: ox, 1: oy } }) => {\n        const xx = x < -ox ? width + ox : x >= width - ox ? ox - 1 : x + ox;\n        const yy = y < -oy ? height + oy : y >= height - oy ? oy - 1 : y + oy;\n        return w * src[yy * width + xx];\n    }\n    : ({ 0: w, 1: { 0: ox, 1: oy } }) => {\n        return x < -ox || y < -oy || x >= width - ox || y >= height - oy\n            ? border\n            : w * src[(y + oy) * width + x + ox];\n    };\nconst kernelError = () => illegalArgs(`no kernel or kernel config`);\nexport function convolve1d(opts, indices) {\n    if (indices) {\n        return iterator1(convolve1d(opts), indices);\n    }\n    const { src, width } = opts;\n    const wrap = opts.wrap !== false;\n    const border = opts.border || 0;\n    const rfn = opts.reduce || add;\n    let kernel = opts.kernel;\n    if (!kernel) {\n        !(opts.weights && opts.kwidth) && kernelError();\n        kernel = buildKernel1d(opts.weights, opts.kwidth);\n    }\n    return map((p) => transduce(map(kernelLookup1d(src, p, width, wrap, border)), rfn(), kernel));\n}\nexport function convolve2d(opts, indices) {\n    if (indices) {\n        return iterator1(convolve2d(opts), indices);\n    }\n    const { src, width, height } = opts;\n    const wrap = opts.wrap !== false;\n    const border = opts.border || 0;\n    const rfn = opts.reduce || add;\n    let kernel = opts.kernel;\n    if (!kernel) {\n        !(opts.weights && opts.kwidth && opts.kheight) && kernelError();\n        kernel = buildKernel2d(opts.weights, opts.kwidth, opts.kheight);\n    }\n    return map((p) => transduce(map(kernelLookup2d(src, p[0], p[1], width, height, wrap, border)), rfn(), kernel));\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function dedupe(...args) {\n    return ($iter(dedupe, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const equiv = args[0];\n            let prev = SEMAPHORE;\n            return compR(rfn, equiv\n                ? (acc, x) => {\n                    acc =\n                        prev !== SEMAPHORE && equiv(prev, x)\n                            ? acc\n                            : r(acc, x);\n                    prev = x;\n                    return acc;\n                }\n                : (acc, x) => {\n                    acc = prev === x ? acc : r(acc, x);\n                    prev = x;\n                    return acc;\n                });\n        }));\n}\n","import { delayed as _delayed } from \"@thi.ng/compose\";\nimport { map } from \"./map\";\n/**\n * Yields transducer which wraps incoming values in promises, which each\n * resolve after specified delay time (in ms).\n *\n * **Only to be used in async contexts and NOT with `transduce`\n * directly.**\n *\n * @param t\n */\nexport const delayed = (t) => map((x) => _delayed(x, t));\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function distinct(...args) {\n    return ($iter(distinct, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const opts = (args[0] || {});\n            const key = opts.key;\n            const seen = (opts.cache || (() => new Set()))();\n            return compR(rfn, key\n                ? (acc, x) => {\n                    const k = key(x);\n                    return !seen.has(k) ? (seen.add(k), r(acc, x)) : acc;\n                }\n                : (acc, x) => !seen.has(x) ? (seen.add(x), r(acc, x)) : acc);\n        }));\n}\n","import { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function throttle(pred, src) {\n    return src\n        ? iterator1(throttle(pred), src)\n        : (rfn) => {\n            const r = rfn[2];\n            const _pred = pred();\n            return compR(rfn, (acc, x) => (_pred(x) ? r(acc, x) : acc));\n        };\n}\n","import { throttle } from \"./throttle\";\nimport { iterator1 } from \"../iterator\";\nexport function dropNth(n, src) {\n    if (src) {\n        return iterator1(dropNth(n), src);\n    }\n    n = Math.max(0, n - 1);\n    return throttle(() => {\n        let skip = n;\n        return () => (skip-- > 0 ? true : ((skip = n), false));\n    });\n}\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function dropWhile(...args) {\n    return ($iter(dropWhile, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const pred = args[0];\n            let ok = true;\n            return compR(rfn, (acc, x) => ((ok = ok && pred(x)) ? acc : r(acc, x)));\n        }));\n}\n","import { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function drop(n, src) {\n    return src\n        ? iterator1(drop(n), src)\n        : (rfn) => {\n            const r = rfn[2];\n            let m = n;\n            return compR(rfn, (acc, x) => (m > 0 ? (m--, acc) : r(acc, x)));\n        };\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function duplicate(n = 1, src) {\n    return src\n        ? iterator(duplicate(n), src)\n        : (rfn) => {\n            const r = rfn[2];\n            return compR(rfn, (acc, x) => {\n                for (let i = n; i >= 0 && !isReduced(acc); i--) {\n                    acc = r(acc, x);\n                }\n                return acc;\n            });\n        };\n}\n","import { iterator1 } from \"../iterator\";\nimport { compR } from \"../func/compr\";\nexport function filter(pred, src) {\n    return src\n        ? iterator1(filter(pred), src)\n        : (rfn) => {\n            const r = rfn[2];\n            return compR(rfn, (acc, x) => (pred(x) ? r(acc, x) : acc));\n        };\n}\n","import { compare, compareNumAsc } from \"@thi.ng/compare\";\n/**\n * Returns the supposed index of `x` in pre-sorted array-like collection\n * `buf`. If `x` can't be found, returns `-index-1`, representing the\n * negative of the index, were `x` to be inserted into `buf`. E.g if the\n * return value is -3, `x` would appear/insert at index 2.\n *\n * ```\n * binarySearch([2, 4, 6], 5);\n * // -3\n * ```\n *\n * The optional `key` function is used to obtain the actual sort value\n * of `x` and each array item (default: identity).\n *\n * The optional `cmp` comparator (default: thi.ng/compare) is then used\n * to identify the index of `x`. The sort order of `buf` MUST be\n * compatible with that of `cmp`.\n *\n * @param buf\n * @param x\n * @param key\n * @param cmp\n */\nexport const binarySearch = (buf, x, key = (x) => x, cmp = compare) => {\n    const kx = key(x);\n    let low = 0;\n    let high = buf.length - 1;\n    while (low <= high) {\n        const mid = (low + high) >>> 1;\n        const c = cmp(key(buf[mid]), kx);\n        if (c < 0) {\n            low = mid + 1;\n        }\n        else if (c > 0) {\n            high = mid - 1;\n        }\n        else {\n            return mid;\n        }\n    }\n    return -low - 1;\n};\n/**\n * Similar to `binarySearch()`, but optimized for numeric arrays and\n * supporting custom comparators (default: `compareNumAsc` from\n * thi.ng/compare pkg).\n *\n * @param buf\n * @param x\n * @param cmp\n */\nexport const binarySearchNumeric = (buf, x, cmp = compareNumAsc) => {\n    let low = 0;\n    let high = buf.length - 1;\n    while (low <= high) {\n        const mid = (low + high) >>> 1;\n        const c = cmp(buf[mid], x);\n        if (c < 0) {\n            low = mid + 1;\n        }\n        else if (c > 0) {\n            high = mid - 1;\n        }\n        else {\n            return mid;\n        }\n    }\n    return -low - 1;\n};\n","import { equiv as _eq } from \"@thi.ng/equiv\";\n/**\n * Returns true if the last items of `buf` are the same items as in\n * `needle`. This means `buf` should have at least the same length as\n * `needle` for this to be true.\n *\n * By default, uses thi.ng/equiv for equality checking.\n *\n * @see startsWith\n *\n * @param buf\n * @param needle\n * @param equiv\n */\nexport const endsWith = (buf, needle, equiv = _eq) => {\n    let i = buf.length;\n    let j = needle.length;\n    if (i < j)\n        return false;\n    while ((--i, --j >= 0 && equiv(buf[i], needle[j]))) { }\n    return j < 0;\n};\n","import { illegalArgs } from \"@thi.ng/errors\";\n/**\n * Attempts to obtain an iterator from `x` and throws error if `x` is\n * not iterable.\n *\n * @param x\n */\nexport const ensureIterable = (x) => {\n    (x == null || !x[Symbol.iterator]) &&\n        illegalArgs(`value is not iterable: ${x}`);\n    return x;\n};\n","import { isArray, isArrayLike } from \"@thi.ng/checks\";\nimport { ensureIterable } from \"./ensure-iterable\";\n/**\n * Helper function to avoid unnecessary copying if `x` is already an\n * array. First checks if `x` is an array and if so returns it. Else\n * attempts to obtain an iterator from `x` and if successful collects it\n * as array and returns it. Throws error if `x` isn't iterable.\n *\n * @param x\n */\nexport const ensureArray = (x) => isArray(x) ? x : [...ensureIterable(x)];\n/**\n * Similar to `ensureArray()`, but for `ArrayLike` types.\n *\n * @see ensureArray\n *\n * @param x\n */\nexport const ensureArrayLike = (x) => isArrayLike(x) ? x : [...ensureIterable(x)];\n","import { equiv as _equiv } from \"@thi.ng/equiv\";\n/**\n * Similar to `Array.find()`, but uses thi.ng/equiv as default\n * predicate.\n *\n * @param src\n * @param x\n * @param equiv\n */\nexport const find = (src, x, equiv = _equiv) => {\n    const i = findIndex(src, x, equiv);\n    return i !== -1 ? src[i] : undefined;\n};\n/**\n * Similar to `Array.findIndex()`, but uses thi.ng/equiv as default\n * predicate.\n *\n * @param src\n * @param x\n * @param equiv\n */\nexport const findIndex = (src, x, equiv = _equiv) => {\n    for (let i = src.length; --i >= 0;) {\n        if (equiv(x, src[i]))\n            return i;\n    }\n    return -1;\n};\n","import { equiv as _eq } from \"@thi.ng/equiv\";\n/**\n * Performs a fuzzy search of `query` in `domain` and returns `true` if\n * successful.\n *\n * The optional `equiv` predicate can be used to customize\n * item equality checking. Uses @thi.ng/equiv by default.\n *\n * Adapted and generalized from:\n * https://github.com/bevacqua/fufuzzyzzysearch (MIT)\n *\n * @see thi.ng/transducers/xform/filterFuzzy\n *\n * @param domain\n * @param query\n * @param equiv\n */\nexport const fuzzyMatch = (domain, query, equiv = _eq) => {\n    const nd = domain.length;\n    const nq = query.length;\n    if (nq > nd) {\n        return false;\n    }\n    if (nq === nd) {\n        return equiv(query, domain);\n    }\n    next: for (let i = 0, j = 0; i < nq; i++) {\n        const q = query[i];\n        while (j < nd) {\n            if (equiv(domain[j++], q)) {\n                continue next;\n            }\n        }\n        return false;\n    }\n    return true;\n};\n","import { compare } from \"@thi.ng/compare\";\n/**\n * Returns true if the given array and its elements in the selected\n * index range (entire array, by default) are in the order defined by\n * the given comparator (thi.ng/compare by default). Always returns\n * true, if effective index range (or array length) has less than two\n * elements. No bounds checking.\n *\n * ```\n * isSorted([3, 2, 1])\n * // false\n *\n * // w/ custom comparator\n * isSorted([3, 2, 1], (a, b) => b - a)\n * // true\n * ```\n *\n * @param arr\n * @param cmp\n * @param start\n * @param end\n */\nexport const isSorted = (arr, cmp = compare, start = 0, end = arr.length) => {\n    let prev = arr[start];\n    while (++start < end) {\n        const curr = arr[start];\n        if (cmp(prev, curr) > 0)\n            return false;\n        prev = curr;\n    }\n    return true;\n};\n","/**\n * Returns iterator of nullable array w/ optional index range support\n * and/or reverse iteration order. The default range covers the entire\n * array.\n *\n * @remarks\n * If `start` > `end`, yields values in reverse order. No bounds\n * checking is performed.\n *\n * @param buf - array or null\n * @param start - start index\n * @param end - end index (excluded)\n */\nexport function* arrayIterator(buf, start = 0, end) {\n    if (!buf)\n        return;\n    start = start;\n    end === undefined && (end = buf.length);\n    const step = start <= end ? 1 : -1;\n    for (; start !== end; start += step) {\n        yield buf[start];\n    }\n}\n","/**\n * Returns last element of given array or `undefined` if array is empty.\n *\n * @param x\n */\nexport const peek = (x) => x[x.length - 1];\n","/**\n * Swaps values at index `x`/`y` in given array.\n *\n * @param arr\n * @param x\n * @param y\n */\nexport const swap = (arr, x, y) => {\n    const t = arr[x];\n    arr[x] = arr[y];\n    arr[y] = t;\n};\n/**\n * Higher-order version of `swap` for swapping elements in multiple\n * arrays at once. The returned function takes the same args as `swap`,\n * and when called swaps 2 elements in the array given to that function\n * AND in the arrays given to `multiSwap` itself. Provides fast routes\n * for up to 3 extra arrays, then falls back to a loop-based approach.\n *\n * ```\n * a = [2, 1];\n * b = [20, 10];\n * c = [40, 30];\n *\n * ms = multiSwap(b, c);\n * ms(a, 0, 1);\n *\n * // a: [1, 2]\n * // b: [10, 20]\n * // c: [30, 40]\n * ```\n *\n * @param xs\n */\nexport const multiSwap = (...xs) => {\n    const [b, c, d] = xs;\n    const n = xs.length;\n    switch (n) {\n        case 0:\n            return swap;\n        case 1:\n            return (a, x, y) => {\n                swap(a, x, y);\n                swap(b, x, y);\n            };\n        case 2:\n            return (a, x, y) => {\n                swap(a, x, y);\n                swap(b, x, y);\n                swap(c, x, y);\n            };\n        case 3:\n            return (a, x, y) => {\n                swap(a, x, y);\n                swap(b, x, y);\n                swap(c, x, y);\n                swap(d, x, y);\n            };\n        default:\n            return (a, x, y) => {\n                swap(a, x, y);\n                for (let i = n; --i >= 0;)\n                    swap(xs[i], x, y);\n            };\n    }\n};\n","import { compare } from \"@thi.ng/compare\";\nimport { swap } from \"./swap\";\n// prettier-ignore\nexport function quickSort(arr, _cmp = compare, _swap = swap, start = 0, end = arr.length - 1) {\n    if (start < end) {\n        const pivot = arr[start + ((end - start) >> 1)];\n        let s = start - 1;\n        let e = end + 1;\n        while (true) {\n            do {\n                s++;\n            } while (_cmp(arr[s], pivot) < 0);\n            do {\n                e--;\n            } while (_cmp(arr[e], pivot) > 0);\n            if (s >= e)\n                break;\n            _swap(arr, s, e);\n        }\n        quickSort(arr, _cmp, _swap, start, e);\n        quickSort(arr, _cmp, _swap, e + 1, end);\n    }\n    return arr;\n}\n","const INV_MAX = 1 / 0xffffffff;\nexport class ARandom {\n    float(norm = 1) {\n        return this.int() * INV_MAX * norm;\n    }\n    norm(norm = 1) {\n        return this.int() * INV_MAX * norm * 2 - norm;\n    }\n    minmax(min, max) {\n        return this.float() * (max - min) + min;\n    }\n    /**\n     * Returns approx. normal distribution using CLT.\n     *\n     * https://en.wikipedia.org/wiki/Central_limit_theorem\n     *\n     * @param n\n     * @param offset\n     * @param scale\n     */\n    gaussian(n = 10, offset = -0.5, scale = 1) {\n        let sum = 0;\n        let m = n;\n        while (m-- > 0)\n            sum += this.float(scale);\n        return sum / n + offset;\n    }\n}\n","import { ARandom } from \"./api\";\n// https://github.com/thi-ng/ct-head/blob/master/random.h\n// https://gist.github.com/voidqk/d112165a26b45244a65298933c0349a4\nconst DEFAULT_SEED = 0xdecafbad;\nexport class Smush32 extends ARandom {\n    constructor(seed = DEFAULT_SEED) {\n        super();\n        this.buffer = new Uint32Array([seed, 0]);\n    }\n    copy() {\n        const gen = new Smush32();\n        gen.buffer.set(this.buffer);\n        return gen;\n    }\n    seed(s) {\n        this.buffer.set([s, 0]);\n        return this;\n    }\n    int() {\n        const b = this.buffer;\n        const m = 0x5bd1e995;\n        const k = (b[1]++ * m) >>> 0;\n        const s = (b[0] = ((k ^ (k >> 24) ^ ((b[0] * m) >>> 0)) * m) >>> 0);\n        return (s ^ (s >>> 13)) >>> 0;\n    }\n}\n","import { ARandom } from \"./api\";\nconst random = Math.random;\nexport class SystemRandom extends ARandom {\n    int() {\n        return (random() * 0xffffffff) >>> 0;\n    }\n    float(norm = 1) {\n        return random() * norm;\n    }\n}\nexport const SYSTEM = new SystemRandom();\n","import { ARandom } from \"./api\";\n// https://en.wikipedia.org/wiki/Xorshift\nconst DEFAULT_SEED = [0xdecafbad, 0x2fa9d75b, 0xe41f67e3, 0x5c83ec1a];\nexport class XorShift128 extends ARandom {\n    constructor(seed = DEFAULT_SEED) {\n        super();\n        this.buffer = new Uint32Array(4);\n        this.seed(seed);\n    }\n    copy() {\n        return new XorShift128(this.buffer);\n    }\n    bytes() {\n        return new Uint8Array(this.buffer.buffer);\n    }\n    seed(seed) {\n        this.buffer.set(seed);\n        return this;\n    }\n    int() {\n        const s = this.buffer;\n        let t = s[3];\n        let w;\n        t ^= t << 11;\n        t ^= t >>> 8;\n        s[3] = s[2];\n        s[2] = s[1];\n        w = s[1] = s[0];\n        return (s[0] = (t ^ w ^ (w >>> 19)) >>> 0);\n    }\n}\n","import { ARandom } from \"./api\";\n// https://en.wikipedia.org/wiki/Xorshift#xorwow\nconst DEFAULT_SEED = [\n    0xdecafbad,\n    0x2fa9d75b,\n    0xe41f67e3,\n    0x5c83ec1a,\n    0xf69a5c71\n];\nexport class XorWow extends ARandom {\n    constructor(seed = DEFAULT_SEED) {\n        super();\n        this.buffer = new Uint32Array(5);\n        this.seed(seed);\n    }\n    copy() {\n        return new XorWow(this.buffer);\n    }\n    seed(seed) {\n        this.buffer.set(seed);\n        return this;\n    }\n    bytes() {\n        return new Uint8Array(this.buffer.buffer);\n    }\n    int() {\n        const s = this.buffer;\n        let t = s[3];\n        let w;\n        t ^= t >>> 2;\n        t ^= t << 1;\n        s[3] = s[2];\n        s[2] = s[1];\n        w = s[1] = s[0];\n        t ^= w;\n        t ^= w << 4;\n        s[0] = t;\n        return (t + (s[4] += 0x587c5)) >>> 0;\n    }\n}\n","import { ARandom } from \"./api\";\n// https://github.com/MersenneTwister-Lab/XSadd/blob/master/xsadd.h\nconst DEFAULT_SEED = 0xdecafbad;\nexport class XsAdd extends ARandom {\n    constructor(seed = DEFAULT_SEED) {\n        super();\n        this.buffer = new Uint32Array(4);\n        this.seed(seed);\n    }\n    bytes() {\n        return new Uint8Array(this.buffer.buffer);\n    }\n    copy() {\n        const gen = new XsAdd();\n        gen.buffer.set(this.buffer);\n        return gen;\n    }\n    seed(seed) {\n        const s = this.buffer;\n        s.set([seed, 0, 0, 0]);\n        for (let j = 0, i = 1; i < 8; j = i++) {\n            let x = (s[j & 3] ^ (s[j & 3] >>> 30)) >>> 0;\n            x = (0x8965 * x + (((0x6c07 * x) & 0xffff) << 16)) >>> 0;\n            s[i & 3] ^= (i + x) >>> 0;\n        }\n        return this;\n    }\n    int() {\n        const s = this.buffer;\n        let t = s[0];\n        t ^= t << 15;\n        t ^= t >>> 18;\n        t ^= s[3] << 11;\n        s[0] = s[1];\n        s[1] = s[2];\n        s[2] = s[3];\n        s[3] = t;\n        return (t + s[2]) >>> 0;\n    }\n}\n","import { SYSTEM } from \"./system\";\n/**\n * Generates and returns a random string of `len` characters (default\n * 4), plus optional given `prefix` and using only provided `syms`\n * characters (default lowercase a-z).\n *\n * ```\n * randomID()\n * \"qgdt\"\n *\n * randomID(8, \"id-\", \"0123456789ABCDEF\")\n * \"id-94EF6E1A\"\n * ```\n *\n * @param len\n * @param prefix\n * @param syms\n * @param rnd\n */\nexport const randomID = (len = 4, prefix = \"\", syms = \"abcdefghijklmnopqrstuvwxyz\", rnd = SYSTEM) => {\n    for (const n = syms.length; --len >= 0;) {\n        prefix += syms[rnd.float(n) | 0];\n    }\n    return prefix;\n};\n","import { assert } from \"@thi.ng/api\";\nimport { SYSTEM } from \"./system\";\n/**\n * Returns a no-arg function which produces a random choice of given\n * weighted `choices` and using given `IRandom` instance (default:\n * `SYSTEM`). If `weights` are given, it must be the same size as\n * `choices`. If omitted, each choice will have same probability.\n *\n * https://www.electricmonk.nl/log/2009/12/23/weighted-random-distribution/\n *\n * @param choices\n * @param weights\n */\nexport const weightedRandom = (choices, weights, rnd = SYSTEM) => {\n    const n = choices.length;\n    assert(n > 0, \"no choices given\");\n    const opts = choices\n        .map(weights\n        ? (x, i) => [x, weights[i]]\n        : (x) => [x, 1])\n        .sort((a, b) => b[1] - a[1]);\n    const total = opts.reduce((acc, o) => acc + o[1], 0);\n    assert(total > 0, \"no choices given\");\n    return () => {\n        const r = rnd.float(total);\n        let sum = total;\n        for (let i = 0; i < n; i++) {\n            sum -= opts[i][1];\n            if (sum <= r) {\n                return opts[i][0];\n            }\n        }\n        return undefined;\n    };\n};\n","export * from \"./api\";\nexport * from \"./smush32\";\nexport * from \"./system\";\nexport * from \"./xorshift128\";\nexport * from \"./xorwow\";\nexport * from \"./xsadd\";\nexport * from \"./random-id\";\nexport * from \"./weighted-random\";\n","import { assert } from \"@thi.ng/api\";\nimport { SYSTEM } from \"@thi.ng/random\";\n/**\n * Shuffles the items in the given index range of array `buf` using\n * Fisher-yates and optional `rnd` PRNG. If neither `start` / `end` are\n * given, the entire array will be shuffled. Mutates original array.\n *\n * @param buf\n * @param n\n * @param rnd\n */\nexport const shuffleRange = (buf, start = 0, end = buf.length, rnd = SYSTEM) => {\n    assert(start >= 0 && end >= start && end <= buf.length, `illegal range ${start}..${end}`);\n    let n = end - start;\n    const l = n;\n    if (l > 1) {\n        while (--n >= 0) {\n            const a = (start + rnd.float(l)) | 0;\n            const b = (start + rnd.float(l)) | 0;\n            const t = buf[a];\n            buf[a] = buf[b];\n            buf[b] = t;\n        }\n    }\n    return buf;\n};\n/**\n * Applies `shuffleRange()` to the given array. If `n` is given, only\n * the first `n` items are shuffled. Mutates original array.\n *\n * @see shuffleRange\n *\n * @param buf\n * @param n\n * @param rnd\n */\nexport const shuffle = (buf, n = buf.length, rnd = SYSTEM) => shuffleRange(buf, 0, n, rnd);\n","import { equiv as _eq } from \"@thi.ng/equiv\";\n/**\n * Returns true if the first items of `buf` are the same items as in\n * `needle`. This means `buf` should have at least the same length as\n * `needle` for this to be true.\n *\n * By default, uses thi.ng/equiv for equality checking.\n *\n * @see endsWith\n *\n * @param buf\n * @param needle\n * @param equiv\n */\nexport const startsWith = (buf, needle, equiv = _eq) => {\n    let i = buf.length;\n    let j = needle.length;\n    if (i < j)\n        return false;\n    while (-j >= 0 && equiv(buf[j], needle[j])) { }\n    return j < 0;\n};\n","/**\n * Returns optimized function to immutably select, repeat, reshape and /\n * or reorder array / object values in the specified index order. Fast\n * paths for up to 8 indices are provided, before a loop based approach\n * is used.\n *\n * ```\n * swizzle([0, 0, 0])([1, 2, 3, 4])    // [ 1, 1, 1 ]\n * swizzle([1, 1, 3, 3])([1, 2, 3, 4]) // [ 2, 2, 4, 4 ]\n * swizzle([2, 0])([1, 2, 3])          // [ 3, 1 ]\n * ```\n *\n * Objects can be used as input to the generated function, but the\n * result will always be in array form.\n *\n * ```\n * swizzle([\"a\", \"c\", \"b\"])({a: 1, b: 2, c: 3}) // [ 1, 3, 2 ]\n * ```\n *\n * @param order indices\n */\nexport const swizzle = (order) => {\n    const [a, b, c, d, e, f, g, h] = order;\n    switch (order.length) {\n        case 0:\n            return () => [];\n        case 1:\n            return (x) => [x[a]];\n        case 2:\n            return (x) => [x[a], x[b]];\n        case 3:\n            return (x) => [x[a], x[b], x[c]];\n        case 4:\n            return (x) => [x[a], x[b], x[c], x[d]];\n        case 5:\n            return (x) => [x[a], x[b], x[c], x[d], x[e]];\n        case 6:\n            return (x) => [x[a], x[b], x[c], x[d], x[e], x[f]];\n        case 7:\n            return (x) => [x[a], x[b], x[c], x[d], x[e], x[f], x[g]];\n        case 8:\n            return (x) => [x[a], x[b], x[c], x[d], x[e], x[f], x[g], x[h]];\n        default:\n            return (x) => {\n                const res = [];\n                for (let i = order.length; --i >= 0;) {\n                    res[i] = x[order[i]];\n                }\n                return res;\n            };\n    }\n};\n","export * from \"./binary-search\";\nexport * from \"./ends-with\";\nexport * from \"./ensure-array\";\nexport * from \"./ensure-iterable\";\nexport * from \"./find\";\nexport * from \"./fuzzy-match\";\nexport * from \"./is-sorted\";\nexport * from \"./iterator\";\nexport * from \"./peek\";\nexport * from \"./quicksort\";\nexport * from \"./shuffle\";\nexport * from \"./starts-with\";\nexport * from \"./swap\";\nexport * from \"./swizzle\";\n","import { fuzzyMatch } from \"@thi.ng/arrays\";\nimport { $iter } from \"../iterator\";\nimport { filter } from \"./filter\";\nexport function filterFuzzy(...args) {\n    const iter = args.length > 1 && $iter(filterFuzzy, args);\n    if (iter) {\n        return iter;\n    }\n    const query = args[0];\n    const { key, equiv } = (args[1] || {});\n    return filter((x) => fuzzyMatch(key != null ? key(x) : x, query, equiv));\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function flattenWith(fn, src) {\n    return src\n        ? iterator(flattenWith(fn), src)\n        : (rfn) => {\n            const reduce = rfn[2];\n            const flatten = (acc, x) => {\n                const xx = fn(x);\n                if (xx) {\n                    for (let y of xx) {\n                        acc = flatten(acc, y);\n                        if (isReduced(acc)) {\n                            break;\n                        }\n                    }\n                    return acc;\n                }\n                return reduce(acc, x);\n            };\n            return compR(rfn, flatten);\n        };\n}\n","import { flattenWith } from \"./flatten-with\";\nexport function flatten(src) {\n    return flattenWith((x) => x != null && x[Symbol.iterator] && typeof x !== \"string\"\n        ? x\n        : undefined, src);\n}\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function mapIndexed(...args) {\n    return ($iter(mapIndexed, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const fn = args[0];\n            let i = args[1] || 0;\n            return compR(rfn, (acc, x) => r(acc, fn(i++, x)));\n        }));\n}\n","import { $iter } from \"../iterator\";\nimport { mapIndexed } from \"./map-indexed\";\nexport function indexed(...args) {\n    const iter = $iter(indexed, args);\n    if (iter) {\n        return iter;\n    }\n    const from = args[0] || 0;\n    return mapIndexed((i, x) => [from + i, x]);\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function interleave(sep, src) {\n    return src\n        ? iterator(interleave(sep), src)\n        : (rfn) => {\n            const r = rfn[2];\n            const _sep = typeof sep === \"function\" ? sep : () => sep;\n            return compR(rfn, (acc, x) => {\n                acc = r(acc, _sep());\n                return isReduced(acc) ? acc : r(acc, x);\n            });\n        };\n}\n","import { comp as _comp } from \"@thi.ng/compose\";\nexport function comp(...fns) {\n    return _comp.apply(null, fns);\n}\n","/**\n * Yields sequence of `n+1` monotonically increasing numbers in the\n * closed interval (0.0 .. 1.0). If `n <= 0`, yields nothing.\n *\n * ```\n * [...normRange(4)]\n * // [0, 0.25, 0.5, 0.75, 1.0]\n * ```\n *\n * @param n number of steps\n * @param inclLast include last value (i.e. `1.0`)\n */\nexport function* normRange(n, inclLast = true) {\n    if (n > 0) {\n        for (let i = 0, m = inclLast ? n + 1 : n; i < m; i++) {\n            yield i / n;\n        }\n    }\n}\n","import { comp } from \"../func/comp\";\nimport { iterator } from \"../iterator\";\nimport { cat } from \"./cat\";\nimport { map } from \"./map\";\nexport function mapcat(fn, src) {\n    return src ? iterator(mapcat(fn), src) : comp(map(fn), cat());\n}\n","import { $iter, iterator } from \"../iterator\";\nexport function partition(...args) {\n    const iter = $iter(partition, args, iterator);\n    if (iter) {\n        return iter;\n    }\n    let size = args[0], all, step;\n    if (typeof args[1] == \"number\") {\n        step = args[1];\n        all = args[2];\n    }\n    else {\n        step = size;\n        all = args[1];\n    }\n    return ([init, complete, reduce]) => {\n        let buf = [];\n        let skip = 0;\n        return [\n            init,\n            (acc) => {\n                if (all && buf.length > 0) {\n                    acc = reduce(acc, buf);\n                    buf = [];\n                }\n                return complete(acc);\n            },\n            (acc, x) => {\n                if (skip <= 0) {\n                    if (buf.length < size) {\n                        buf.push(x);\n                    }\n                    if (buf.length === size) {\n                        acc = reduce(acc, buf);\n                        buf = step < size ? buf.slice(step) : [];\n                        skip = step - size;\n                    }\n                }\n                else {\n                    skip--;\n                }\n                return acc;\n            }\n        ];\n    };\n}\n","import { comp } from \"../func/comp\";\nimport { normRange } from \"../iter/norm-range\";\nimport { iterator } from \"../iterator\";\nimport { map } from \"./map\";\nimport { mapcat } from \"./mapcat\";\nimport { partition } from \"./partition\";\n// prettier-ignore\nexport function interpolate(fn, window, n, src) {\n    return src\n        ? iterator(interpolate(fn, window, n), src)\n        : comp(partition(window, 1), mapcat((chunk) => map((t) => fn(chunk, t), normRange(n, false))));\n}\n","export const PI = Math.PI;\nexport const TAU = PI * 2;\nexport const HALF_PI = PI / 2;\nexport const THIRD_PI = PI / 3;\nexport const QUARTER_PI = PI / 4;\nexport const SIXTH_PI = PI / 6;\nexport const INV_PI = 1 / PI;\nexport const INV_TAU = 1 / TAU;\nexport const INV_HALF_PI = 1 / HALF_PI;\nexport const DEG2RAD = PI / 180;\nexport const RAD2DEG = 180 / PI;\nexport const PHI = (1 + Math.sqrt(5)) / 2;\nexport const SQRT2 = Math.SQRT2;\nexport const SQRT3 = Math.sqrt(3);\nexport const SQRT2_2 = SQRT2 / 2;\nexport const SQRT2_3 = SQRT3 / 2;\nexport const THIRD = 1 / 3;\nexport const TWO_THIRD = 2 / 3;\nexport const SIXTH = 1 / 6;\nexport let EPS = 1e-6;\nexport var Crossing;\n(function (Crossing) {\n    /**\n     * lines A & B are equal\n     */\n    Crossing[Crossing[\"EQUAL\"] = 0] = \"EQUAL\";\n    /**\n     * lines A & B are flat (all same values)\n     */\n    Crossing[Crossing[\"FLAT\"] = 1] = \"FLAT\";\n    /**\n     * line A crossed under B\n     */\n    Crossing[Crossing[\"UNDER\"] = 2] = \"UNDER\";\n    /**\n     * line A crossed over B\n     */\n    Crossing[Crossing[\"OVER\"] = 3] = \"OVER\";\n    Crossing[Crossing[\"OTHER\"] = 4] = \"OTHER\";\n})(Crossing || (Crossing = {}));\n","import { EPS } from \"./api\";\nexport const absDiff = (x, y) => Math.abs(x - y);\nexport const sign = (x, eps = EPS) => (x > eps ? 1 : x < -eps ? -1 : 0);\n","import { DEG2RAD, HALF_PI, INV_HALF_PI, PI, RAD2DEG, TAU } from \"./api\";\n/**\n * Returns vector of `[sin(theta)*n, cos(theta)*n]`.\n *\n * @param theta\n * @param n\n */\nexport const sincos = (theta, n = 1) => [\n    Math.sin(theta) * n,\n    Math.cos(theta) * n\n];\n/**\n * Returns vector of `[cos(theta)*n, sin(theta)*n]`.\n *\n * @param theta\n * @param n\n */\nexport const cossin = (theta, n = 1) => [\n    Math.cos(theta) * n,\n    Math.sin(theta) * n\n];\n/**\n * Projects `theta` into [0 .. 2] interval.\n *\n * @param theta\n */\nexport const absTheta = (theta) => ((theta %= TAU), theta < 0 ? TAU + theta : theta);\nexport const absInnerAngle = (theta) => ((theta = Math.abs(theta)), theta > PI ? TAU - theta : theta);\n/**\n * Returns smallest absolute angle difference between `a` and `b`.\n * Result will be in [0 .. ] interval.\n *\n * @param a\n * @param b\n */\nexport const angleDist = (a, b) => absInnerAngle(absTheta((b % TAU) - (a % TAU)));\n/**\n * Like `Math.atan2`, but always returns angle in [0 .. TAU) interval.\n *\n * @param y\n * @param x\n */\nexport const atan2Abs = (y, x) => absTheta(Math.atan2(y, x));\n/**\n * Returns quadrant ID (0-3) of given angle (in radians).\n *\n * @param theta\n */\nexport const quadrant = (theta) => (absTheta(theta) * INV_HALF_PI) | 0;\n/**\n * Converts angle to degrees.\n *\n * @param theta angle in radians\n */\nexport const deg = (theta) => theta * RAD2DEG;\n/**\n * Converts angle to radians.\n *\n * @param theta angle in degrees\n */\nexport const rad = (theta) => theta * DEG2RAD;\n/**\n * Cosecant. Approaches `Infinity` for `theta` near multiples of .\n *\n * @param theta angle in radians\n */\nexport const csc = (theta) => 1 / Math.sin(theta);\n/**\n * Secant. Approaches `Infinity` for `theta` near /2  n\n *\n * @param theta angle in radians\n */\nexport const sec = (theta) => 1 / Math.cos(theta);\n/**\n * Cotangent. Approaches `Infinity` for `theta` near multiples of .\n *\n * @param theta angle in radians\n */\nexport const cot = (theta) => 1 / Math.tan(theta);\n/**\n * Law of Cosines. Takes length of two sides of a triangle and the inner\n * angle (in radians) between them. Returns length of third side.\n *\n * @param a\n * @param b\n * @param gamma\n */\nexport const loc = (a, b, gamma) => Math.sqrt(a * a + b * b - 2 * a * b * Math.cos(gamma));\n/**\n * Approximates cos(x) for x in [-1,1]\n *\n * @param x\n */\nexport const normCos = (x) => {\n    const x2 = x * x;\n    return 1.0 + x2 * (-4 + 2 * x2);\n};\nconst __fastCos = (x) => {\n    const x2 = x * x;\n    return 0.99940307 + x2 * (-0.49558072 + 0.03679168 * x2);\n};\n/**\n * Fast cosine approximation using `normCos()` (polynomial). Max. error\n * ~0.00059693\n *\n * In [0 .. 2] interval, approx. 18-20% faster than `Math.cos` on V8.\n *\n * @param theta in radians\n */\nexport const fastCos = (theta) => {\n    theta %= TAU;\n    theta < 0 && (theta = -theta);\n    switch ((theta * INV_HALF_PI) | 0) {\n        case 0:\n            return __fastCos(theta);\n        case 1:\n            return -__fastCos(PI - theta);\n        case 2:\n            return -__fastCos(theta - PI);\n        default:\n            return __fastCos(TAU - theta);\n    }\n};\n/**\n * @see fastCos\n *\n * @param theta in radians\n */\nexport const fastSin = (theta) => fastCos(HALF_PI - theta);\n","import { EPS } from \"./api\";\nconst abs = Math.abs;\nconst max = Math.max;\n/**\n * Checks if `|a - b| <= ` and adapts given epsilon value to the given\n * arguments:\n *\n *  is factored with the largest absolute value of `a` or `b` (but\n * never lesser than the given `eps` value):\n *\n * ` =  * max(1, |a|, |b|)`\n *\n * @param a left value\n * @param b right value\n * @param eps epsilon / tolerance, default `1e-6`\n */\nexport const eqDelta = (a, b, eps = EPS) => abs(a - b) <= eps * max(1, abs(a), abs(b));\n/**\n * Similar to `eqDelta()`, but used given `eps` as is.\n *\n * @param a left value\n * @param b right value\n * @param eps epsilon / tolerance, default `1e-6`\n */\nexport const eqDeltaFixed = (a, b, eps = EPS) => abs(a - b) <= eps;\n","import { EPS } from \"./api\";\nimport { eqDelta } from \"./eqdelta\";\n/**\n * Returns true if line A rises up over B.\n *\n * ```\n * b1  a2\n *   \\/\n *   /\\\n * a1  b2\n * ```\n *\n * @param a1\n * @param a2\n * @param b1\n * @param b2\n */\nexport const isCrossOver = (a1, a2, b1, b2) => a1 < b1 && a2 > b2;\n/**\n * Returns true if line A rises up over B.\n *\n * ```\n * a1  b2\n *   \\/\n *   /\\\n * b1  a2\n * ```\n *\n * @param a1\n * @param a2\n * @param b1\n * @param b2\n */\nexport const isCrossUnder = (a1, a2, b1, b2) => a1 > b1 && a2 < b2;\n/**\n * Returns `Crossing` classifier indicating the relationship of line A\n * to line B. The optional epsilon value is used to determine if both\n * lines are considered equal or flat.\n *\n * @see isCrossUp\n * @see isCrossDown\n * @see Crossing\n *\n * @param a1\n * @param a2\n * @param b1\n * @param b2\n * @param eps\n */\nexport const classifyCrossing = (a1, a2, b1, b2, eps = EPS) => {\n    if (isCrossOver(a1, a2, b1, b2)) {\n        return 3 /* OVER */;\n    }\n    else if (isCrossUnder(a1, a2, b1, b2)) {\n        return 2 /* UNDER */;\n    }\n    return eqDelta(a1, b1, eps) && eqDelta(a2, b2, eps)\n        ? eqDelta(a1, b2, eps)\n            ? 1 /* FLAT */\n            : 0 /* EQUAL */\n        : 4 /* OTHER */;\n};\n","/**\n * Returns true if `b` is a local minima, i.e. iff a > b and b < c.\n *\n * @param a\n * @param b\n * @param c\n */\nexport const isMinima = (a, b, c) => a > b && b < c;\n/**\n * Returns true if `b` is a local maxima, i.e. iff a < b and b > c.\n *\n * @param a\n * @param b\n * @param c\n */\nexport const isMaxima = (a, b, c) => a < b && b > c;\nconst index = (pred, values, from = 0, to = values.length) => {\n    to--;\n    for (let i = from + 1; i < to; i++) {\n        if (pred(values[i - 1], values[i], values[i + 1])) {\n            return i;\n        }\n    }\n    return -1;\n};\n/**\n * Returns index of the first local & internal minima found in given\n * `values` array, or -1 if no such minima exists. The search range can\n * be optionally defined via semi-open [from, to) index interval.\n *\n * @param values\n * @param from\n * @param to\n */\nexport const minimaIndex = (values, from = 0, to = values.length) => index(isMinima, values, from, to);\n/**\n * Returns index of the first local & internal maxima found in given\n * `values` array, or -1 if no such maxima exists. The search range can\n * be optionally defined via semi-open [from, to) index interval.\n *\n * @param values\n * @param from\n * @param to\n */\nexport const maximaIndex = (values, from = 0, to = values.length) => index(isMaxima, values, from, to);\nfunction* indices(fn, vals, from = 0, to = vals.length) {\n    while (from < to) {\n        const i = fn(vals, from, to);\n        if (i < 0)\n            return;\n        yield i;\n        from = i + 1;\n    }\n}\n/**\n * Returns an iterator yielding all minima indices in given `values`\n * array. The search range can be optionally defined via semi-open\n * [from, to) index interval.\n *\n * @param values\n * @param from\n * @param to\n */\nexport const minimaIndices = (values, from = 0, to = values.length) => indices(minimaIndex, values, from, to);\n/**\n * Returns an iterator yielding all maxima indices in given `values`\n * array. The search range can be optionally defined via semi-open\n * [from, to) index interval.\n *\n * @param values\n * @param from\n * @param to\n */\nexport const maximaIndices = (values, from = 0, to = values.length) => indices(minimaIndex, values, from, to);\n","/**\n * Clamps value `x` to given closed interval.\n *\n * @param x value to clamp\n * @param min lower bound\n * @param max upper bound\n */\nexport const clamp = (x, min, max) => x < min ? min : x > max ? max : x;\nexport const clamp01 = (x) => (x < 0 ? 0 : x > 1 ? 1 : x);\nexport const clamp11 = (x) => (x < -1 ? -1 : x > 1 ? 1 : x);\nexport const wrap = (x, min, max) => x < min ? x - min + max : x >= max ? x - max + min : x;\nexport const wrap01 = (x) => (x < 0 ? x + 1 : x >= 1 ? x - 1 : x);\nexport const wrap11 = (x) => (x < -1 ? x + 2 : x >= 1 ? x - 2 : x);\nexport const min2id = (a, b) => (a <= b ? 0 : 1);\nexport const min3id = (a, b, c) => a <= b ? (a <= c ? 0 : 2) : b <= c ? 1 : 2;\nexport const min4id = (a, b, c, d) => a <= b\n    ? a <= c\n        ? a <= d\n            ? 0\n            : 3\n        : c <= d\n            ? 2\n            : 3\n    : b <= c\n        ? b <= d\n            ? 1\n            : 3\n        : c <= d\n            ? 2\n            : 3;\nexport const max2id = (a, b) => (a >= b ? 0 : 1);\nexport const max3id = (a, b, c) => a >= b ? (a >= c ? 0 : 2) : b >= c ? 1 : 2;\nexport const max4id = (a, b, c, d) => a >= b\n    ? a >= c\n        ? a >= d\n            ? 0\n            : 3\n        : c >= d\n            ? 2\n            : 3\n    : b >= c\n        ? b >= d\n            ? 1\n            : 3\n        : c >= d\n            ? 2\n            : 3;\n/**\n * See `smax()`.\n *\n * @param a\n * @param b\n * @param k smooth exponent (MUST be > 0)\n */\nexport const smin = (a, b, k) => smax(a, b, -k);\n/**\n * Smooth maximum. Note: Result values will be slightly larger than max\n * value near max(a,b) + eps due to exponential decay. Higher `k` values\n * reduce the error, but also reduce the smoothing. Recommended k=16.\n *\n * https://en.wikipedia.org/wiki/Smooth_maximum\n *\n * @param a\n * @param b\n * @param k smooth exponent (MUST be > 0)\n */\nexport const smax = (a, b, k) => {\n    const ea = Math.exp(a * k);\n    const eb = Math.exp(b * k);\n    return (a * ea + b * eb) / (ea + eb);\n};\n/**\n * Same as `smin(smax(x, min, k), max, k)`.\n *\n * @param x\n * @param min\n * @param max\n * @param k\n */\nexport const sclamp = (x, min, max, k) => smin(smax(x, min, k), max, k);\nexport const absMin = (a, b) => Math.abs(a) < Math.abs(b) ? a : b;\nexport const absMax = (a, b) => Math.abs(a) > Math.abs(b) ? a : b;\n/**\n * http://www.musicdsp.org/showone.php?id=203\n *\n * @param e\n * @param x\n */\nexport const foldback = (e, x) => x < -e || x > e ? Math.abs(Math.abs((x - e) % (4 * e)) - 2 * e) - e : x;\n/**\n * Returns true iff `x` is in closed interval `[min .. max]`\n *\n * @param x\n * @param min\n * @param max\n */\nexport const inRange = (x, min, max) => x >= min && x <= max;\n/**\n * Returns true iff `x` is in open interval `(min .. max)`\n *\n * @param x\n * @param min\n * @param max\n */\nexport const inOpenRange = (x, min, max) => x > min && x < max;\n","import { clamp01, clamp11 } from \"./interval\";\n/**\n * Returns normalized value of `x` WRT to interval `a .. b`. If `a`\n * equals `b`, returns 0.\n *\n * @param x\n * @param a\n * @param b\n */\nexport const norm = (x, a, b) => b !== a ? (x - a) / (b - a) : 0;\nexport const fit = (x, a, b, c, d) => c + (d - c) * norm(x, a, b);\nexport const fitClamped = (x, a, b, c, d) => c + (d - c) * clamp01(norm(x, a, b));\nexport const fit01 = (x, a, b) => a + (b - a) * clamp01(x);\nexport const fit10 = (x, a, b) => b + (a - b) * clamp01(x);\nexport const fit11 = (x, a, b) => a + (b - a) * (0.5 + 0.5 * clamp11(x));\n","const M8 = 0xff;\nconst M16 = 0xffff;\nexport const signExtend8 = (a) => ((a &= M8), a & 0x80 ? a | ~M8 : a);\nexport const signExtend16 = (a) => ((a &= M16), a & 0x8000 ? a | ~M16 : a);\nexport const addi8 = (a, b) => signExtend8((a | 0) + (b | 0));\nexport const divi8 = (a, b) => signExtend8((a | 0) / (b | 0));\nexport const muli8 = (a, b) => signExtend8((a | 0) * (b | 0));\nexport const subi8 = (a, b) => signExtend8((a | 0) - (b | 0));\nexport const andi8 = (a, b) => signExtend8((a | 0) & (b | 0));\nexport const ori8 = (a, b) => signExtend8(a | 0 | (b | 0));\nexport const xori8 = (a, b) => signExtend8((a | 0) ^ (b | 0));\nexport const noti8 = (a) => signExtend8(~a);\n// prettier-ignore\nexport const lshifti8 = (a, b) => signExtend8((a | 0) << (b | 0));\n// prettier-ignore\nexport const rshifti8 = (a, b) => signExtend8((a | 0) >> (b | 0));\nexport const addi16 = (a, b) => signExtend16((a | 0) + (b | 0));\nexport const divi16 = (a, b) => signExtend16((a | 0) / (b | 0));\nexport const muli16 = (a, b) => signExtend16((a | 0) * (b | 0));\nexport const subi16 = (a, b) => signExtend16((a | 0) - (b | 0));\nexport const andi16 = (a, b) => signExtend16((a | 0) & (b | 0));\nexport const ori16 = (a, b) => signExtend16(a | 0 | (b | 0));\nexport const xori16 = (a, b) => signExtend16((a | 0) ^ (b | 0));\nexport const noti16 = (a) => signExtend16(~a);\n// prettier-ignore\nexport const lshifti16 = (a, b) => signExtend16((a | 0) << (b | 0));\n// prettier-ignore\nexport const rshifti16 = (a, b) => signExtend16((a | 0) >> (b | 0));\nexport const addi32 = (a, b) => ((a | 0) + (b | 0)) | 0;\nexport const divi32 = (a, b) => ((a | 0) / (b | 0)) | 0;\nexport const muli32 = (a, b) => ((a | 0) * (b | 0)) | 0;\nexport const subi32 = (a, b) => ((a | 0) - (b | 0)) | 0;\nexport const andi32 = (a, b) => (a | 0) & (b | 0);\nexport const ori32 = (a, b) => a | 0 | (b | 0);\nexport const xori32 = (a, b) => (a | 0) ^ (b | 0);\nexport const lshifti32 = (a, b) => (a | 0) << (b | 0);\nexport const rshifti32 = (a, b) => (a | 0) >> (b | 0);\nexport const noti32 = (a) => ~a;\n// prettier-ignore\nexport const addu8 = (a, b) => ((a & M8) + (b & M8)) & M8;\n// prettier-ignore\nexport const divu8 = (a, b) => ((a & M8) / (b & M8)) & M8;\n// prettier-ignore\nexport const mulu8 = (a, b) => ((a & M8) * (b & M8)) & M8;\n// prettier-ignore\nexport const subu8 = (a, b) => ((a & M8) - (b & M8)) & M8;\n// prettier-ignore\nexport const andu8 = (a, b) => ((a & M8) & (b & M8)) & M8;\n// prettier-ignore\nexport const oru8 = (a, b) => ((a & M8) | (b & M8)) & M8;\n// prettier-ignore\nexport const xoru8 = (a, b) => ((a & M8) ^ (b & M8)) & M8;\nexport const notu8 = (a) => ~a & M8;\nexport const lshiftu8 = (a, b) => ((a & M8) << (b & M8)) & M8;\nexport const rshiftu8 = (a, b) => ((a & M8) >>> (b & M8)) & M8;\n// prettier-ignore\nexport const addu16 = (a, b) => ((a & M16) + (b & M16)) & M16;\n// prettier-ignore\nexport const divu16 = (a, b) => ((a & M16) / (b & M16)) & M16;\n// prettier-ignore\nexport const mulu16 = (a, b) => ((a & M16) * (b & M16)) & M16;\n// prettier-ignore\nexport const subu16 = (a, b) => ((a & M16) - (b & M16)) & M16;\n// prettier-ignore\nexport const andu16 = (a, b) => ((a & M16) & (b & M16)) & M16;\n// prettier-ignore\nexport const oru16 = (a, b) => ((a & M16) | (b & M16)) & M16;\n// prettier-ignore\nexport const xoru16 = (a, b) => ((a & M16) ^ (b & M16)) & M16;\nexport const notu16 = (a) => ~a & M16;\n// prettier-ignore\nexport const lshiftu16 = (a, b) => ((a & M16) << (b & M16)) & M16;\n// prettier-ignore\nexport const rshiftu16 = (a, b) => ((a & M16) >>> (b & M16)) & M16;\nexport const addu32 = (a, b) => ((a >>> 0) + (b >>> 0)) >>> 0;\nexport const divu32 = (a, b) => ((a >>> 0) / (b >>> 0)) >>> 0;\nexport const mulu32 = (a, b) => ((a >>> 0) * (b >>> 0)) >>> 0;\nexport const subu32 = (a, b) => ((a >>> 0) - (b >>> 0)) >>> 0;\nexport const andu32 = (a, b) => ((a >>> 0) & (b >>> 0)) >>> 0;\nexport const oru32 = (a, b) => ((a >>> 0) | (b >>> 0)) >>> 0;\nexport const xoru32 = (a, b) => ((a >>> 0) ^ (b >>> 0)) >>> 0;\nexport const notu32 = (a) => ~a >>> 0;\n// prettier-ignore\nexport const lshiftu32 = (a, b) => ((a >>> 0) << (b >>> 0)) >>> 0;\n// prettier-ignore\nexport const rshiftu32 = (a, b) => ((a >>> 0) >>> (b >>> 0)) >>> 0;\n","import { EPS } from \"./api\";\n/**\n * Recursively evaluates function `fn` for `res` uniformly spaced values\n * `t` in the closed parametric interval `[start,end]` and computes\n * corresponding sample values `p`. For each `p` then calls `error`\n * function to compute the error to query target value `q` and\n * eventually returns the `t` producing the overall minimum error. At\n * each level of recursion the search interval is increasingly narrowed\n * / centered around the best `t` of the current iteration.\n *\n * The search is terminated early if the best error value is less than\n * `eps`.\n *\n * The interval end points `start` and `end` MUST be normalized values\n * in the closed [0,1] interval.\n *\n * @param fn function to evaluate\n * @param error error function\n * @param q target value\n * @param res number of samples per interval\n * @param iter max number of iterations / recursion limit\n * @param start interval start\n * @param end interval end\n */\nexport const minError = (fn, error, q, res = 16, iter = 8, start = 0, end = 1, eps = EPS) => {\n    if (iter <= 0)\n        return (start + end) / 2;\n    const delta = (end - start) / res;\n    let minT = start;\n    let minE = Infinity;\n    for (let i = 0; i <= res; i++) {\n        const t = start + i * delta;\n        const e = error(q, fn(t));\n        if (e < minE) {\n            if (e <= eps)\n                return t;\n            minE = e;\n            minT = t;\n        }\n    }\n    return minError(fn, error, q, res, iter - 1, Math.max(minT - delta, 0), Math.min(minT + delta, 1));\n};\n","import { HALF_PI, PI } from \"./api\";\nexport const mix = (a, b, t) => a + (b - a) * t;\n/**\n * ```\n * c    d\n * +----+\n * |    |\n * +----+\n * a    b\n * ```\n *\n * @param a BL value\n * @param b BR value\n * @param c TL value\n * @param d TR value\n * @param u 1st interpolation factor\n * @param v 2nd interpolation factor\n */\nexport const mixBilinear = (a, b, c, d, u, v) => mix(mix(a, b, u), mix(c, d, u), v);\nexport const mixQuadratic = (a, b, c, t) => {\n    const s = 1 - t;\n    return a * s * s + b * 2 * s * t + c * t * t;\n};\nexport const mixCubic = (a, b, c, d, t) => {\n    const t2 = t * t;\n    const s = 1 - t;\n    const s2 = s * s;\n    return a * s2 * s + b * 3 * s2 * t + c * 3 * t2 * s + d * t2 * t;\n};\n/**\n * Returns hermite interpolation of `a, b, c, d` at normalized position\n * `t`, where `a` and `d` are used as predecessor/successor of `b` / `c`\n * and only inform the tangent of the interpolation curve. The\n * interpolated result is that of `b` and `c`.\n *\n * Assumes all inputs are uniformly spaced. If that's not the case, use\n * `mixCubicHermite()` with one of the tangent generators supporting\n * non-uniform spacing of points.\n *\n * See: https://www.desmos.com/calculator/j4gf8g9vkr\n *\n * Source:\n * https://www.musicdsp.org/en/latest/Other/93-hermite-interpollation.html\n *\n * @see mixCubicHermite\n * @see tangentCardinal\n * @see tangentDiff3\n *\n * @param a\n * @param b\n * @param c\n * @param d\n * @param t\n */\nexport const mixHermite = (a, b, c, d, t) => {\n    const y1 = 0.5 * (c - a);\n    const y2 = 1.5 * (b - c) + 0.5 * (d - a);\n    return ((y2 * t + a - b + y1 - y2) * t + y1) * t + b;\n};\n/**\n * Computes cubic-hermite interpolation between `a` / `b` at normalized\n * time `t` and using respective tangents `ta` / `tb`.\n *\n * https://en.wikipedia.org/wiki/Cubic_Hermite_spline\n *\n * @see mixHermite\n * @see tangentCardinal\n * @see tangentDiff3\n *\n * @param a\n * @param ta\n * @param b\n * @param tb\n * @param t\n */\nexport const mixCubicHermite = (a, ta, b, tb, t) => {\n    const s = t - 1;\n    const t2 = t * t;\n    const s2 = s * s;\n    const h00 = (1 + 2 * t) * s2;\n    const h10 = t * s2;\n    const h01 = t2 * (3 - 2 * t);\n    const h11 = t2 * s;\n    return h00 * a + h10 * ta + h01 * b + h11 * tb;\n};\n/**\n * Helper function for `mixCubicHermite()`. Computes cardinal tangents\n * based on point neighbors of a point B (not given), i.e. `a`\n * (predecessor) and `c` (successor) and their times (defaults to\n * uniformly spaced). The optional `tension` parameter can be used to\n * scale the tangent where 0.0 produces a Cardinal spline tangent and\n * 1.0 a Catmull-Rom (opposite to the Wikipedia ref).\n *\n * https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Cardinal_spline\n *\n * @param prev\n * @param next\n * @param scale\n * @param ta\n * @param tc\n */\nexport const tangentCardinal = (prev, next, scale = 0.5, ta = 0, tc = 2) => scale * ((next - prev) / (tc - ta));\n/**\n * Helper function for `mixCubicHermite()`. Computes tangent for `curr`,\n * based on 3-point finite difference, where `prev` & `next` are\n * `curr`'s neighbors and the `tX` the three points' respective time\n * values. The latter are equally spaced by default (each 1.0 apart).\n *\n * Using this function with equal spacing of 1.0 and together with\n * `mixCubicHermite()` will produce same results as the somewhat\n * optimized variant `mixHermite()`.\n *\n * https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Finite_difference\n *\n * @param prev\n * @param curr\n * @param next\n * @param ta\n * @param tb\n * @param tc\n */\nexport const tangentDiff3 = (prev, curr, next, ta = 0, tb = 1, tc = 2) => 0.5 * ((next - curr) / (tc - tb) + (curr - prev) / (tb - ta));\n/**\n * HOF interpolator. Takes a timing function `f` and interval `[from,\n * to]`. Returns function which takes normalized time as single arg and\n * returns interpolated value.\n *\n * @param f\n * @param from\n * @param to\n */\nexport const tween = (f, from, to) => (t) => mix(from, to, f(t));\n/**\n * Circular interpolation: `sqrt(1 - (1 - t)^2)`\n *\n * @param t interpolation factor (0.0 .. 1.0)\n */\nexport const circular = (t) => {\n    t = 1 - t;\n    return Math.sqrt(1 - t * t);\n};\nexport const cosine = (t) => 1 - (Math.cos(t * PI) * 0.5 + 0.5);\nexport const decimated = (n, t) => Math.floor(t * n) / n;\nexport const bounce = (k, amp, t) => {\n    const tk = t * k;\n    return 1 - ((amp * Math.sin(tk)) / tk) * Math.cos(t * HALF_PI);\n};\n/**\n * HOF exponential easing.\n *\n * - `ease = 1` -> linear\n * - `ease > 1` -> ease in\n * - `ease < 1` -> ease out\n *\n * @param ease easing behavior [0.0 .. ]\n * @param t\n */\nexport const ease = (ease, t) => Math.pow(t, ease);\n/**\n * HOF impulse generator. Peaks at `t=1/k`\n *\n * @param k impulse width (higher values => shorter impulse)\n */\nexport const impulse = (k, t) => {\n    const h = k * t;\n    return h * Math.exp(1 - h);\n};\nexport const gain = (k, t) => t < 0.5 ? 0.5 * Math.pow(2 * t, k) : 1 - 0.5 * Math.pow(2 - 2 * t, k);\nexport const parabola = (k, t) => Math.pow(4.0 * t * (1.0 - t), k);\nexport const cubicPulse = (w, c, t) => {\n    t = Math.abs(t - c);\n    return t > w ? 0 : ((t /= w), 1 - t * t * (3 - 2 * t));\n};\nexport const sinc = (k, t) => {\n    t = PI * (k * t - 1.0);\n    return Math.sin(t) / t;\n};\n/**\n * Sigmoid function for inputs in [0..1] interval.\n *\n * @param k\n * @param t\n */\nexport const sigmoid = (k, t) => 1 / (1 + Math.exp(-k * (2 * t - 1)));\n/**\n * Sigmoid function for inputs in [-1..+1] interval.\n *\n * @param k\n * @param t\n */\nexport const sigmoid11 = (k, t) => 1 / (1 + Math.exp(-k * t));\n","import { EPS } from \"./api\";\n/**\n * Returns `a - b * floor(a/b)`\n *\n * @param a\n * @param b\n */\nexport const fmod = (a, b) => a - b * Math.floor(a / b);\nexport const fract = (x) => x - Math.floor(x);\nexport const trunc = (x) => (x < 0 ? Math.ceil(x) : Math.floor(x));\nexport const roundTo = (x, prec = 1) => Math.round(x / prec) * prec;\n/**\n * Only rounds `x` to nearest int if `fract(x)` < `eps` or > `1-eps`.\n *\n * @param x\n * @param eps\n */\nexport const roundEps = (x, eps = EPS) => {\n    const f = fract(x);\n    return f <= eps || f >= 1 - eps ? Math.round(x) : x;\n};\n","export const simplifyRatio = (num, denom) => {\n    let e1 = Math.abs(num);\n    let e2 = Math.abs(denom);\n    while (true) {\n        if (e1 < e2) {\n            const t = e1;\n            e1 = e2;\n            e2 = t;\n        }\n        const r = e1 % e2;\n        if (r) {\n            e1 = r;\n        }\n        else {\n            return [num / e2, denom / e2];\n        }\n    }\n};\n","import { EPS } from \"./api\";\n/**\n * Produces a new function which computes derivative of the given\n * single-arg function. The extra optional arg `eps` is used to\n * define the step width for computing derived values:\n *\n * `f'(x) = (f(x + eps) - f(x)) / eps`\n *\n * The original function is assumed to be fully differentiable\n * in the interval the returned function is going to be used.\n * No validity checks of any form are done.\n *\n * https://en.wikipedia.org/wiki/Derivative#Continuity_and_differentiability\n *\n * @param fn\n * @param eps\n */\nexport const derivative = (f, eps = EPS) => (x) => (f(x + eps) - f(x)) / eps;\n/**\n * Computes solution for linear equation: `ax + b = 0`.\n *\n * Note: `a` MUST NOT be zero.\n *\n * @param a slope\n * @param b constant offset\n */\nexport const solveLinear = (a, b) => -b / a;\n/**\n * Computes solutions for quadratic equation: `ax^2 + bx + c = 0`.\n * Returns array of real solutions.\n * Note: `a` MUST NOT be zero. If the quadratic term is missing,\n * use `solveLinear` instead.\n *\n * https://en.wikipedia.org/wiki/Quadratic_function\n * https://en.wikipedia.org/wiki/Quadratic_equation\n *\n * @param a quadratic coefficient\n * @param b linear coefficient\n * @param c constant offset\n * @param eps tolerance to determine multiple roots\n */\nexport const solveQuadratic = (a, b, c, eps = 1e-9) => {\n    const d = 2 * a;\n    let r = b * b - 4 * a * c;\n    return r < 0\n        ? []\n        : r < eps\n            ? [-b / d]\n            : ((r = Math.sqrt(r)), [(-b - r) / d, (-b + r) / d]);\n};\n/**\n * Computes solutions for quadratic equation: `ax^3 + bx^2 + c*x + d = 0`.\n * Returns array of solutions, both real & imaginary.\n * Note: `a` MUST NOT be zero. If the cubic term is missing (i.e. zero),\n * use `solveQuadratic` or `solveLinear` instead.\n *\n * https://en.wikipedia.org/wiki/Cubic_function\n *\n * @param a cubic coefficient\n * @param b quadratic coefficient\n * @param c linear coefficient\n * @param d constant offset\n * @param eps tolerance to determine multiple roots\n */\nexport const solveCubic = (a, b, c, d, eps = 1e-9) => {\n    const aa = a * a;\n    const bb = b * b;\n    const ba3 = b / (3 * a);\n    const p = (3 * a * c - bb) / (3 * aa);\n    const q = (2 * bb * b - 9 * a * b * c + 27 * aa * d) / (27 * aa * a);\n    if (Math.abs(p) < eps) {\n        return [Math.cbrt(-q) - ba3];\n    }\n    else if (Math.abs(q) < eps) {\n        return p < 0\n            ? [-Math.sqrt(-p) - ba3, -ba3, Math.sqrt(-p) - ba3]\n            : [-ba3];\n    }\n    else {\n        const denom = (q * q) / 4 + (p * p * p) / 27;\n        if (Math.abs(denom) < eps) {\n            return [(-1.5 * q) / p - ba3, (3 * q) / p - ba3];\n        }\n        else if (denom > 0) {\n            const u = Math.cbrt(-q / 2 - Math.sqrt(denom));\n            return [u - p / (3 * u) - ba3];\n        }\n        else {\n            const u = 2 * Math.sqrt(-p / 3), t = Math.acos((3 * q) / p / u) / 3, k = (2 * Math.PI) / 3;\n            return [\n                u * Math.cos(t) - ba3,\n                u * Math.cos(t - k) - ba3,\n                u * Math.cos(t - 2 * k) - ba3\n            ];\n        }\n    }\n};\n","import { clamp01 } from \"./interval\";\n/**\n * Step/threshold function.\n *\n * @param edge threshold\n * @param x test value\n * @returns 0, if `x < e`, else 1\n */\nexport const step = (edge, x) => (x < edge ? 0 : 1);\n/**\n * GLSL-style smoothStep threshold function.\n *\n * @param edge lower threshold\n * @param edge2 upper threshold\n * @param x test value\n * @returns 0, if `x < edge1`, 1 if `x > edge2`, else sigmoid interpolation\n */\nexport const smoothStep = (edge, edge2, x) => {\n    x = clamp01((x - edge) / (edge2 - edge));\n    return (3 - 2 * x) * x * x;\n};\n/**\n * Similar to `smoothStep()` but using different polynomial.\n *\n * @param edge\n * @param edge2\n * @param x\n */\nexport const smootherStep = (edge, edge2, x) => {\n    x = clamp01((x - edge) / (edge2 - edge));\n    return x * x * x * (x * (x * 6 - 15) + 10);\n};\n/**\n * Exponential ramp with variable shape, e.g.\n *\n * - S-curve: k=8, n=4\n * - Step near 1.0: k=8, n=20\n * - Pulse: k=0.005, n=-10\n * - Ease-in: k=0.5, n=0.25\n *\n * @param k\n * @param n\n * @param x\n */\nexport const expStep = (k, n, x) => 1 - Math.exp(-k * Math.pow(x, n));\n","export * from \"./api\";\nexport * from \"./abs\";\nexport * from \"./angle\";\nexport * from \"./crossing\";\nexport * from \"./eqdelta\";\nexport * from \"./extrema\";\nexport * from \"./fit\";\nexport * from \"./int\";\nexport * from \"./interval\";\nexport * from \"./min-error\";\nexport * from \"./mix\";\nexport * from \"./prec\";\nexport * from \"./ratio\";\nexport * from \"./solve\";\nexport * from \"./step\";\n","import { mixHermite } from \"@thi.ng/math\";\nimport { interpolate } from \"./interpolate\";\nexport function interpolateHermite(n, src) {\n    return interpolate((chunk, t) => mixHermite(...chunk, t), 4, n, src);\n}\n","import { mix } from \"@thi.ng/math\";\nimport { interpolate } from \"./interpolate\";\nexport function interpolateLinear(n, src) {\n    return interpolate((chunk, t) => mix(...chunk, t), 2, n, src);\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function interpose(sep, src) {\n    return src\n        ? iterator(interpose(sep), src)\n        : (rfn) => {\n            const r = rfn[2];\n            const _sep = typeof sep === \"function\" ? sep : () => sep;\n            let first = true;\n            return compR(rfn, (acc, x) => {\n                if (first) {\n                    first = false;\n                    return r(acc, x);\n                }\n                acc = r(acc, _sep());\n                return isReduced(acc) ? acc : r(acc, x);\n            });\n        };\n}\n","import { identity } from \"@thi.ng/compose\";\nimport { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function keep(...args) {\n    return ($iter(keep, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const pred = args[0] || identity;\n            return compR(rfn, (acc, x) => pred(x) != null ? r(acc, x) : acc);\n        }));\n}\n","import { isFunction } from \"@thi.ng/checks\";\nimport { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function labeled(id, src) {\n    return src\n        ? iterator1(labeled(id), src)\n        : map(isFunction(id) ? (x) => [id(x), x] : (x) => [id, x]);\n}\n","import { isFunction } from \"@thi.ng/checks\";\n/**\n * Higher-order deep object transformer. Accepts a nested `spec`\n * array reflecting same key structure as the object to be mapped,\n * but with functions or sub-specs as their values.\n * Returns a new function, which when called, recursively applies\n * nested transformers in post-order traversal (child transformers\n * are run first) and returns the result of the root transformer.\n *\n * The transform specs are given as arrays in this format:\n *\n * ```\n * [tx-function, {key1: [tx-function, {...}], key2: tx-fn}]\n * ```\n *\n * If a key in the spec has no further sub maps, its transform\n * function can be given directly without having to wrap it into\n * the usual array structure.\n *\n * ```\n * // source object to be transformed\n * src = {\n *    meta: {\n *      author: { name: \"Alice\", email: \"a@b.com\" },\n *      date: 1041510896000\n *    },\n *    type: \"post\",\n *    title: \"Hello world\",\n *    body: \"Ratione necessitatibus doloremque itaque.\"\n * };\n *\n * // deep transformation spec\n * spec = [\n *    // root transform (called last)\n *    ({type, meta, title, body}) => [\"div\", {class: type}, title, meta, body],\n *    // object of transform sub-specs\n *    {\n *      meta: [\n *        ({author, date}) => [\"div.meta\", author, `(${date})`],\n *        {\n *          author: ({email, name}) => [\"a\", {href: `mailto:${email}`}, name],\n *          date: (d) => new Date(d).toLocaleString()\n *        }\n *      ],\n *      title: (title) => [\"h1\", title]\n *    }\n * ];\n *\n * // build transformer & apply to src\n * deepTransform(spec)(src);\n *\n * // [ \"div\",\n * //   { class: \"article\" },\n * //   [ \"h1\", \"Hello world\" ],\n * //   [ \"div.meta\",\n * //     [ \"a\", { href: \"mailto:a@.b.com\" }, \"Alice\" ],\n * //     \"(1/2/2003, 12:34:56 PM)\" ],\n * //   \"Ratione necessitatibus doloremque itaque.\" ]\n * ```\n *\n * @param spec transformation spec\n */\nexport const deepTransform = (spec) => {\n    if (isFunction(spec)) {\n        return spec;\n    }\n    const mapfns = Object.keys(spec[1] || {}).reduce((acc, k) => ((acc[k] = deepTransform(spec[1][k])), acc), {});\n    return (x) => {\n        const res = Object.assign({}, x);\n        for (let k in mapfns) {\n            res[k] = mapfns[k](res[k]);\n        }\n        return spec[0](res);\n    };\n};\n","import { deepTransform } from \"../func/deep-transform\";\nimport { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function mapDeep(spec, src) {\n    return src ? iterator1(mapDeep(spec), src) : map(deepTransform(spec));\n}\n","import { $iter } from \"../iterator\";\nimport { map } from \"./map\";\nexport function mapKeys(...args) {\n    const iter = $iter(mapKeys, args);\n    if (iter) {\n        return iter;\n    }\n    const keys = args[0];\n    const copy = args[1] !== false;\n    return map((x) => {\n        const res = copy ? Object.assign({}, x) : x;\n        for (let k in keys) {\n            res[k] = keys[k](x[k]);\n        }\n        return res;\n    });\n}\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function mapNth(...args) {\n    const iter = $iter(mapNth, args);\n    if (iter) {\n        return iter;\n    }\n    let n = args[0] - 1;\n    let offset;\n    let fn;\n    if (typeof args[1] === \"number\") {\n        offset = args[1];\n        fn = args[2];\n    }\n    else {\n        fn = args[1];\n        offset = 0;\n    }\n    return (rfn) => {\n        const r = rfn[2];\n        let skip = 0, off = offset;\n        return compR(rfn, (acc, x) => {\n            if (off === 0) {\n                if (skip === 0) {\n                    skip = n;\n                    return r(acc, fn(x));\n                }\n                skip--;\n            }\n            else {\n                off--;\n            }\n            return r(acc, x);\n        });\n    };\n}\n","import { $iter } from \"../iterator\";\nimport { map } from \"./map\";\nexport function mapVals(...args) {\n    const iter = $iter(mapVals, args);\n    if (iter) {\n        return iter;\n    }\n    const fn = args[0];\n    const copy = args[1] !== false;\n    return map((x) => {\n        const res = copy ? {} : x;\n        for (let k in x) {\n            res[k] = fn(x[k]);\n        }\n        return res;\n    });\n}\n","import { compR } from \"../func/compr\";\nimport { iterator } from \"../iterator\";\nimport { ensureReduced, reduced } from \"../reduced\";\nexport function take(n, src) {\n    return src\n        ? iterator(take(n), src)\n        : (rfn) => {\n            const r = rfn[2];\n            let m = n;\n            return compR(rfn, (acc, x) => --m > 0\n                ? r(acc, x)\n                : m === 0\n                    ? ensureReduced(r(acc, x))\n                    : reduced(acc));\n        };\n}\n","import { comp } from \"../func/comp\";\nimport { iterator1 } from \"../iterator\";\nimport { filter } from \"./filter\";\nimport { take } from \"./take\";\nexport function matchFirst(pred, src) {\n    return src\n        ? [...iterator1(matchFirst(pred), src)][0]\n        : comp(filter(pred), take(1));\n}\n","import { isReduced } from \"../reduced\";\n/**\n * Helper HOF yielding a buffer drain completion function for some\n * transducers.\n *\n * @param buf\n * @param complete\n * @param reduce\n */\nexport const __drain = (buf, complete, reduce) => (acc) => {\n    while (buf.length && !isReduced(acc)) {\n        acc = reduce(acc, buf.shift());\n    }\n    return complete(acc);\n};\n","import { __drain } from \"../internal/drain\";\nimport { iterator } from \"../iterator\";\nexport function takeLast(n, src) {\n    return src\n        ? iterator(takeLast(n), src)\n        : ([init, complete, reduce]) => {\n            const buf = [];\n            return [\n                init,\n                __drain(buf, complete, reduce),\n                (acc, x) => {\n                    if (buf.length === n) {\n                        buf.shift();\n                    }\n                    buf.push(x);\n                    return acc;\n                }\n            ];\n        };\n}\n","import { comp } from \"../func/comp\";\nimport { iterator } from \"../iterator\";\nimport { filter } from \"./filter\";\nimport { takeLast } from \"./take-last\";\nexport function matchLast(pred, src) {\n    return src\n        ? [...iterator(matchLast(pred), src)][0]\n        : comp(filter(pred), takeLast(1));\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nimport { compR } from \"../func/compr\";\nimport { iterator1 } from \"../iterator\";\nexport function movingAverage(period, src) {\n    return src\n        ? iterator1(movingAverage(period), src)\n        : (rfn) => {\n            period |= 0;\n            period < 2 && illegalArgs(\"period must be >= 2\");\n            const reduce = rfn[2];\n            const window = [];\n            let sum = 0;\n            return compR(rfn, (acc, x) => {\n                const n = window.push(x);\n                sum += x;\n                n > period && (sum -= window.shift());\n                return n >= period ? reduce(acc, sum / period) : acc;\n            });\n        };\n}\n","import { compare } from \"@thi.ng/compare\";\nimport { identity } from \"@thi.ng/compose\";\nexport const __sortOpts = (opts) => (Object.assign({ key: identity, compare }, opts));\n","import { comp } from \"../func/comp\";\nimport { __sortOpts } from \"../internal/sort-opts\";\nimport { $iter } from \"../iterator\";\nimport { map } from \"./map\";\nimport { partition } from \"./partition\";\nexport function movingMedian(...args) {\n    const iter = $iter(movingMedian, args);\n    if (iter) {\n        return iter;\n    }\n    const { key, compare } = __sortOpts(args[1]);\n    const n = args[0];\n    const m = n >> 1;\n    return comp(partition(n, 1, true), map((window) => window.slice().sort((a, b) => compare(key(a), key(b)))[m]));\n}\n","import { juxt } from \"@thi.ng/compose\";\nimport { step } from \"../step\";\nimport { map } from \"./map\";\nexport function multiplex(...args) {\n    return map(juxt.apply(null, args.map(step)));\n}\n","export const renamer = (kmap) => {\n    const ks = Object.keys(kmap);\n    const [a2, b2, c2] = ks;\n    const [a1, b1, c1] = ks.map((k) => kmap[k]);\n    switch (ks.length) {\n        case 3:\n            return (x) => {\n                const res = {};\n                let v;\n                (v = x[c1]), v !== undefined && (res[c2] = v);\n                (v = x[b1]), v !== undefined && (res[b2] = v);\n                (v = x[a1]), v !== undefined && (res[a2] = v);\n                return res;\n            };\n        case 2:\n            return (x) => {\n                const res = {};\n                let v;\n                (v = x[b1]), v !== undefined && (res[b2] = v);\n                (v = x[a1]), v !== undefined && (res[a2] = v);\n                return res;\n            };\n        case 1:\n            return (x) => {\n                const res = {};\n                let v = x[a1];\n                v !== undefined && (res[a2] = v);\n                return res;\n            };\n        default:\n            return (x) => {\n                let k, v;\n                const res = {};\n                for (let i = ks.length - 1; i >= 0; i--) {\n                    (k = ks[i]),\n                        (v = x[kmap[k]]),\n                        v !== undefined && (res[k] = v);\n                }\n                return res;\n            };\n    }\n};\n","import { isArray } from \"@thi.ng/checks\";\nimport { comp } from \"../func/comp\";\nimport { renamer } from \"../func/renamer\";\nimport { $iter } from \"../iterator\";\nimport { transduce } from \"../transduce\";\nimport { filter } from \"./filter\";\nimport { map } from \"./map\";\nexport function rename(...args) {\n    const iter = args.length > 2 && $iter(rename, args);\n    if (iter) {\n        return iter;\n    }\n    let kmap = args[0];\n    if (isArray(kmap)) {\n        kmap = kmap.reduce((acc, k, i) => ((acc[k] = i), acc), {});\n    }\n    if (args[1]) {\n        const ks = Object.keys(kmap);\n        return map((y) => transduce(comp(map((k) => [k, y[kmap[k]]]), filter((x) => x[1] !== undefined)), args[1], ks));\n    }\n    else {\n        return map(renamer(kmap));\n    }\n}\n","import { comp } from \"../func/comp\";\nimport { $iter } from \"../iterator\";\nimport { multiplex } from \"./multiplex\";\nimport { rename } from \"./rename\";\nexport function multiplexObj(...args) {\n    const iter = $iter(multiplexObj, args);\n    if (iter) {\n        return iter;\n    }\n    const [xforms, rfn] = args;\n    const ks = Object.keys(xforms);\n    return comp(multiplex.apply(null, ks.map((k) => xforms[k])), rename(ks, rfn));\n}\n","/**\n * No-op / pass-through transducer, essentially the same as:\n * `map(identity)`, but faster. Useful for testing and / or to keep\n * existing values in a `multiplex()` tuple lane.\n */\nexport const noop = () => (rfn) => rfn;\n","import { iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function padLast(n, fill, src) {\n    return src\n        ? iterator(padLast(n, fill), src)\n        : ([init, complete, reduce]) => {\n            let m = 0;\n            return [\n                init,\n                (acc) => {\n                    let rem = m % n;\n                    if (rem > 0) {\n                        while (++rem <= n && !isReduced(acc)) {\n                            acc = reduce(acc, fill);\n                        }\n                    }\n                    return complete(acc);\n                },\n                (acc, x) => (m++, reduce(acc, x))\n            ];\n        };\n}\n","import { comp } from \"../func/comp\";\nimport { $iter } from \"../iterator\";\nimport { drop } from \"./drop\";\nimport { take } from \"./take\";\nexport function page(...args) {\n    return ($iter(page, args) ||\n        comp(drop(args[0] * (args[1] || 10)), take(args[1] || 10)));\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { $iter, iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function partitionBy(...args) {\n    return ($iter(partitionBy, args, iterator) ||\n        (([init, complete, reduce]) => {\n            const fn = args[0];\n            const f = args[1] === true ? fn() : fn;\n            let prev = SEMAPHORE;\n            let chunk;\n            return [\n                init,\n                (acc) => {\n                    if (chunk && chunk.length) {\n                        acc = reduce(acc, chunk);\n                        chunk = null;\n                    }\n                    return complete(acc);\n                },\n                (acc, x) => {\n                    const curr = f(x);\n                    if (prev === SEMAPHORE) {\n                        prev = curr;\n                        chunk = [x];\n                    }\n                    else if (curr === prev) {\n                        chunk.push(x);\n                    }\n                    else {\n                        chunk && (acc = reduce(acc, chunk));\n                        chunk = isReduced(acc) ? null : [x];\n                        prev = curr;\n                    }\n                    return acc;\n                }\n            ];\n        }));\n}\n","import { iterator } from \"../iterator\";\nimport { partitionBy } from \"./partition-by\";\nexport function partitionOf(sizes, src) {\n    return src\n        ? iterator(partitionOf(sizes), src)\n        : partitionBy(() => {\n            let i = 0, j = 0;\n            return () => {\n                if (i++ === sizes[j]) {\n                    i = 1;\n                    j = (j + 1) % sizes.length;\n                }\n                return j;\n            };\n        }, true);\n}\n","import { comp } from \"../func/comp\";\nimport { __sortOpts } from \"../internal/sort-opts\";\nimport { $iter, iterator } from \"../iterator\";\nimport { mapcat } from \"./mapcat\";\nimport { partition } from \"./partition\";\nexport function partitionSort(...args) {\n    const iter = $iter(partitionSort, args, iterator);\n    if (iter) {\n        return iter;\n    }\n    const { key, compare } = __sortOpts(args[1]);\n    return comp(partition(args[0], true), mapcat((window) => window.slice().sort((a, b) => compare(key(a), key(b)))));\n}\n","import { isArray } from \"@thi.ng/checks\";\nimport { identity } from \"@thi.ng/compose\";\nimport { illegalState } from \"@thi.ng/errors\";\nimport { $iter, iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function partitionSync(...args) {\n    return ($iter(partitionSync, args, iterator) ||\n        (([init, complete, reduce]) => {\n            let curr = {};\n            let first = true;\n            const currKeys = new Set();\n            const { key, mergeOnly, reset, all, backPressure } = Object.assign({ key: identity, mergeOnly: false, reset: true, all: true, backPressure: 0 }, args[1]);\n            const ks = isArray(args[0])\n                ? new Set(args[0])\n                : args[0];\n            if (mergeOnly || backPressure < 1) {\n                return [\n                    init,\n                    (acc) => {\n                        if ((reset && all && currKeys.size > 0) ||\n                            (!reset && first)) {\n                            acc = reduce(acc, curr);\n                            curr = {};\n                            currKeys.clear();\n                            first = false;\n                        }\n                        return complete(acc);\n                    },\n                    (acc, x) => {\n                        const k = key(x);\n                        if (ks.has(k)) {\n                            curr[k] = x;\n                            currKeys.add(k);\n                            if (mergeOnly || requiredInputs(ks, currKeys)) {\n                                acc = reduce(acc, curr);\n                                first = false;\n                                if (reset) {\n                                    curr = {};\n                                    currKeys.clear();\n                                }\n                                else {\n                                    curr = Object.assign({}, curr);\n                                }\n                            }\n                        }\n                        return acc;\n                    }\n                ];\n            }\n            else {\n                // with backpressure / caching...\n                const cache = new Map();\n                return [\n                    init,\n                    (acc) => {\n                        if (all && currKeys.size > 0) {\n                            acc = reduce(acc, collect(cache, currKeys));\n                            currKeys.clear();\n                        }\n                        return complete(acc);\n                    },\n                    (acc, x) => {\n                        const k = key(x);\n                        if (ks.has(k)) {\n                            let slot = cache.get(k);\n                            !slot && cache.set(k, (slot = []));\n                            slot.length >= backPressure &&\n                                illegalState(`max back pressure (${backPressure}) exceeded for input: ${String(k)}`);\n                            slot.push(x);\n                            currKeys.add(k);\n                            while (requiredInputs(ks, currKeys)) {\n                                acc = reduce(acc, collect(cache, currKeys));\n                                first = false;\n                                if (isReduced(acc))\n                                    break;\n                            }\n                        }\n                        return acc;\n                    }\n                ];\n            }\n        }));\n}\nconst requiredInputs = (required, curr) => {\n    if (curr.size < required.size)\n        return false;\n    for (let id of required) {\n        if (!curr.has(id))\n            return false;\n    }\n    return true;\n};\nconst collect = (cache, currKeys) => {\n    const curr = {};\n    for (let id of currKeys) {\n        const slot = cache.get(id);\n        curr[id] = slot.shift();\n        !slot.length && currKeys.delete(id);\n    }\n    return curr;\n};\n","import { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function pluck(key, src) {\n    return src ? iterator1(pluck(key), src) : map((x) => x[key]);\n}\n","import { SYSTEM } from \"@thi.ng/random\";\nimport { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function sample(...args) {\n    const iter = $iter(sample, args);\n    if (iter) {\n        return iter;\n    }\n    const prob = args[0];\n    const rnd = args[1] || SYSTEM;\n    return (rfn) => {\n        const r = rfn[2];\n        return compR(rfn, (acc, x) => (rnd.float() < prob ? r(acc, x) : acc));\n    };\n}\n","import { $iter, iterator } from \"../iterator\";\nimport { ensureReduced, isReduced, unreduced } from \"../reduced\";\nexport function scan(...args) {\n    return ((args.length > 2 && $iter(scan, args, iterator)) ||\n        (([inito, completeo, reduceo]) => {\n            const [initi, completei, reducei] = args[0];\n            let acc = args.length > 1 && args[1] != null ? args[1] : initi();\n            return [\n                inito,\n                (_acc) => {\n                    let a = completei(acc);\n                    if (a !== acc) {\n                        _acc = unreduced(reduceo(_acc, a));\n                    }\n                    acc = a;\n                    return completeo(_acc);\n                },\n                (_acc, x) => {\n                    acc = reducei(acc, x);\n                    if (isReduced(acc)) {\n                        return ensureReduced(reduceo(_acc, acc.deref()));\n                    }\n                    return reduceo(_acc, acc);\n                }\n            ];\n        }));\n}\n","import { renamer } from \"./renamer\";\nexport const keySelector = (keys) => renamer(keys.reduce((acc, x) => ((acc[x] = x), acc), {}));\n","import { keySelector } from \"../func/key-selector\";\nimport { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function selectKeys(keys, src) {\n    return src ? iterator1(selectKeys(keys), src) : map(keySelector(keys));\n}\n","import { map } from \"./map\";\n/**\n * Helper transducer. Applies given `fn` to each input value, presumably\n * for side effects. Discards function's result and yields original\n * inputs.\n *\n * @param fn side effect\n */\nexport const sideEffect = (fn) => map((x) => (fn(x), x));\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nexport function slidingWindow(...args) {\n    const iter = $iter(slidingWindow, args);\n    if (iter) {\n        return iter;\n    }\n    const size = args[0];\n    const partial = args[1] !== false;\n    return (rfn) => {\n        const reduce = rfn[2];\n        let buf = [];\n        return compR(rfn, (acc, x) => {\n            buf.push(x);\n            if (partial || buf.length === size) {\n                acc = reduce(acc, buf);\n                buf = buf.slice(buf.length === size ? 1 : 0);\n            }\n            return acc;\n        });\n    };\n}\n","import { shuffle } from \"@thi.ng/arrays\";\nimport { $iter, iterator } from \"../iterator\";\nimport { isReduced } from \"../reduced\";\nexport function streamShuffle(...args) {\n    return ($iter(streamShuffle, args, iterator) ||\n        (([init, complete, reduce]) => {\n            const n = args[0];\n            const maxSwaps = args[1] || n;\n            const buf = [];\n            return [\n                init,\n                (acc) => {\n                    while (buf.length && !isReduced(acc)) {\n                        shuffle(buf, maxSwaps);\n                        acc = reduce(acc, buf.shift());\n                    }\n                    acc = complete(acc);\n                    return acc;\n                },\n                (acc, x) => {\n                    buf.push(x);\n                    shuffle(buf, maxSwaps);\n                    if (buf.length === n) {\n                        acc = reduce(acc, buf.shift());\n                    }\n                    return acc;\n                }\n            ];\n        }));\n}\n","import { binarySearch } from \"@thi.ng/arrays\";\nimport { __drain } from \"../internal/drain\";\nimport { __sortOpts } from \"../internal/sort-opts\";\nimport { $iter, iterator } from \"../iterator\";\nexport function streamSort(...args) {\n    const iter = $iter(streamSort, args, iterator);\n    if (iter) {\n        return iter;\n    }\n    const { key, compare } = __sortOpts(args[1]);\n    const n = args[0];\n    return ([init, complete, reduce]) => {\n        const buf = [];\n        return [\n            init,\n            __drain(buf, complete, reduce),\n            (acc, x) => {\n                const idx = binarySearch(buf, x, key, compare);\n                buf.splice(idx < 0 ? -(idx + 1) : idx, 0, x);\n                if (buf.length === n) {\n                    acc = reduce(acc, buf.shift());\n                }\n                return acc;\n            }\n        ];\n    };\n}\n","import { comp } from \"../func/comp\";\nimport { iterator } from \"../iterator\";\nimport { mapKeys } from \"./map-keys\";\nimport { partition } from \"./partition\";\nimport { partitionOf } from \"./partition-of\";\nimport { rename } from \"./rename\";\nexport function struct(fields, src) {\n    return src\n        ? iterator(struct(fields), src)\n        : comp(partitionOf(fields.map((f) => f[1])), partition(fields.length), rename(fields.map((f) => f[0])), mapKeys(fields.reduce((acc, f) => (f[2] ? ((acc[f[0]] = f[2]), acc) : acc), {}), false));\n}\n","import { swizzle as _swizzle } from \"@thi.ng/arrays\";\nimport { iterator1 } from \"../iterator\";\nimport { map } from \"./map\";\nexport function swizzle(order, src) {\n    return src ? iterator1(swizzle(order), src) : map(_swizzle(order));\n}\n","import { iterator1 } from \"../iterator\";\nimport { throttle } from \"./throttle\";\nexport function takeNth(n, src) {\n    if (src) {\n        return iterator1(takeNth(n), src);\n    }\n    n = Math.max(0, n - 1);\n    return throttle(() => {\n        let skip = 0;\n        return () => (skip === 0 ? ((skip = n), true) : (skip--, false));\n    });\n}\n","import { compR } from \"../func/compr\";\nimport { $iter } from \"../iterator\";\nimport { reduced } from \"../reduced\";\nexport function takeWhile(...args) {\n    return ($iter(takeWhile, args) ||\n        ((rfn) => {\n            const r = rfn[2];\n            const pred = args[0];\n            let ok = true;\n            return compR(rfn, (acc, x) => ((ok = ok && pred(x)) ? r(acc, x) : reduced(acc)));\n        }));\n}\n","import { iterator1 } from \"../iterator\";\nimport { throttle } from \"./throttle\";\nexport function throttleTime(delay, src) {\n    return src\n        ? iterator1(throttleTime(delay), src)\n        : throttle(() => {\n            let last = 0;\n            return () => {\n                const t = Date.now();\n                return t - last >= delay ? ((last = t), true) : false;\n            };\n        });\n}\n","import { iterator1 } from \"../iterator\";\nexport function toggle(on, off, initial = false, src) {\n    return src\n        ? iterator1(toggle(on, off, initial), src)\n        : ([init, complete, reduce]) => {\n            let state = initial;\n            return [\n                init,\n                complete,\n                (acc) => reduce(acc, (state = !state) ? on : off)\n            ];\n        };\n}\n","import { sideEffect } from \"./side-effect\";\nexport const trace = (prefix = \"\") => sideEffect((x) => console.log(prefix, x));\n","import { $iter, iterator } from \"../iterator\";\nimport { partitionBy } from \"./partition-by\";\nexport function wordWrap(...args) {\n    const iter = $iter(wordWrap, args, iterator);\n    if (iter) {\n        return iter;\n    }\n    const lineLength = args[0];\n    const { delim, always } = Object.assign({ delim: 1, always: true }, args[1]);\n    return partitionBy(() => {\n        let n = 0;\n        let flag = false;\n        return (w) => {\n            n += w.length + delim;\n            if (n > lineLength + (always ? 0 : delim)) {\n                flag = !flag;\n                n = w.length + delim;\n            }\n            return flag;\n        };\n    }, true);\n}\n","import { isReduced, reduced, unreduced } from \"../reduced\";\nexport function juxtR(...rs) {\n    let [a, b, c] = rs;\n    const n = rs.length;\n    switch (n) {\n        case 1: {\n            const r = a[2];\n            return [\n                () => [a[0]()],\n                (acc) => [a[1](acc[0])],\n                (acc, x) => {\n                    const aa1 = r(acc[0], x);\n                    if (isReduced(aa1)) {\n                        return reduced([unreduced(aa1)]);\n                    }\n                    return [aa1];\n                }\n            ];\n        }\n        case 2: {\n            const ra = a[2];\n            const rb = b[2];\n            return [\n                () => [a[0](), b[0]()],\n                (acc) => [a[1](acc[0]), b[1](acc[1])],\n                (acc, x) => {\n                    const aa1 = ra(acc[0], x);\n                    const aa2 = rb(acc[1], x);\n                    if (isReduced(aa1) || isReduced(aa2)) {\n                        return reduced([unreduced(aa1), unreduced(aa2)]);\n                    }\n                    return [aa1, aa2];\n                }\n            ];\n        }\n        case 3: {\n            const ra = a[2];\n            const rb = b[2];\n            const rc = c[2];\n            return [\n                () => [a[0](), b[0](), c[0]()],\n                (acc) => [a[1](acc[0]), b[1](acc[1]), c[1](acc[2])],\n                (acc, x) => {\n                    const aa1 = ra(acc[0], x);\n                    const aa2 = rb(acc[1], x);\n                    const aa3 = rc(acc[2], x);\n                    if (isReduced(aa1) || isReduced(aa2) || isReduced(aa3)) {\n                        return reduced([\n                            unreduced(aa1),\n                            unreduced(aa2),\n                            unreduced(aa3)\n                        ]);\n                    }\n                    return [aa1, aa2, aa3];\n                }\n            ];\n        }\n        default:\n            return [\n                () => rs.map((r) => r[0]()),\n                (acc) => rs.map((r, i) => r[1](acc[i])),\n                (acc, x) => {\n                    let done = false;\n                    const res = [];\n                    for (let i = 0; i < n; i++) {\n                        let a = rs[i][2](acc[i], x);\n                        if (isReduced(a)) {\n                            done = true;\n                            a = unreduced(a);\n                        }\n                        res[i] = a;\n                    }\n                    return done ? reduced(res) : res;\n                }\n            ];\n    }\n}\n","/**\n * Returns function accepting a single index arg used to\n * lookup value in given array. No bounds checks are done.\n *\n * ```\n * [...map(lookup1d([10, 20, 30]), [2,0,1])]\n * // [ 30, 10, 20 ]\n * ```\n *\n * @param src source data\n */\nexport const lookup1d = (src) => (i) => src[i];\n/**\n * Returns function accepting a single `[x, y]` index tuple,\n * used to lookup value in given array. Useful for transducers\n * processing 2D data. **Note**: The source data MUST be in\n * row major linearized format, i.e. 1D representation of 2D data\n * (pixel buffer). No bounds checks are done.\n *\n * ```\n * [...map(lookup2d([...range(9)], 3), range2d(2, -1, 0, 3))]\n * // [ 2, 1, 0, 5, 4, 3, 8, 7, 6 ]\n * ```\n *\n * @param src source data\n * @param width number of items along X (columns)\n */\nexport const lookup2d = (src, width) => (i) => src[i[0] + i[1] * width];\n/**\n * Same as `lookup2d()`, but for 3D data. The index ordering of the\n * source data MUST be in Z, Y, X order (i.e. a stack of row major 2D slices).\n * No bounds checks are done.\n *\n * @param src source data\n * @param width number of items along X (columns)\n * @param height number of items along Y (rows)\n */\nexport const lookup3d = (src, width, height) => {\n    const stridez = width * height;\n    return (i) => src[i[0] + i[1] * width + i[2] * stridez];\n};\n","/**\n * Helper function to (re)provide given iterable in iterator form.\n *\n * @param src\n */\nexport function* asIterable(src) {\n    yield* src;\n}\n","export function* repeatedly(fn, n = Infinity) {\n    while (n-- > 0) {\n        yield fn();\n    }\n}\n","import { ensureArray } from \"@thi.ng/arrays\";\nimport { SYSTEM, weightedRandom } from \"@thi.ng/random\";\nimport { repeatedly } from \"./repeatedly\";\n/**\n * Returns an infinite iterator of random choices and their (optional)\n * weights. If `weights` is given, it must have at least the same size\n * as `choices`. If omitted, each choice will have same probability.\n *\n * ```\n * transduce(take(1000), frequencies(), choices(\"abcd\", [1, 0.5, 0.25, 0.125]))\n * // Map { 'c' => 132, 'a' => 545, 'b' => 251, 'd' => 72 }\n * ```\n *\n * @see weightedRandom\n *\n * @param choices\n * @param weights\n */\nexport const choices = (choices, weights, rnd = SYSTEM) => repeatedly(weights\n    ? weightedRandom(ensureArray(choices), weights, rnd)\n    : () => choices[rnd.float(choices.length) | 0]);\n","import { ensureIterable } from \"@thi.ng/arrays\";\n/**\n * Yields iterator producing concatenation of given iterables.\n * Undefined & null inputs are silently ignored, however any\n * such values produced or contained in an input will remain.\n *\n * ```\n * [...concat([1, 2, 3], null, [4, 5])]\n * // [ 1, 2, 3, 4, 5 ]\n *\n * [...concat([1, 2, 3, undefined], null, [4, 5])]\n * // [ 1, 2, 3, undefined, 4, 5 ]\n * ```\n *\n * @param xs\n */\nexport function* concat(...xs) {\n    for (let x of xs) {\n        x != null && (yield* ensureIterable(x));\n    }\n}\n","export function* cycle(input) {\n    let cache = [];\n    for (let i of input) {\n        cache.push(i);\n        yield i;\n    }\n    if (cache.length > 0) {\n        while (true) {\n            yield* cache;\n        }\n    }\n}\n","export function* repeat(x, n = Infinity) {\n    while (n-- > 0) {\n        yield x;\n    }\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { repeat } from \"./repeat\";\n/**\n * Yields iterator of given iterable which repeats the first and/or last\n * value(s) `numLeft`/`numRight` times (default: 1). By default both\n * sides are repeated, but can be adjusted by setting either of them to\n * zero. `numRight` defaults to same value as `numLeft`.\n *\n * ```\n * [...extendSides([1, 2, 3])]\n * // [ 1,  1, 2, 3,  3]\n *\n * [...extendSides([1, 2, 3], 3)]\n * // [ 1, 1, 1,  1, 2, 3,  3, 3, 3 ]\n *\n * [...extendSides([1, 2, 3], 0, 3)]\n * // [ 1, 2, 3,  3, 3, 3 ]\n * ```\n *\n * @see padSides\n * @see wrapSides\n *\n * @param src\n * @param numLeft\n * @param numRight\n */\nexport function* extendSides(src, numLeft = 1, numRight = numLeft) {\n    let prev = SEMAPHORE;\n    for (let x of src) {\n        if (numLeft > 0 && prev === SEMAPHORE) {\n            yield* repeat(x, numLeft);\n            numLeft = 0;\n        }\n        yield x;\n        prev = x;\n    }\n    if (numRight > 0 && prev !== SEMAPHORE) {\n        yield* repeat(prev, numRight);\n    }\n}\n","/**\n * Yields an infinite iterator of the inductive sequence:\n *\n * f(x+1) = f(f(x))\n *\n * The first value emitted always is `seed` itself, then f(seed),\n * f(f(seed)) etc. The given function is called with the current\n * iteration counter as 2nd arg.\n *\n * ```\n * [...take(5, iterate((x) => x * 2, 1))]\n * // [ 1, 2, 4, 8, 16 ]\n *\n * [...take(8, iterate((x, i) => x * 10 + i, 0))]\n * // [ 0, 1, 12, 123, 1234, 12345, 123456, 1234567 ]\n * ```\n *\n * @param fn\n * @param seed\n */\nexport function* iterate(fn, seed) {\n    let i = 0;\n    while (true) {\n        yield seed;\n        seed = fn(seed, ++i);\n    }\n}\n","export function* keys(x) {\n    for (let k in x) {\n        if (x.hasOwnProperty(k)) {\n            yield k;\n        }\n    }\n}\n","import { concat } from \"./concat\";\nimport { repeat } from \"./repeat\";\n/**\n * Returns iterator of `src` padded with value `x`, repeated\n * `numLeft`/`numRight` times (default: 1). By default both sides are\n * padded, but can be adjusted by setting either of them to zero.\n * `numRight` defaults to same value as `numLeft`.\n *\n * Essentially, syntax sugar for:\n *\n * ```\n * // default\n * concat(repeat(x, numLeft), src, repeat(x, numRight))\n *\n * // left only\n * concat(repeat(x, numLeft), src)\n *\n * // right only\n * concat(src, repeat(x, numRight))\n * ```\n *\n * @see extendsSides\n * @see wrapSides\n *\n * @param src\n * @param x\n * @param numLeft\n * @param numRight\n */\nexport const padSides = (src, x, numLeft = 1, numRight = numLeft) => numLeft > 0\n    ? numRight > 0\n        ? concat(repeat(x, numLeft), src, repeat(x, numRight))\n        : concat(repeat(x, numLeft), src)\n    : numRight > 0\n        ? concat(src, repeat(x, numRight))\n        : concat(src);\n","export function* pairs(x) {\n    for (let k in x) {\n        if (x.hasOwnProperty(k)) {\n            yield [k, x[k]];\n        }\n    }\n}\n","import { ensureArrayLike } from \"@thi.ng/arrays\";\nimport { illegalArgs } from \"@thi.ng/errors\";\nimport { range } from \"./range\";\nexport function* permutations(...src) {\n    const n = src.length - 1;\n    if (n < 0) {\n        return;\n    }\n    const step = new Array(n + 1).fill(0);\n    const realized = src.map(ensureArrayLike);\n    const total = realized.reduce((acc, x) => acc * x.length, 1);\n    for (let i = 0; i < total; i++) {\n        const tuple = [];\n        for (let j = n; j >= 0; j--) {\n            const r = realized[j];\n            let s = step[j];\n            if (s === r.length) {\n                step[j] = s = 0;\n                j > 0 && step[j - 1]++;\n            }\n            tuple[j] = r[s];\n        }\n        step[n]++;\n        yield tuple;\n    }\n}\n/**\n * Iterator yielding the Cartesian Product for `n` items of `m` values\n * each. If `m` is not given, defaults to value of `n`. The range of `m`\n * is `0..m-1`. The optional `offsets` array can be used to define start\n * values for each dimension.\n *\n * ```\n * [...permutationsN(2)]\n * // [ [0, 0], [0, 1], [1, 0], [1, 1] ]\n *\n * [...permutationsN(2, 3)]\n * // [ [0, 0], [0, 1], [0, 2],\n * //   [1, 0], [1, 1], [1, 2],\n * //   [2, 0], [2, 1], [2, 2] ]\n *\n * [...permutationsN(2, 3, [10, 20])]\n * // [ [ 10, 20 ], [ 10, 21 ], [ 11, 20 ], [ 11, 21 ] ]\n * ```\n *\n * @param n\n * @param m\n * @param offsets\n */\nexport const permutationsN = (n, m = n, offsets) => {\n    if (offsets && offsets.length < n) {\n        illegalArgs(`insufficient offsets, got ${offsets.length}, needed ${n}`);\n    }\n    const seqs = [];\n    while (--n >= 0) {\n        const o = offsets ? offsets[n] : 0;\n        seqs[n] = range(o, o + m);\n    }\n    return permutations.apply(null, seqs);\n};\n","import { illegalArity } from \"@thi.ng/errors\";\nimport { range } from \"./range\";\nexport function* range3d(...args) {\n    let fromX, toX, stepX;\n    let fromY, toY, stepY;\n    let fromZ, toZ, stepZ;\n    switch (args.length) {\n        case 9:\n            stepX = args[6];\n            stepY = args[7];\n            stepZ = args[8];\n        case 6:\n            [fromX, toX, fromY, toY, fromZ, toZ] = args;\n            break;\n        case 3:\n            [toX, toY, toZ] = args;\n            fromX = fromY = fromZ = 0;\n            break;\n        default:\n            illegalArity(args.length);\n    }\n    const rx = range(fromX, toX, stepX);\n    const ry = range(fromY, toY, stepY);\n    for (let z of range(fromZ, toZ, stepZ)) {\n        for (let y of ry) {\n            for (let x of rx) {\n                yield [x, y, z];\n            }\n        }\n    }\n}\n","import { ensureArray } from \"@thi.ng/arrays\";\n/**\n * Yields iterator which consumes input and yield its values in reverse\n * order. Important: Input MUST be finite.\n *\n * ```\n * [...tx.reverse(\"hello world\")]\n * // [ \"d\", \"l\", \"r\", \"o\", \"w\", \" \", \"o\", \"l\", \"l\", \"e\", \"h\" ]\n * ```\n *\n * @param input\n */\nexport function* reverse(input) {\n    const _input = ensureArray(input);\n    let n = _input.length;\n    while (--n >= 0) {\n        yield _input[n];\n    }\n}\n","/**\n * Yields an iterator of all `src` values, followed by the same values\n * in reverse order. Efficiently builds the reversed order via an\n * internal linked list.\n *\n * ```\n * [...symmetric([1, 2, 3])]\n * // [ 1, 2, 3, 3, 2, 1 ]\n * ```\n *\n * @param src\n */\nexport function* symmetric(src) {\n    let head = undefined;\n    for (let x of src) {\n        head = { x, n: head };\n        yield x;\n    }\n    while (head) {\n        yield head.x;\n        head = head.n;\n    }\n}\n","import { normRange } from \"./norm-range\";\nimport { repeat } from \"./repeat\";\n/**\n * Keyframe based interpolator. Yields a sequence of `num+1` equally\n * spaced, tweened values from given keyframe tuples (`stops`).\n * Keyframes are defined as `[time, value]` tuples. Only values in the\n * closed `[min..max]` time interval will be computed.\n *\n * Interpolation happens in two stages: First the given `init` function\n * is called to transform/prepare pairs of consecutive keyframes into a\n * single interval (user defined). Then, to produce each tweened value\n * calls `mix` with the currently active interval and interpolation time\n * value `t` (re-normalized and relative to current interval). The\n * iterator yields results of these `mix()` function calls.\n *\n * Depending on the overall `num`ber of samples requested and the\n * distance between keyframes, some keyframes MIGHT be skipped. E.g. if\n * requesting 10 samples within [0,1], the interval between two\n * successive keyframes at 0.12 and 0.19 would be skipped entirely,\n * since samples will only be taken at multiples of `1/num` (i.e. 0.0,\n * 0.1, 0.2... in this example).\n *\n * The given keyframe times can lie outside the `min`/`max` range and\n * also don't need to cover the range fully. In the latter case, tweened\n * values before the first or after the last keyframe will yield the\n * value of the first/last keyframe. If only a single keyframe is given\n * in total, all `num` yielded samples will be that keyframe's\n * transformed value.\n *\n * ```\n * [...tween({\n *   num: 10,\n *   min: 0,\n *   max: 100,\n *   init: (a, b) => [a, b],\n *   mix: ([a, b], t) => Math.floor(a + (b - a) * t),\n *   stops: [[20, 100], [50, 200], [80, 0]]\n * })]\n * // [ 100, 100, 100, 133, 166, 200, 133, 66, 0, 0, 0 ]\n * ```\n *\n * Using easing functions (e.g. from thi.ng/math), non-linear\n * interpolation within each keyframe interval can be achieved:\n *\n * ```\n * import { mix, smoothStep } from \"@thi.ng/math\"\n *\n * [...tween({\n *   num: 10,\n *   min: 0,\n *   max: 100,\n *   init: (a, b) => [a, b],\n *   mix: ([a, b], t) => Math.floor(mix(a, b, smoothStep(0.1, 0.9, t))),\n *   stops: [[20, 100], [50, 200], [80, 0]]\n * })]\n * // [ 100, 100, 100, 120, 179, 200, 158, 41, 0, 0, 0 ]\n * ```\n * @see TweenOpts\n * @see interpolate\n * @see interpolateHermite\n * @see interpolateLinear\n *\n * @param opts\n */\nexport function* tween(opts) {\n    const { min, max, num, init, mix, stops } = opts;\n    let l = stops.length;\n    if (l < 1)\n        return;\n    if (l === 1) {\n        yield* repeat(mix(init(stops[0][1], stops[0][1]), 0), num);\n    }\n    stops.sort((a, b) => a[0] - b[0]);\n    stops[l - 1][0] < max && stops.push([max, stops[l - 1][1]]);\n    stops[0][0] > min && stops.unshift([min, stops[0][1]]);\n    const range = max - min;\n    let start = stops[0][0];\n    let end = stops[1][0];\n    let delta = end - start;\n    let interval = init(stops[0][1], stops[1][1]);\n    let i = 1;\n    l = stops.length;\n    for (let t of normRange(num)) {\n        t = min + range * t;\n        if (t > end) {\n            while (i < l && t > stops[i][0])\n                i++;\n            start = stops[i - 1][0];\n            end = stops[i][0];\n            delta = end - start;\n            interval = init(stops[i - 1][1], stops[i][1]);\n        }\n        yield mix(interval, delta !== 0 ? (t - start) / delta : 0);\n    }\n}\n","export function* vals(x) {\n    for (let k in x) {\n        if (x.hasOwnProperty(k)) {\n            yield x[k];\n        }\n    }\n}\n","import { ensureArray } from \"@thi.ng/arrays\";\nimport { illegalArgs } from \"@thi.ng/errors\";\nimport { inRange } from \"@thi.ng/math\";\n/**\n * Yields iterator of `src` with the last `numLeft` values of `src`\n * prepended at the beginning and/or the first `numRight` values\n * appended at the end. `numLeft` defaults to 1 and `numRight` defaults\n * to same value as `numLeft`, therefore wraps both sides by default and\n * throws error if either `nXXX` < 0 or larger than `src.length`.\n *\n * @see extendSides\n * @see padSides\n *\n * @param src\n * @param numLeft\n * @param numRight\n */\nexport function* wrapSides(src, numLeft = 1, numRight = numLeft) {\n    const _src = ensureArray(src);\n    !(inRange(numLeft, 0, _src.length) && inRange(numRight, 0, _src.length)) &&\n        illegalArgs(`allowed wrap range: [0..${_src.length}]`);\n    if (numLeft > 0) {\n        for (let m = _src.length, i = m - numLeft; i < m; i++) {\n            yield _src[i];\n        }\n    }\n    yield* _src;\n    if (numRight > 0) {\n        for (let i = 0; i < numRight; i++) {\n            yield _src[i];\n        }\n    }\n}\n","export * from \"./iterator\";\nexport * from \"./reduce\";\nexport * from \"./reduced\";\nexport * from \"./run\";\nexport * from \"./step\";\nexport * from \"./transduce\";\nexport * from \"./rfn/add\";\nexport * from \"./rfn/assoc-map\";\nexport * from \"./rfn/assoc-obj\";\nexport * from \"./rfn/conj\";\nexport * from \"./rfn/count\";\nexport * from \"./rfn/div\";\nexport * from \"./rfn/every\";\nexport * from \"./rfn/fill\";\nexport * from \"./rfn/frequencies\";\nexport * from \"./rfn/group-binary\";\nexport * from \"./rfn/group-by-map\";\nexport * from \"./rfn/group-by-obj\";\nexport * from \"./rfn/last\";\nexport * from \"./rfn/max-compare\";\nexport * from \"./rfn/max\";\nexport * from \"./rfn/mean\";\nexport * from \"./rfn/min-compare\";\nexport * from \"./rfn/min\";\nexport * from \"./rfn/mul\";\nexport * from \"./rfn/push-copy\";\nexport * from \"./rfn/push\";\nexport * from \"./rfn/reductions\";\nexport * from \"./rfn/some\";\nexport * from \"./rfn/str\";\nexport * from \"./rfn/sub\";\nexport * from \"./xform/benchmark\";\nexport * from \"./xform/cat\";\nexport * from \"./xform/converge\";\nexport * from \"./xform/convolve\";\nexport * from \"./xform/dedupe\";\nexport * from \"./xform/delayed\";\nexport * from \"./xform/distinct\";\nexport * from \"./xform/drop-nth\";\nexport * from \"./xform/drop-while\";\nexport * from \"./xform/drop\";\nexport * from \"./xform/duplicate\";\nexport * from \"./xform/filter\";\nexport * from \"./xform/filter-fuzzy\";\nexport * from \"./xform/flatten-with\";\nexport * from \"./xform/flatten\";\nexport * from \"./xform/indexed\";\nexport * from \"./xform/interleave\";\nexport * from \"./xform/interpolate\";\nexport * from \"./xform/interpolate-hermite\";\nexport * from \"./xform/interpolate-linear\";\nexport * from \"./xform/interpose\";\nexport * from \"./xform/keep\";\nexport * from \"./xform/labeled\";\nexport * from \"./xform/map-deep\";\nexport * from \"./xform/map-indexed\";\nexport * from \"./xform/map-keys\";\nexport * from \"./xform/map-nth\";\nexport * from \"./xform/map-vals\";\nexport * from \"./xform/map\";\nexport * from \"./xform/mapcat\";\nexport * from \"./xform/match-first\";\nexport * from \"./xform/match-last\";\nexport * from \"./xform/moving-average\";\nexport * from \"./xform/moving-median\";\nexport * from \"./xform/multiplex\";\nexport * from \"./xform/multiplex-obj\";\nexport * from \"./xform/noop\";\nexport * from \"./xform/pad-last\";\nexport * from \"./xform/page\";\nexport * from \"./xform/partition-by\";\nexport * from \"./xform/partition-of\";\nexport * from \"./xform/partition-sort\";\nexport * from \"./xform/partition-sync\";\nexport * from \"./xform/partition\";\nexport * from \"./xform/pluck\";\nexport * from \"./xform/rename\";\nexport * from \"./xform/sample\";\nexport * from \"./xform/scan\";\nexport * from \"./xform/select-keys\";\nexport * from \"./xform/side-effect\";\nexport * from \"./xform/sliding-window\";\nexport * from \"./xform/stream-shuffle\";\nexport * from \"./xform/stream-sort\";\nexport * from \"./xform/struct\";\nexport * from \"./xform/swizzle\";\nexport * from \"./xform/take-nth\";\nexport * from \"./xform/take-last\";\nexport * from \"./xform/take-while\";\nexport * from \"./xform/take\";\nexport * from \"./xform/throttle\";\nexport * from \"./xform/throttle-time\";\nexport * from \"./xform/toggle\";\nexport * from \"./xform/trace\";\nexport * from \"./xform/word-wrap\";\nexport * from \"./func/comp\";\nexport * from \"./func/compr\";\nexport * from \"./func/deep-transform\";\nexport * from \"./func/juxtr\";\nexport * from \"./func/key-selector\";\nexport * from \"./func/lookup\";\nexport * from \"./func/renamer\";\nexport * from \"./iter/as-iterable\";\nexport * from \"./iter/choices\";\nexport * from \"./iter/concat\";\nexport * from \"./iter/cycle\";\nexport * from \"./iter/extend-sides\";\nexport * from \"./iter/iterate\";\nexport * from \"./iter/keys\";\nexport * from \"./iter/norm-range\";\nexport * from \"./iter/pad-sides\";\nexport * from \"./iter/pairs\";\nexport * from \"./iter/permutations\";\nexport * from \"./iter/range\";\nexport * from \"./iter/range2d\";\nexport * from \"./iter/range3d\";\nexport * from \"./iter/repeat\";\nexport * from \"./iter/repeatedly\";\nexport * from \"./iter/reverse\";\nexport * from \"./iter/symmetric\";\nexport * from \"./iter/tween\";\nexport * from \"./iter/vals\";\nexport * from \"./iter/wrap-sides\";\nexport * from \"./iter/zip\";\n","import { implementsFunction, isMap, isSet } from \"@thi.ng/checks\";\nexport const empty = (x, ctor) => implementsFunction(x, \"empty\")\n    ? x.empty()\n    : new (x[Symbol.species] || ctor)();\nexport const copy = (x, ctor) => implementsFunction(x, \"copy\")\n    ? x.copy()\n    : new (x[Symbol.species] || ctor)(x);\nexport const first = (x) => x[Symbol.iterator]().next().value;\nexport const objValues = (src) => {\n    const vals = [];\n    for (let k in src) {\n        src.hasOwnProperty(k) && vals.push(src[k]);\n    }\n    return vals;\n};\nexport const ensureMap = (x) => isMap(x) ? x : new Map(x);\nexport const ensureSet = (x) => isSet(x) ? x : new Set(x);\n","import { reduce } from \"@thi.ng/transducers\";\nimport { ensureSet } from \"../utils\";\nexport const xformSetOp = (rfn, op, src) => src\n    ? reduce(rfn(), src)\n    : [\n        () => null,\n        (acc) => acc || new Set(),\n        (acc, x) => (!acc ? ensureSet(x) : op(acc, ensureSet(x)))\n    ];\n","import { xformSetOp } from \"./internal/xform-setop\";\nimport { into } from \"./into\";\nimport { copy, empty } from \"./utils\";\n/**\n * Computes the difference of sets `a - b` and writes results to new set\n * or optionally given set `out` (assumed to be empty for correct\n * results).\n *\n * @param a\n * @param b\n * @param out\n */\nexport const difference = (a, b, out) => {\n    if (a === b) {\n        return out || empty(a, Set);\n    }\n    out = out ? into(out, a) : copy(a, Set);\n    for (let i of b) {\n        out.delete(i);\n    }\n    return out;\n};\nexport function differenceR(src) {\n    return xformSetOp(differenceR, difference, src);\n}\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { ArraySet } from \"./array-set\";\nimport { dissoc } from \"./dissoc\";\nimport { equivMap } from \"./internal/equiv\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst __map = (map) => __private.get(map).map;\nexport class EquivMap extends Map {\n    /**\n     * Converts given vanilla object into an `EquivMap` instance with\n     * default (or optionally provided) options and returns it. By\n     * default uses strict `===` equality check for `equiv` option.\n     *\n     * @param obj\n     * @param opts\n     */\n    static fromObject(obj, opts) {\n        const m = new EquivMap(null, Object.assign({ equiv: (a, b) => a === b }, opts));\n        for (let k in obj) {\n            obj.hasOwnProperty(k) && m.set(k, obj[k]);\n        }\n        return m;\n    }\n    /**\n     * Creates a new instance with optional initial key-value pairs and\n     * provided options. If no `opts` are given, uses `ArraySet` for\n     * storing canonical keys and `@thi.ng/equiv` for checking key\n     * equivalence.\n     *\n     * @param pairs\n     * @param opts\n     */\n    constructor(pairs, opts) {\n        super();\n        const _opts = Object.assign({ equiv, keys: ArraySet }, opts);\n        __private.set(this, {\n            keys: new _opts.keys(null, { equiv: _opts.equiv }),\n            map: new Map(),\n            opts: _opts\n        });\n        if (pairs) {\n            this.into(pairs);\n        }\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    get [Symbol.species]() {\n        return EquivMap;\n    }\n    get [Symbol.toStringTag]() {\n        return \"EquivMap\";\n    }\n    get size() {\n        return __private.get(this).keys.size;\n    }\n    clear() {\n        const $this = __private.get(this);\n        $this.keys.clear();\n        $this.map.clear();\n    }\n    empty() {\n        return new EquivMap(null, __private.get(this).opts);\n    }\n    copy() {\n        const $this = __private.get(this);\n        const m = new EquivMap();\n        __private.set(m, {\n            keys: $this.keys.copy(),\n            map: new Map($this.map),\n            opts: $this.opts\n        });\n        return m;\n    }\n    equiv(o) {\n        return equivMap(this, o);\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        key = $this.keys.get(key, SEMAPHORE);\n        if (key !== SEMAPHORE) {\n            $this.map.delete(key);\n            $this.keys.delete(key);\n            return true;\n        }\n        return false;\n    }\n    dissoc(keys) {\n        return dissoc(this, keys);\n    }\n    forEach(fn, thisArg) {\n        for (let pair of __map(this)) {\n            fn.call(thisArg, pair[1], pair[0], this);\n        }\n    }\n    get(key, notFound) {\n        const $this = __private.get(this);\n        key = $this.keys.get(key, SEMAPHORE);\n        if (key !== SEMAPHORE) {\n            return $this.map.get(key);\n        }\n        return notFound;\n    }\n    has(key) {\n        return __private.get(this).keys.has(key);\n    }\n    set(key, value) {\n        const $this = __private.get(this);\n        const k = $this.keys.get(key, SEMAPHORE);\n        if (k !== SEMAPHORE) {\n            $this.map.set(k, value);\n        }\n        else {\n            $this.keys.add(key);\n            $this.map.set(key, value);\n        }\n        return this;\n    }\n    into(pairs) {\n        return into(this, pairs);\n    }\n    entries() {\n        return __map(this).entries();\n    }\n    keys() {\n        return __map(this).keys();\n    }\n    values() {\n        return __map(this).values();\n    }\n    opts() {\n        return __private.get(this).opts;\n    }\n}\n","export const MASKS = new Array(33).fill(0).map((_, i) => Math.pow(2, i) - 1);\n","/**\n * Aligns `addr` to next multiple of `size`. The latter must be a power\n * of 2.\n *\n * @param addr\n * @param size\n */\nexport const align = (addr, size) => (size--, (addr + size) & ~size);\n/**\n * Returns true if `addr` is aligned to wordsize `size`.\n */\nexport const isAligned = (addr, size) => !(addr & (size - 1));\n","/**\n * Returns number of 1 bits in `x`.\n *\n * @param x\n */\nexport const popCount = (x) => ((x = x - ((x >>> 1) & 0x55555555)),\n    (x = (x & 0x33333333) + ((x >>> 2) & 0x33333333)),\n    (((x + (x >>> 4)) & 0xf0f0f0f) * 0x1010101) >>> 24);\n/**\n * https://en.wikipedia.org/wiki/Hamming_distance\n *\n * @param x\n * @param y\n */\nexport const hammingDist = (x, y) => popCount(x ^ y);\n/**\n * Math.clz32() polyfill (corrected).\n *\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/clz32$revision/1426816\n *\n * @param x\n */\nexport const clz32 = (x) => x !== 0 ? 31 - ((Math.log(x >>> 0) / Math.LN2) | 0) : 32;\nexport const ctz32 = (x) => {\n    let c = 32;\n    x &= -x;\n    x && c--;\n    x & 0x0000ffff && (c -= 16);\n    x & 0x00ff00ff && (c -= 8);\n    x & 0x0f0f0f0f && (c -= 4);\n    x & 0x33333333 && (c -= 2);\n    x & 0x55555555 && (c -= 1);\n    return c;\n};\n/**\n * Returns the number of bits required to encode `x` (MUST be > 0).\n *\n * @param x\n */\nexport const bitSize = (x) => Math.ceil(Math.log(x) / Math.LN2);\n","import { MASKS } from \"./api\";\n/**\n * Creates bit mask by enabling bit `a` to bit `b-1`, both in range\n * 0-32. `b` MUST be >= `a`.\n *\n * ```\n * defMask(1,31).toString(16) // 7ffffffe\n * defMask(3,8).toString(16)  // f8\n * ```\n *\n * @param a\n * @param b\n */\nexport const defMask = (a, b) => (~MASKS[a] & MASKS[b]) >>> 0;\n/**\n * Returns unsigned version of `x` with only lowest `n` bits.\n *\n * @param n\n * @param x\n */\nexport const maskL = (n, x) => (x & MASKS[n]) >>> 0;\n/**\n * Returns unsigned version of `x` with only highest `n` bits.\n *\n * @param n\n * @param x\n */\nexport const maskH = (n, x) => (x & ~MASKS[n]) >>> 0;\n","import { defMask } from \"./mask\";\n/**\n * Clears bit in given uint `x`.\n *\n * @param x value\n * @param bit bit number (0..31)\n */\nexport const bitClear = (x, bit) => (x & ~(1 << bit)) >>> 0;\n/**\n * Toggles bit in given uint `x`.\n *\n * @param x\n * @param bit\n */\nexport const bitFlip = (x, bit) => (x ^ (1 << bit)) >>> 0;\n/**\n * Sets bit in given uint `x`.\n *\n * @param x value\n * @param bit bit number (0..31)\n */\nexport const bitSet = (x, bit) => (x | (1 << bit)) >>> 0;\nexport const bitSetWindow = (x, y, from, to) => {\n    const m = defMask(from, to);\n    return (x & ~m) | ((y << (1 << from)) & m);\n};\nexport const bitClearWindow = (x, from, to) => x & ~defMask(from, to);\n","const F32 = new Float32Array(1);\nconst I32 = new Int32Array(F32.buffer);\nconst U32 = new Uint32Array(F32.buffer);\nexport const floatToIntBits = (x) => ((F32[0] = x), I32[0]);\nexport const floatToUintBits = (x) => ((F32[0] = x), U32[0]);\nexport const intBitsToFloat = (x) => ((I32[0] = x), F32[0]);\nexport const uintBitsToFloat = (x) => ((U32[0] = x), F32[0]);\n/**\n * Converts given float into a sortable integer representation, using\n * raw bitwise conversion via `floatToIntBits()`.\n *\n * https://github.com/tzaeschke/phtree/blob/master/PhTreeRevisited.pdf\n * (page 3)\n *\n * @param x\n */\nexport const floatToSortableInt = (x) => {\n    if (x === -0)\n        x = 0;\n    const i = floatToIntBits(x);\n    return x < 0 ? ~i | (1 << 31) : i;\n};\n","/**\n * Converts 32bit unsigned int to Gray code (reflected binary). Gray\n * codes of successive values always have a Hamming distance of 1 (i.e.\n * only 1 bit changes at a time).\n *\n * https://en.wikipedia.org/wiki/Gray_code\n *\n * @param x u32\n */\nexport const encodeGray32 = (x) => (x ^ (x >>> 1)) >>> 0;\n/**\n * Converts 32bit Gray code to binary / unsigned int.\n *\n * https://en.wikipedia.org/wiki/Gray_code\n */\nexport const decodeGray32 = (x) => {\n    x = x ^ (x >>> 16);\n    x = x ^ (x >>> 8);\n    x = x ^ (x >>> 4);\n    x = x ^ (x >>> 2);\n    x = x ^ (x >>> 1);\n    return x >>> 0;\n};\n","import { maskL } from \"./mask\";\nexport const bitNot = (n, x) => maskL(n, ~x);\nexport const bitAnd = (n, a, b) => maskL(n, a & b);\nexport const bitNand = (n, a, b) => maskL(n, ~(a & b));\nexport const bitOr = (n, a, b) => maskL(n, a | b);\nexport const bitNor = (n, a, b) => maskL(n, ~(a & b));\nexport const bitXor = (n, a, b) => maskL(n, a ^ b);\nexport const bitXnor = (n, a, b) => maskL(n, ~(a ^ b));\nexport const bitImply = (n, a, b) => maskL(n, ~a | b);\nexport const bitAoi21 = (n, a, b, c) => maskL(n, ~(a | (b & c)));\nexport const bitOai21 = (n, a, b, c) => maskL(n, ~(a & (b | c)));\nexport const bitAoi22 = (n, a, b, c, d) => maskL(n, ~((a & b) | (c & d)));\nexport const bitOai22 = (n, a, b, c, d) => maskL(n, ~((a | b) & (c | d)));\nexport const bitMux = (n, a, b, s) => maskL(n, (a & ~s) | (b & s));\nexport const bitDemux = (n, a, b, s) => [maskL(n, a & ~s), maskL(n, b & s)];\n","// http://graphics.stanford.edu/~seander/bithacks.html\nexport const isPow2 = (x) => !!x && !(x & (x - 1));\nexport const ceilPow2 = (x) => {\n    x += (x === 0);\n    --x;\n    x |= x >>> 1;\n    x |= x >>> 2;\n    x |= x >>> 4;\n    x |= x >>> 8;\n    x |= x >>> 16;\n    return x + 1;\n};\nexport const floorPow2 = (x) => {\n    x |= x >>> 1;\n    x |= x >>> 2;\n    x |= x >>> 4;\n    x |= x >>> 8;\n    x |= x >>> 16;\n    return x - (x >>> 1);\n};\n","/**\n * Rotates `x` `n` bits to the left.\n *\n * @param x\n * @param n\n */\nexport const rotateLeft = (x, n) => ((x << n) | (x >>> (32 - n))) >>> 0;\n/**\n * Rotates `x` `n` bits to the right.\n *\n * @param x\n * @param n\n */\nexport const rotateRight = (x, n) => ((x >>> n) | (x << (32 - n))) >>> 0;\n","/**\n * Repeats lowest nibble of `x` as 24 bit uint.\n *\n * @param x\n */\nexport const splat4_24 = (x) => (x & 0xf) * 0x111111;\n/**\n * Repeats lowest nibble of `x` as 32 bit uint.\n *\n * @param x\n */\nexport const splat4_32 = (x) => ((x & 0xf) * 0x11111111) >>> 0;\n/**\n * Repeats lowest byte of `x` as 24 bit uint.\n *\n * @param x\n */\nexport const splat8_24 = (x) => (x & 0xff) * 0x010101;\n/**\n * Repeats lowest byte of `x` as 32 bit uint.\n *\n * @param x\n */\nexport const splat8_32 = (x) => ((x & 0xff) * 0x01010101) >>> 0;\n/**\n * Repeats lowest 16bit of `x` as 32 bit uint.\n *\n * @param x\n */\nexport const splat16_32 = (x) => ((x &= 0xffff), ((x << 16) | x) >>> 0);\n/**\n * Returns true if bits 0-3 are same as bits 4-7.\n *\n * @param x\n */\nexport const same4 = (x) => ((x >> 4) & 0xf) === (x & 0xf);\n/**\n * Returns true if bits 0-7 are same as bits 8-15.\n *\n * @param x\n */\nexport const same8 = (x) => ((x >> 8) & 0xff) === (x & 0xff);\n","/**\n * Extracts 8-bit lane from given 32bit uint.\n *\n * - Lane #0: bits 24-31\n * - Lane #1: bits 16-23\n * - Lane #2: bits 8-15\n * - Lane #3: bits 0-7\n *\n * @param x\n * @param lane\n */\nexport const lane8 = (x, lane) => (x >>> ((3 - lane) << 3)) & 0xff;\n/**\n * Extracts 4-bit lane from given 32bit uint.\n *\n * - Lane #0: bits 28-31\n * - Lane #1: bits 24-27\n * - Lane #2: bits 20-23\n * - Lane #3: bits 16-19\n * - Lane #4: bits 12-15\n * - Lane #5: bits 8-11\n * - Lane #6: bits 4-7\n * - Lane #7: bits 0-3\n *\n * @param x\n * @param lane\n */\nexport const lane4 = (x, lane) => (x >>> ((7 - lane) << 2)) & 0xf;\nexport const lane2 = (x, lane) => (x >>> ((15 - lane) << 1)) & 0x3;\n/**\n * Sets 8-bit `lane` with value`y` in `x`.\n *\n * @see lane8\n *\n * @param x\n * @param y\n * @param lane\n */\nexport const setLane8 = (x, y, lane) => {\n    const l = (3 - lane) << 3;\n    return ((~(0xff << l) & x) | ((y & 0xff) << l)) >>> 0;\n};\n/**\n * Sets 4-bit `lane` with value `y` in `x`.\n *\n * @see lane4\n *\n * @param x\n * @param y\n * @param lane\n */\nexport const setLane4 = (x, y, lane) => {\n    const l = (7 - lane) << 2;\n    return ((~(0xf << l) & x) | ((y & 0xf) << l)) >>> 0;\n};\n/**\n * Sets 2-bit `lane` with value `y` in `x`.\n *\n * @see lane2\n *\n * @param x\n * @param y\n * @param lane\n */\nexport const setLane2 = (x, y, lane) => {\n    const l = (15 - lane) << 1;\n    return ((~(0x3 << l) & x) | ((y & 0x3) << l)) >>> 0;\n};\n/**\n * Re-orders byte lanes in given order (MSB).\n *\n * ```\n * swizzle(0x12345678, 3, 2, 1, 0) // 0x78563412\n * swizzle(0x12345678, 1, 0, 3, 2) // 0x34127856\n * swizzle(0x12345678, 2, 2, 0, 0) // 0x56561212\n * ```\n *\n * @param x\n * @param a\n * @param b\n * @param c\n * @param d\n */\nexport const swizzle8 = (x, a, b, c, d) => ((lane8(x, a) << 24) |\n    (lane8(x, b) << 16) |\n    (lane8(x, c) << 8) |\n    lane8(x, d)) >>>\n    0;\n/**\n *\n * @param x\n * @param a\n * @param b\n * @param c\n * @param d\n * @param e\n * @param f\n * @param g\n * @param h\n */\nexport const swizzle4 = (x, a, b, c, d, e, f, g, h) => ((lane4(x, a) << 28) |\n    (lane4(x, b) << 24) |\n    (lane4(x, c) << 20) |\n    (lane4(x, d) << 16) |\n    (lane4(x, e) << 12) |\n    (lane4(x, f) << 8) |\n    (lane4(x, g) << 4) |\n    lane4(x, h)) >>>\n    0;\n/**\n * Same as `swizzle8(x, 3, 2, 1, 0)`, but faster.\n *\n * @param x\n */\nexport const flipBytes = (x) => ((x >>> 24) | ((x >> 8) & 0xff00) | ((x & 0xff00) << 8) | (x << 24)) >>> 0;\n","export * from \"./api\";\nexport * from \"./align\";\nexport * from \"./count\";\nexport * from \"./edit\";\nexport * from \"./float\";\nexport * from \"./gray\";\nexport * from \"./logic\";\nexport * from \"./mask\";\nexport * from \"./pow\";\nexport * from \"./rotate\";\nexport * from \"./splat\";\nexport * from \"./swizzle\";\n","import { ceilPow2 } from \"@thi.ng/binary\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { dissoc } from \"./dissoc\";\nimport { equivMap } from \"./internal/equiv\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst __iterator = (map, id) => function* () {\n    for (let p of __private.get(map).bins) {\n        if (p)\n            yield p[id];\n    }\n};\nconst DEFAULT_CAP = 16;\n/**\n * Configurable hash map implementation w/ ES6 Map API. Uses open\n * addressing / linear probing to resolve key collisions. Supports any\n * key types via mandatory user supplied hash function.\n *\n * See `HashMapOpts` for further configuration & behavior details.\n *\n * ```\n * import { HashMap } from \"@thi.ng/associative\"\n * import { hash } from \"@thi.ng/vectors\"\n *\n * m = new HashMap([], { hash })\n * m.set([1, 2], \"a\");\n * m.set([3, 4], \"b\");\n * m.set([1, 2], \"c\");\n * // HashMap { [ 1, 2 ] => 'c', [ 3, 4 ] => 'b' }\n * ```\n *\n */\nexport class HashMap extends Map {\n    constructor(pairs, opts) {\n        super();\n        const m = ceilPow2(Math.min(opts.cap || DEFAULT_CAP, 4)) - 1;\n        __private.set(this, {\n            hash: opts.hash,\n            equiv: opts.equiv || equiv,\n            load: opts.load || 0.75,\n            mask: m,\n            bins: new Array(m + 1),\n            size: 0\n        });\n        if (pairs) {\n            this.into(pairs);\n        }\n    }\n    get [Symbol.species]() {\n        return HashMap;\n    }\n    get [Symbol.toStringTag]() {\n        return \"HashMap\";\n    }\n    get size() {\n        return __private.get(this).size;\n    }\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    *entries() {\n        for (let p of __private.get(this).bins) {\n            if (p)\n                yield [p[0], p[1]];\n        }\n    }\n    keys() {\n        return __iterator(this, 0)();\n    }\n    values() {\n        return __iterator(this, 1)();\n    }\n    forEach(fn, thisArg) {\n        for (let pair of __private.get(this).bins) {\n            fn.call(thisArg, pair[1], pair[0], this);\n        }\n    }\n    clear() {\n        const $this = __private.get(this);\n        $this.bins = new Array(DEFAULT_CAP);\n        $this.mask = 15;\n        $this.size = 0;\n    }\n    empty() {\n        return new HashMap(null, this.opts({ cap: DEFAULT_CAP }));\n    }\n    copy() {\n        const $this = __private.get(this);\n        const m = new HashMap(null, this.opts({ cap: 4 }));\n        Object.assign(__private.get(m), {\n            bins: $this.bins.slice(),\n            mask: $this.mask,\n            size: $this.size\n        });\n        return m;\n    }\n    equiv(o) {\n        return equivMap(this, o);\n    }\n    has(key) {\n        const $this = __private.get(this);\n        const i = this.find(key, $this);\n        return i >= 0 && $this.bins[i] != undefined;\n    }\n    get(key, notFound) {\n        const $this = __private.get(this);\n        const i = this.find(key, $this);\n        return i >= 0 && $this.bins[i] ? $this.bins[i][1] : notFound;\n    }\n    set(key, val) {\n        const $this = __private.get(this);\n        let i = this.find(key, $this);\n        if (i >= 0 && $this.bins[i]) {\n            $this.bins[i][1] = val;\n            return this;\n        }\n        if ($this.size > $this.mask * $this.load) {\n            this.resize($this);\n            i = this.find(key, $this);\n        }\n        $this.bins[i] = [key, val];\n        $this.size++;\n        return this;\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        let i = this.find(key, $this);\n        const bins = $this.bins;\n        if (i >= 0 && !bins[i]) {\n            return false;\n        }\n        $this.size--;\n        const m = $this.mask;\n        let j = i;\n        let k;\n        while (true) {\n            delete bins[i];\n            do {\n                j = (j + 1) & m;\n                if (!bins[j])\n                    return true;\n                k = $this.hash(bins[j][0]) & m;\n            } while (i <= j ? i < k && k <= j : i < k || k <= j);\n            bins[i] = bins[j];\n            i = j;\n        }\n    }\n    into(pairs) {\n        return into(this, pairs);\n    }\n    dissoc(keys) {\n        return dissoc(this, keys);\n    }\n    opts(overrides) {\n        const $this = __private.get(this);\n        return Object.assign({ hash: $this.hash, equiv: $this.equiv, load: $this.load, cap: $this.mask + 1 }, overrides);\n    }\n    find(key, $this) {\n        const m = $this.mask;\n        const bins = $this.bins;\n        const equiv = $this.equiv;\n        let i = m;\n        let h = $this.hash(key) & m;\n        while (bins[h] && !equiv(bins[h][0], key)) {\n            i--;\n            if (i < 0)\n                return -1;\n            h = (h + 1) & $this.mask;\n        }\n        return h;\n    }\n    resize($this) {\n        const src = $this.bins;\n        const cap = ($this.mask + 1) * 2;\n        $this.bins = new Array(cap);\n        $this.mask = cap - 1;\n        $this.size = 0;\n        for (let p of src) {\n            if (p)\n                this.set(p[0], p[1]);\n        }\n    }\n}\n","import { empty } from \"./utils\";\n/**\n * Returns a new map of same type as input only containing given keys\n * (and only if they existed in the original map).\n *\n * @param src\n * @param ks selected keys\n */\nexport const selectKeysMap = (src, ks) => {\n    const dest = empty(src, Map);\n    for (let k of ks) {\n        src.has(k) && dest.set(k, src.get(k));\n    }\n    return dest;\n};\n/**\n * Returns a new object only containing given keys (and only if they\n * existed in the original).\n *\n * @param src\n * @param ks\n */\nexport const selectKeysObj = (src, ks) => {\n    const dest = {};\n    for (let k of ks) {\n        src.hasOwnProperty(k) && (dest[k] = src[k]);\n    }\n    return dest;\n};\n","import { EquivMap } from \"./equiv-map\";\nimport { selectKeysObj } from \"./select-keys\";\nimport { empty } from \"./utils\";\n/**\n * Takes an iterable of plain objects and array of indexing keys. Calls\n * `selectKeysObj` on each value and uses returned objects as new keys\n * to group original values. Returns a new `EquivMap` of sets.\n *\n * ```\n * indexed(\n *   new Set([{a: 1, b: 1}, {a: 1, b: 2}, {a: 1, b: 1, c: 2}]),\n *   [\"a\",\"b\"]\n * )\n * // EquivMap {\n * //   { a: 1, b: 1 } => Set { { a: 1, b: 1 }, { a: 1, b: 1, c: 2 } },\n * //   { a: 1, b: 2 } => Set { { a: 1, b: 2 } } }\n * ```\n *\n * @param records objects to index\n * @param ks keys used for indexing\n */\nexport const indexed = (records, ks) => {\n    const res = new EquivMap();\n    let x, ik, rv;\n    for (x of records) {\n        ik = selectKeysObj(x, ks);\n        rv = res.get(ik);\n        !rv && res.set(ik, (rv = empty(records, Set)));\n        rv.add(x);\n    }\n    return res;\n};\n","import { xformSetOp } from \"./internal/xform-setop\";\nimport { into } from \"./into\";\nimport { empty } from \"./utils\";\n/**\n * Computes the intersection of sets `a` and `b` and writes results into\n * new set or optionally given set `out` (assumed to be empty for\n * correct results). If `out` is *not* given, the returned Set type will\n * be that of `a` (provided it defines `Symbol.species`).\n *\n * @param a\n * @param b\n * @param out\n */\nexport const intersection = (a, b, out) => {\n    out = out || empty(a, Set);\n    if (a === b) {\n        return into(out, a);\n    }\n    if (b.size < a.size) {\n        return intersection(b, a, out);\n    }\n    for (let i of b) {\n        if (a.has(i)) {\n            out.add(i);\n        }\n    }\n    return out;\n};\nexport function intersectionR(src) {\n    return xformSetOp(intersectionR, intersection, src);\n}\n","/**\n * Returns a new map in which the original values are used as keys and\n * original keys as values. If `dest` is given, writes results in that\n * map instead. Depending on the value type of `src` and/or if the\n * inverted map should use custom key equality semantics as provided by\n * the Map types in this package, you MUST provide a `dest` map, since\n * the default `dest` will only be a standard ES6 Map.\n *\n * ```\n * invertMap(new Map(), new Map([[\"a\", 1], [\"b\", 2]]));\n * // Map { 1 => 'a', 2 => 'b' }\n * ```\n *\n * @param src\n * @param dest\n */\nexport const invertMap = (src, dest) => {\n    dest = dest || new Map();\n    for (let p of src) {\n        dest.set(p[1], p[0]);\n    }\n    return dest;\n};\n/**\n * Returns a new object in which the original values are used as keys\n * and original keys as values. If `dest` is given, writes results in\n * that object instead.\n *\n * ```\n * invertObj({a: 1, b: 2})\n * // { '1': 'a', '2': 'b' }\n * ```\n *\n * @param src\n * @param dest\n */\nexport const invertObj = (src, dest = {}) => {\n    for (let k in src) {\n        dest[src[k]] = k;\n    }\n    return dest;\n};\n","/**\n * Merges all given maps in left-to-right order into `dest`.\n * Returns `dest`.\n *\n * @param dest\n * @param xs\n */\nexport const mergeMap = (dest, ...xs) => {\n    for (let x of xs) {\n        for (let pair of x) {\n            dest.set(pair[0], pair[1]);\n        }\n    }\n    return dest;\n};\n/**\n * Merges all given objects in left-to-right order into `dest`.\n * Returns `dest`.\n *\n * @param dest\n * @param xs\n */\nexport const mergeObj = (dest, ...xs) => Object.assign(dest, ...xs);\n","import { empty } from \"./utils\";\n/**\n * Renames keys in `src` using mapping provided by key map `km`. Does\n * support key swapping / swizzling. Does not modify original.\n *\n * @param src\n * @param km\n * @param out\n */\nexport const renameKeysMap = (src, km, out) => {\n    out = out || empty(src, Map);\n    for (let [k, v] of src) {\n        out.set(km.has(k) ? km.get(k) : k, v);\n    }\n    return out;\n};\n/**\n * Renames keys in `src` using mapping provided by key map `km`. Does\n * support key swapping / swizzling. Does not modify original.\n *\n * ```\n * // swap a & b, rename c\n * renameKeysObj({a: 1, b: 2, c: 3}, {a: \"b\", b: \"a\", c: \"cc\"})\n * // {b: 1, a: 2, cc: 3}\n * ```\n *\n * @param src\n * @param km\n */\nexport const renameKeysObj = (src, km, out = {}) => {\n    for (let k in src) {\n        out[km.hasOwnProperty(k) ? km[k] : k] = src[k];\n    }\n    return out;\n};\n","import { commonKeysObj } from \"./common-keys\";\nimport { indexed } from \"./indexed\";\nimport { invertObj } from \"./invert\";\nimport { mergeObj } from \"./merge\";\nimport { renameKeysObj } from \"./rename-keys\";\nimport { selectKeysObj } from \"./select-keys\";\nimport { empty, first, objValues } from \"./utils\";\n/**\n * Computes the natural join between the two sets of relations. Each set\n * is assumed to have plain objects as values with at least one of the\n * keys present in both sides. Furthermore the objects in each set are\n * assumed to have the same internal structure (i.e. sets of keys).\n * Returns new set of same type as `a`.\n *\n * ```\n * join(\n *   new Set([\n *     {id: 1, name: \"foo\"},\n *     {id: 2, name: \"bar\"},\n *     {id: 3, name: \"baz\"}]),\n *   new Set([\n *     {id: 1, color: \"red\"},\n *     {id: 2, color: \"blue\"}])\n * )\n * // Set {\n * //   { id: 1, color: 'red', name: 'foo' },\n * //   { id: 2, color: 'blue', name: 'bar' }\n * // }\n * ```\n *\n * @param a\n * @param b\n */\nexport const join = (a, b) => {\n    if (a.size && b.size) {\n        const ks = commonKeysObj(first(a) || {}, first(b) || {});\n        let aa, bb;\n        if (a.size <= b.size) {\n            aa = a;\n            bb = b;\n        }\n        else {\n            aa = b;\n            bb = a;\n        }\n        const idx = indexed(aa, ks);\n        const res = empty(a, Set);\n        for (let x of bb) {\n            const found = idx.get(selectKeysObj(x, ks));\n            if (found) {\n                for (let f of found) {\n                    res.add(mergeObj(Object.assign({}, f), x));\n                }\n            }\n        }\n        return res;\n    }\n    return empty(a, Set);\n};\n/**\n * Similar to `join()`, computes the join between two sets of relations,\n * using the given keys in `kmap` only for joining and ignoring others.\n * `kmap` can also be used to translate join keys in `b` where\n * needed. Else, if no renaming is desired, the values in `kmap` should\n * be the same as their respective keys, e.g. `{id: \"id\"}`. Returns new\n * set of same type as `a`.\n *\n * ```\n * joinWith(\n *   new Set([\n *     {id: 1, name: \"foo\"},\n *     {id: 2, name: \"bar\"},\n *     {id: 3, name: \"baz\"}]),\n *   new Set([\n *     {type: 1, color: \"red\"},\n *     {type: 2, color: \"blue\"}]),\n *   {id: \"type\"}\n * )\n * // Set {\n * //   { type: 1, color: 'red', id: 1, name: 'foo' },\n * //   { type: 2, color: 'blue', id: 2, name: 'bar' } }\n * ```\n *\n * @param a\n * @param b\n * @param kmap keys to compute join for\n */\nexport const joinWith = (a, b, kmap) => {\n    if (a.size && b.size) {\n        let aa, bb;\n        let k;\n        if (a.size <= b.size) {\n            aa = a;\n            bb = b;\n            k = invertObj(kmap);\n        }\n        else {\n            aa = b;\n            bb = a;\n            k = kmap;\n        }\n        const idx = indexed(aa, objValues(k));\n        const ks = Object.keys(k);\n        const res = empty(a, Set);\n        for (let x of bb) {\n            const found = idx.get(renameKeysObj(selectKeysObj(x, ks), k));\n            if (found) {\n                for (let f of found) {\n                    res.add(mergeObj(Object.assign({}, f), x));\n                }\n            }\n        }\n        return res;\n    }\n    return empty(a, Set);\n};\njoinWith(new Set([{ a: 1, b: 2 }]), new Set([{ id: 1, c: 2 }]), { a: \"id\" });\n","import { assert } from \"@thi.ng/api\";\nimport { isArrayLike } from \"@thi.ng/checks\";\nimport { compare } from \"@thi.ng/compare\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { illegalArgs } from \"@thi.ng/errors\";\nimport { SYSTEM } from \"@thi.ng/random\";\nimport { isReduced } from \"@thi.ng/transducers\";\nexport class DCons {\n    constructor(src) {\n        this._length = 0;\n        if (src) {\n            this.into(src);\n        }\n    }\n    get length() {\n        return this._length;\n    }\n    copy() {\n        return new DCons(this);\n    }\n    empty() {\n        return new DCons();\n    }\n    clear() {\n        this.release();\n    }\n    release() {\n        let cell = this.head, next;\n        while (cell) {\n            next = cell.next;\n            delete cell.value;\n            delete cell.prev;\n            delete cell.next;\n            cell = next;\n        }\n        delete this.head;\n        delete this.tail;\n        this._length = 0;\n        return true;\n    }\n    compare(o) {\n        const n = this._length;\n        if (n < o._length) {\n            return -1;\n        }\n        else if (n > o._length) {\n            return 1;\n        }\n        else if (n === 0) {\n            return 0;\n        }\n        else {\n            let ca = this.head;\n            let cb = o.head;\n            let res = 0;\n            while (ca && res == 0) {\n                res = compare(ca.value, cb.value);\n                ca = ca.next;\n                cb = cb.next;\n            }\n            return res;\n        }\n    }\n    equiv(o) {\n        if ((o instanceof DCons || isArrayLike(o)) &&\n            this._length === o.length) {\n            if (this._length === 0) {\n                return true;\n            }\n            let cell = this.head;\n            for (let x of o) {\n                if (!equiv(cell.value, x)) {\n                    return false;\n                }\n                cell = cell.next;\n            }\n            return true;\n        }\n        return false;\n    }\n    *[Symbol.iterator]() {\n        let cell = this.head;\n        while (cell) {\n            yield cell.value;\n            cell = cell.next;\n        }\n    }\n    /** {@inheritDoc @thi.ng/api#ISeqable.seq} */\n    seq(start = 0, end = this.length) {\n        if (start >= end || start < 0)\n            return;\n        let cell = this.nthCell(start);\n        const last = this.nthCell(end - 1);\n        const $seq = (cell) => ({\n            first() {\n                return cell.value;\n            },\n            next() {\n                return cell !== last && cell.next ? $seq(cell.next) : undefined;\n            }\n        });\n        return cell ? $seq(cell) : undefined;\n    }\n    *cycle() {\n        while (true) {\n            yield* this;\n        }\n    }\n    /** {@inheritDoc @thi.ng/transducers#IReducible.$reduce} */\n    $reduce(rfn, acc) {\n        let cell = this.head;\n        while (cell && !isReduced(acc)) {\n            acc = rfn(acc, cell.value);\n            cell = cell.next;\n        }\n        return acc;\n    }\n    drop() {\n        const cell = this.head;\n        if (cell) {\n            this.head = cell.next;\n            if (this.head) {\n                delete this.head.prev;\n            }\n            else {\n                delete this.tail;\n            }\n            this._length--;\n            return cell.value;\n        }\n    }\n    cons(value) {\n        const cell = { value, next: this.head };\n        if (this.head) {\n            this.head.prev = cell;\n        }\n        else {\n            this.tail = cell;\n        }\n        this.head = cell;\n        this._length++;\n        return this;\n    }\n    insertBefore(cell, value) {\n        if (!cell) {\n            illegalArgs(\"cell is undefined\");\n        }\n        const newCell = { value, next: cell, prev: cell.prev };\n        if (cell.prev) {\n            cell.prev.next = newCell;\n        }\n        else {\n            this.head = newCell;\n        }\n        cell.prev = newCell;\n        this._length++;\n        return this;\n    }\n    insertAfter(cell, value) {\n        if (!cell) {\n            illegalArgs(\"cell is undefined\");\n        }\n        const newCell = { value, next: cell.next, prev: cell };\n        if (cell.next) {\n            cell.next.prev = newCell;\n        }\n        else {\n            this.tail = newCell;\n        }\n        cell.next = newCell;\n        this._length++;\n        return this;\n    }\n    insertBeforeNth(n, x) {\n        if (n < 0) {\n            n += this._length;\n        }\n        if (n <= 0) {\n            return this.cons(x);\n        }\n        else {\n            this.ensureIndex(n);\n            return this.insertBefore(this.nthCellUnsafe(n), x);\n        }\n    }\n    insertAfterNth(n, x) {\n        if (n < 0) {\n            n += this._length;\n        }\n        if (n >= this._length - 1) {\n            return this.push(x);\n        }\n        else {\n            this.ensureIndex(n);\n            return this.insertAfter(this.nthCellUnsafe(n), x);\n        }\n    }\n    insertSorted(value, cmp) {\n        cmp = cmp || compare;\n        let cell = this.head;\n        while (cell) {\n            if (cmp(value, cell.value) <= 0) {\n                return this.insertBefore(cell, value);\n            }\n            cell = cell.next;\n        }\n        return this.push(value);\n    }\n    find(value) {\n        let cell = this.head;\n        while (cell) {\n            if (cell.value === value) {\n                return cell;\n            }\n            cell = cell.next;\n        }\n    }\n    findWith(fn) {\n        let cell = this.head;\n        while (cell) {\n            if (fn(cell.value)) {\n                return cell;\n            }\n            cell = cell.next;\n        }\n    }\n    concat(...slices) {\n        const res = this.copy();\n        for (let slice of slices) {\n            res.into(slice);\n        }\n        return res;\n    }\n    into(src) {\n        for (let x of src) {\n            this.push(x);\n        }\n    }\n    slice(from = 0, to = this.length) {\n        let a = from < 0 ? from + this._length : from;\n        let b = to < 0 ? to + this._length : to;\n        if (a < 0 || b < 0) {\n            illegalArgs(\"invalid indices: ${from} / ${to}\");\n        }\n        const res = new DCons();\n        let cell = this.nthCell(a);\n        while (cell && ++a <= b) {\n            res.push(cell.value);\n            cell = cell.next;\n        }\n        return res;\n    }\n    splice(at, del = 0, insert) {\n        let cell;\n        if (typeof at === \"number\") {\n            if (at < 0) {\n                at += this._length;\n            }\n            this.ensureIndex(at);\n            cell = this.nthCellUnsafe(at);\n        }\n        else {\n            cell = at;\n        }\n        const removed = new DCons();\n        if (del > 0) {\n            while (cell && del-- > 0) {\n                this.remove(cell);\n                removed.push(cell.value);\n                cell = cell.next;\n            }\n        }\n        else if (cell) {\n            cell = cell.next;\n        }\n        if (insert) {\n            if (cell) {\n                for (let i of insert) {\n                    this.insertBefore(cell, i);\n                }\n            }\n            else {\n                for (let i of insert) {\n                    this.push(i);\n                }\n            }\n        }\n        return removed;\n    }\n    remove(cell) {\n        if (cell.prev) {\n            cell.prev.next = cell.next;\n        }\n        else {\n            this.head = cell.next;\n        }\n        if (cell.next) {\n            cell.next.prev = cell.prev;\n        }\n        else {\n            this.tail = cell.prev;\n        }\n        this._length--;\n        return this;\n    }\n    swap(a, b) {\n        if (a !== b) {\n            const t = a.value;\n            a.value = b.value;\n            b.value = t;\n        }\n        return this;\n    }\n    push(value) {\n        if (this.tail) {\n            const cell = { value, prev: this.tail };\n            this.tail.next = cell;\n            this.tail = cell;\n            this._length++;\n            return this;\n        }\n        else {\n            return this.cons(value);\n        }\n    }\n    pop() {\n        const cell = this.tail;\n        if (!cell) {\n            return;\n        }\n        this.tail = cell.prev;\n        if (this.tail) {\n            delete this.tail.next;\n        }\n        else {\n            delete this.head;\n        }\n        this._length--;\n        return cell.value;\n    }\n    first() {\n        return this.head && this.head.value;\n    }\n    peek() {\n        return this.tail && this.tail.value;\n    }\n    setHead(v) {\n        if (this.head) {\n            this.head.value = v;\n            return this;\n        }\n        return this.cons(v);\n    }\n    setTail(v) {\n        if (this.tail) {\n            this.tail.value = v;\n            return this;\n        }\n        return this.push(v);\n    }\n    setNth(n, v) {\n        const cell = this.nthCell(n);\n        !cell && illegalArgs(`index out of bounds: ${n}`);\n        cell.value = v;\n        return this;\n    }\n    nth(n, notFound) {\n        const cell = this.nthCell(n);\n        return cell ? cell.value : notFound;\n    }\n    nthCell(n) {\n        if (n < 0) {\n            n += this._length;\n        }\n        if (n < 0 || n >= this._length) {\n            return;\n        }\n        return this.nthCellUnsafe(n);\n    }\n    rotateLeft() {\n        switch (this._length) {\n            case 0:\n            case 1:\n                return this;\n            case 2:\n                return this.swap(this.head, this.tail);\n            default:\n                return this.push(this.drop());\n        }\n    }\n    rotateRight() {\n        switch (this._length) {\n            case 0:\n            case 1:\n                return this;\n            case 2:\n                return this.swap(this.head, this.tail);\n            default:\n                const x = this.peek();\n                this.pop();\n                return this.cons(x);\n        }\n    }\n    map(fn) {\n        const res = new DCons();\n        let cell = this.head;\n        while (cell) {\n            res.push(fn(cell.value));\n            cell = cell.next;\n        }\n        return res;\n    }\n    filter(pred) {\n        const res = new DCons();\n        let cell = this.head;\n        while (cell) {\n            pred(cell.value) && res.push(cell.value);\n            cell = cell.next;\n        }\n        return res;\n    }\n    reduce(rfn, initial) {\n        let acc = initial;\n        let cell = this.head;\n        while (cell) {\n            // TODO add early termination support\n            acc = rfn(acc, cell.value);\n            cell = cell.next;\n        }\n        return acc;\n    }\n    /**\n     * Shuffles list by probabilistically moving cells to head or tail\n     * positions.\n     *\n     * @remarks\n     * Supports configurable iterations and custom PRNG via\n     * {@link @thi.ng/random#IRandom} (default:\n     * {@link @thi.ng/random#SYSTEM}).\n     *\n     * Default iterations: `ceil(3/2 * log2(n))`\n     *\n     * @param iter\n     * @param rnd\n     */\n    shuffle(iter, rnd = SYSTEM) {\n        if (this._length < 2)\n            return this;\n        for (iter = (iter !== null && iter !== void 0 ? iter : Math.ceil(1.5 * Math.log2(this._length))); iter > 0; iter--) {\n            let cell = this.head;\n            while (cell) {\n                const next = cell.next;\n                rnd.float() < 0.5 ? this.asHead(cell) : this.asTail(cell);\n                cell = next;\n            }\n        }\n        return this;\n    }\n    /**\n     * Merge sort implementation based on Simon Tatham's algorithm:\n     * https://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\n     *\n     * @remarks\n     * Uses {@link @thi.ng/compare#compare} as default comparator.\n     *\n     * @param cmp\n     */\n    sort(cmp = compare) {\n        if (!this._length)\n            return this;\n        let inSize = 1;\n        while (true) {\n            let p = this.head;\n            this.head = undefined;\n            this.tail = undefined;\n            let numMerges = 0;\n            while (p) {\n                numMerges++;\n                let q = p;\n                let psize = 0;\n                for (let i = 0; i < inSize; i++) {\n                    psize++;\n                    q = q.next;\n                    if (!q)\n                        break;\n                }\n                let qsize = inSize;\n                while (psize > 0 || (qsize > 0 && q)) {\n                    let e;\n                    if (psize === 0) {\n                        e = q;\n                        q = q.next;\n                        qsize--;\n                    }\n                    else if (!q || qsize === 0) {\n                        e = p;\n                        p = p.next;\n                        psize--;\n                    }\n                    else if (cmp(p.value, q.value) <= 0) {\n                        e = p;\n                        p = p.next;\n                        psize--;\n                    }\n                    else {\n                        e = q;\n                        q = q.next;\n                        qsize--;\n                    }\n                    if (this.tail) {\n                        this.tail.next = e;\n                    }\n                    else {\n                        this.head = e;\n                    }\n                    e.prev = this.tail;\n                    this.tail = e;\n                }\n                p = q;\n            }\n            this.tail.next = undefined;\n            if (numMerges <= 1) {\n                return this;\n            }\n            inSize *= 2;\n        }\n    }\n    reverse() {\n        let head = this.head;\n        let tail = this.tail;\n        let n = (this._length >>> 1) + (this._length & 1);\n        while (head && tail && n > 0) {\n            const t = head.value;\n            head.value = tail.value;\n            tail.value = t;\n            head = head.next;\n            tail = tail.prev;\n            n--;\n        }\n        return this;\n    }\n    asHead(cell) {\n        if (cell === this.head) {\n            return this;\n        }\n        this.remove(cell);\n        this.head.prev = cell;\n        cell.next = this.head;\n        cell.prev = undefined;\n        this.head = cell;\n        this._length++;\n        return this;\n    }\n    asTail(cell) {\n        if (cell === this.tail) {\n            return this;\n        }\n        this.remove(cell);\n        this.tail.next = cell;\n        cell.prev = this.tail;\n        cell.next = undefined;\n        this.tail = cell;\n        this._length++;\n        return this;\n    }\n    toString() {\n        let res = [];\n        let cell = this.head;\n        while (cell) {\n            res.push(cell.value != null\n                ? String(cell.value)\n                : cell.value === undefined\n                    ? \"undefined\"\n                    : \"null\");\n            cell = cell.next;\n        }\n        return res.join(\", \");\n    }\n    toJSON() {\n        return [...this];\n    }\n    ensureIndex(i) {\n        assert(i >= 0 && i < this._length, `index out of range: ${i}`);\n    }\n    nthCellUnsafe(n) {\n        let cell, dir;\n        if (n <= this._length >> 1) {\n            cell = this.head;\n            dir = \"next\";\n        }\n        else {\n            cell = this.tail;\n            dir = \"prev\";\n            n = this._length - n - 1;\n        }\n        while (n-- > 0 && cell) {\n            cell = cell[dir];\n        }\n        return cell;\n    }\n}\n/**\n * Functional syntax sugar for `new DCons(src?)`.\n *\n * @param src\n */\nexport const dcons = (src) => new DCons(src);\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { DCons } from \"@thi.ng/dcons\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { dissoc } from \"./dissoc\";\nimport { equivSet } from \"./internal/equiv\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst __vals = (inst) => __private.get(inst).vals;\n/**\n * Similar to `ArraySet`, this class is an alternative implementation of\n * the native ES6 Set API using a @thi.ng/dcons linked list as backing\n * store and a customizable value equality / equivalence predicate. By\n * the default uses `@thi.ng/equiv` for equivalence checking.\n *\n * Additionally, the type also implements the `ICopy`, `IEmpty` and\n * `IEquiv` interfaces itself.\n */\nexport class LLSet extends Set {\n    constructor(vals, opts = {}) {\n        super();\n        __private.set(this, {\n            equiv: opts.equiv || equiv,\n            vals: new DCons()\n        });\n        vals && this.into(vals);\n    }\n    *[Symbol.iterator]() {\n        yield* __vals(this);\n    }\n    get [Symbol.species]() {\n        return LLSet;\n    }\n    get [Symbol.toStringTag]() {\n        return \"LLSet\";\n    }\n    get size() {\n        return __vals(this).length;\n    }\n    copy() {\n        const $this = __private.get(this);\n        const s = new LLSet(null, this.opts());\n        __private.get(s).vals = $this.vals.copy();\n        return s;\n    }\n    empty() {\n        return new LLSet(null, this.opts());\n    }\n    clear() {\n        __vals(this).clear();\n    }\n    first() {\n        if (this.size) {\n            return __vals(this).head.value;\n        }\n    }\n    add(key) {\n        !this.has(key) && __vals(this).push(key);\n        return this;\n    }\n    into(keys) {\n        return into(this, keys);\n    }\n    has(key) {\n        return this.get(key, SEMAPHORE) !== SEMAPHORE;\n    }\n    /**\n     * Returns the canonical (stored) value for `key`, if present. If\n     * the set contains no equivalent for `key`, returns `notFound`.\n     *\n     * @param key\n     * @param notFound\n     */\n    get(key, notFound) {\n        const $this = __private.get(this);\n        const eq = $this.equiv;\n        let i = $this.vals.head;\n        while (i) {\n            if (eq(i.value, key)) {\n                return i.value;\n            }\n            i = i.next;\n        }\n        return notFound;\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        const eq = $this.equiv;\n        let i = $this.vals.head;\n        while (i) {\n            if (eq(i.value, key)) {\n                $this.vals.splice(i, 1);\n                return true;\n            }\n            i = i.next;\n        }\n        return false;\n    }\n    disj(keys) {\n        return dissoc(this, keys);\n    }\n    equiv(o) {\n        return equivSet(this, o);\n    }\n    forEach(fn, thisArg) {\n        let i = __vals(this).head;\n        while (i) {\n            fn.call(thisArg, i.value, i.value, this);\n            i = i.next;\n        }\n    }\n    *entries() {\n        for (let v of __vals(this)) {\n            yield [v, v];\n        }\n    }\n    *keys() {\n        yield* __vals(this);\n    }\n    *values() {\n        yield* __vals(this);\n    }\n    opts() {\n        return { equiv: __private.get(this).equiv };\n    }\n}\n","import { isFunction } from \"@thi.ng/checks\";\nimport { copy } from \"./utils\";\n/**\n * Similar to `mergeApplyObj()`, but for ES6 Maps instead of plain objects.\n *\n * @param src\n * @param xs\n */\nexport const mergeApplyMap = (src, xs) => {\n    const res = copy(src, Map);\n    for (let [k, v] of xs) {\n        res.set(k, isFunction(v) ? v(res.get(k)) : v);\n    }\n    return res;\n};\n/**\n * Similar to `mergeObjWith()`, but only supports 2 args and any\n * function values in `xs` will be called with respective value in `src`\n * to produce a new / derived value for that key, i.e.\n *\n * ```\n * dest[k] = xs[k](src[k])\n * ```\n *\n * Returns new merged object and does not modify any of the inputs.\n *\n * ```\n * mergeApplyObj(\n *   {a: \"hello\", b: 23, c: 12},\n *   {a: (x) => x + \" world\", b: 42}\n * );\n * // { a: 'hello world', b: 42, c: 12 }\n * ```\n *\n * @param src\n * @param xs\n */\nexport const mergeApplyObj = (src, xs) => {\n    const res = Object.assign({}, src);\n    for (let k in xs) {\n        const v = xs[k];\n        res[k] = isFunction(v) ? v(res[k]) : v;\n    }\n    return res;\n};\n","import { copy } from \"./utils\";\nexport const mergeMapWith = (f, dest, ...xs) => {\n    const res = copy(dest, Map);\n    for (let x of xs) {\n        for (let [k, v] of x) {\n            res.set(k, res.has(k) ? f(res.get(k), v) : v);\n        }\n    }\n    return res;\n};\nexport const mergeObjWith = (f, dest, ...xs) => {\n    const res = Object.assign({}, dest);\n    for (let x of xs) {\n        for (let k in x) {\n            const v = x[k];\n            res[k] = res.hasOwnProperty(k) ? f(dest[k], v) : v;\n        }\n    }\n    return res;\n};\n","import { isPlainObject } from \"@thi.ng/checks\";\nimport { mergeObjWith } from \"./merge-with\";\nexport const mergeDeepObj = (dest, ...xs) => mergeObjWith((a, b) => isPlainObject(a) && isPlainObject(b) ? mergeDeepObj(a, b) : b, dest, ...xs);\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { compare } from \"@thi.ng/compare\";\nimport { isReduced, map } from \"@thi.ng/transducers\";\nimport { dissoc } from \"./dissoc\";\nimport { equivMap } from \"./internal/equiv\";\nimport { into } from \"./into\";\nclass Node {\n    constructor(k, v, h) {\n        this.k = k;\n        this.v = v;\n        this.next = new Array(h + 1);\n    }\n}\n// stores private properties for all instances\n// http://fitzgeraldnick.com/2014/01/13/hiding-implementation-details-with-e6-weakmaps.html\nconst __private = new WeakMap();\nexport class SortedMap extends Map {\n    /**\n     * Creates new `SortedMap` instance with optionally given pairs\n     * and/or options.\n     *\n     * @param pairs\n     * @param opts\n     */\n    constructor(pairs, opts = {}) {\n        super();\n        const cap = opts.capacity || SortedMap.DEFAULT_CAP;\n        const maxh = Math.ceil(Math.log2(cap));\n        __private.set(this, {\n            head: new Node(null, null, 0),\n            cap: Math.pow(2, maxh),\n            cmp: opts.compare || compare,\n            p: opts.probability || SortedMap.DEFAULT_P,\n            maxh,\n            length: 0,\n            h: 0\n        });\n        if (pairs) {\n            this.into(pairs);\n        }\n    }\n    /**\n     * Creates new `SortedMap` instance from given object's key-value\n     * pairs.\n     *\n     * @param obj\n     * @param opts\n     */\n    static fromObject(obj, opts) {\n        const m = new SortedMap(null, Object.assign({ capacity: Object.keys(obj).length }, opts));\n        for (let k in obj) {\n            obj.hasOwnProperty(k) && m.set(k, obj[k]);\n        }\n        return m;\n    }\n    get [Symbol.species]() {\n        return SortedMap;\n    }\n    *[Symbol.iterator]() {\n        let node = __private.get(this).head;\n        while ((node = node.next[0])) {\n            yield [node.k, node.v];\n        }\n    }\n    *entries(key, max = false) {\n        const $this = __private.get(this);\n        let node = $this.head;\n        const cmp = $this.cmp;\n        let code;\n        if (max) {\n            while ((node = node.next[0])) {\n                if (key === undefined || (code = cmp(node.k, key)) <= 0) {\n                    yield [node.k, node.v];\n                    if (code === 0)\n                        return;\n                }\n            }\n        }\n        else {\n            while ((node = node.next[0])) {\n                if (key === undefined || (code = cmp(node.k, key)) >= 0) {\n                    yield [node.k, node.v];\n                }\n            }\n        }\n    }\n    keys(key, max = false) {\n        return map((p) => p[0], this.entries(key, max));\n    }\n    values(key, max = false) {\n        return map((p) => p[1], this.entries(key, max));\n    }\n    get size() {\n        return __private.get(this).length;\n    }\n    clear() {\n        const $this = __private.get(this);\n        $this.head = new Node(null, null, 0);\n        $this.length = 0;\n        $this.h = 0;\n    }\n    empty() {\n        return new SortedMap(null, Object.assign(Object.assign({}, this.opts()), { capacity: SortedMap.DEFAULT_CAP }));\n    }\n    copy() {\n        return new SortedMap(this, this.opts());\n    }\n    compare(o) {\n        const n = this.size;\n        const m = o.size;\n        if (n < m)\n            return -1;\n        if (n > m)\n            return 1;\n        const i = this.entries();\n        const j = o.entries();\n        let x, y;\n        let c;\n        while (((x = i.next()), (y = j.next()), !x.done && !y.done)) {\n            if ((c = compare(x.value[0], y.value[0])) !== 0 ||\n                (c = compare(x.value[1], y.value[1])) !== 0) {\n                return c;\n            }\n        }\n        return 0;\n    }\n    equiv(o) {\n        return equivMap(this, o);\n    }\n    first() {\n        const node = __private.get(this).head.next[0];\n        return node ? [node.k, node.v] : undefined;\n    }\n    get(k, notFound) {\n        const node = this.findPredNode(k).next[0];\n        return node && __private.get(this).cmp(node.k, k) === 0\n            ? node.v\n            : notFound;\n    }\n    has(key) {\n        return this.get(key, SEMAPHORE) !== SEMAPHORE;\n    }\n    set(k, v) {\n        const $this = __private.get(this);\n        let node = $this.head;\n        let level = $this.h;\n        let stack = new Array(level);\n        const cmp = $this.cmp;\n        let code;\n        while (level >= 0) {\n            while (node.next[level] &&\n                (code = cmp(node.next[level].k, k)) < 0) {\n                node = node.next[level];\n            }\n            if (node.next[level] && code === 0) {\n                do {\n                    node.next[level].v = v;\n                } while (--level >= 0);\n                return this;\n            }\n            stack[level--] = node;\n        }\n        const h = this.pickHeight($this.maxh, $this.h, $this.p);\n        node = new Node(k, v, h);\n        while ($this.h < h) {\n            stack[++$this.h] = $this.head;\n        }\n        for (let i = 0; i <= h; i++) {\n            node.next[i] = stack[i].next[i];\n            stack[i].next[i] = node;\n        }\n        $this.length++;\n        if ($this.length >= $this.cap) {\n            $this.cap *= 2;\n            $this.maxh++;\n        }\n        return this;\n    }\n    delete(k) {\n        const $this = __private.get(this);\n        let node = $this.head;\n        let level = $this.h;\n        let removed = false;\n        const cmp = $this.cmp;\n        let code;\n        while (level >= 0) {\n            while (node.next[level] &&\n                (code = cmp(node.next[level].k, k)) < 0) {\n                node = node.next[level];\n            }\n            if (node.next[level] && code === 0) {\n                removed = true;\n                node.next[level] = node.next[level].next[level];\n                if (node == $this.head && !node.next[level]) {\n                    $this.h = Math.max(0, $this.h - 1);\n                }\n            }\n            level--;\n        }\n        if (removed)\n            $this.length--;\n        return removed;\n    }\n    into(pairs) {\n        return into(this, pairs);\n    }\n    dissoc(keys) {\n        return dissoc(this, keys);\n    }\n    forEach(fn, thisArg) {\n        for (let p of this) {\n            fn.call(thisArg, p[1], p[0], this);\n        }\n    }\n    $reduce(rfn, acc) {\n        let node = __private.get(this).head;\n        while ((node = node.next[0]) && !isReduced(acc)) {\n            acc = rfn(acc, [node.k, node.v]);\n        }\n        return acc;\n    }\n    opts() {\n        const $this = __private.get(this);\n        return {\n            capacity: $this.cap,\n            compare: $this.cmp,\n            probability: $this.p\n        };\n    }\n    findPredNode(k) {\n        const $this = __private.get(this);\n        const cmp = $this.cmp;\n        let node = $this.head;\n        let level = $this.h;\n        while (level >= 0) {\n            while (node.next[level] && cmp(node.next[level].k, k) < 0) {\n                node = node.next[level];\n            }\n            level--;\n        }\n        return node;\n    }\n    pickHeight(maxh, h, p) {\n        const max = Math.min(maxh, h + 1);\n        let level = 0;\n        while (Math.random() < p && level < max) {\n            level++;\n        }\n        return level;\n    }\n}\nSortedMap.DEFAULT_CAP = 8;\nSortedMap.DEFAULT_P = 1 / Math.E;\n","import { compare } from \"@thi.ng/compare\";\nimport { map } from \"@thi.ng/transducers\";\nimport { dissoc } from \"./dissoc\";\nimport { equivSet } from \"./internal/equiv\";\nimport { into } from \"./into\";\nimport { SortedMap } from \"./sorted-map\";\nconst __private = new WeakMap();\n/**\n * Sorted set implementation with standard ES6 Set API, customizable\n * value equality and comparison semantics and additional functionality:\n *\n * - range queries (via `entries`, `keys`, `values`)\n * - multiple value addition/deletion via `into()` and `disj()`\n *\n * Furthermore, this class implements the `ICopy`, IEmpty`, `ICompare`\n * and `IEquiv` interfaces defined by `@thi.ng/api`. The latter two\n * allow instances to be used as keys themselves in other data types\n * defined in this (and other) package(s).\n *\n * This set uses a `SortedMap` as backing store and therefore has the\n * same resizing characteristics.\n */\nexport class SortedSet extends Set {\n    /**\n     * Creates new instance with optional given values and/or\n     * implementation options. The options are the same as used by\n     * `SortedMap`.\n     *\n     * @param values\n     * @param opts\n     */\n    constructor(values, opts) {\n        super();\n        __private.set(this, new SortedMap(values ? map((x) => [x, x], values) : null, opts));\n    }\n    [Symbol.iterator]() {\n        return this.keys();\n    }\n    get [Symbol.species]() {\n        return SortedSet;\n    }\n    get [Symbol.toStringTag]() {\n        return \"SortedSet\";\n    }\n    get size() {\n        return __private.get(this).size;\n    }\n    copy() {\n        return new SortedSet(this.keys(), this.opts());\n    }\n    empty() {\n        return new SortedSet(null, Object.assign(Object.assign({}, this.opts()), { capacity: SortedMap.DEFAULT_CAP }));\n    }\n    compare(o) {\n        const n = this.size;\n        const m = o.size;\n        if (n < m)\n            return -1;\n        if (n > m)\n            return 1;\n        const i = this.entries();\n        const j = o.entries();\n        let x, y;\n        let c;\n        while (((x = i.next()), (y = j.next()), !x.done && !y.done)) {\n            if ((c = compare(x.value[0], y.value[0])) !== 0) {\n                return c;\n            }\n        }\n        return 0;\n    }\n    equiv(o) {\n        return equivSet(this, o);\n    }\n    $reduce(rfn, acc) {\n        return __private.get(this).$reduce((_acc, x) => rfn(_acc, x[0]), acc);\n    }\n    entries(key, max = false) {\n        return __private.get(this).entries(key, max);\n    }\n    keys(key, max = false) {\n        return __private.get(this).keys(key, max);\n    }\n    values(key, max = false) {\n        return __private.get(this).values(key, max);\n    }\n    add(key) {\n        __private.get(this).set(key, key);\n        return this;\n    }\n    into(keys) {\n        return into(this, keys);\n    }\n    clear() {\n        __private.get(this).clear();\n    }\n    first() {\n        const first = __private.get(this).first();\n        return first ? first[0] : undefined;\n    }\n    delete(key) {\n        return __private.get(this).delete(key);\n    }\n    disj(keys) {\n        return dissoc(this, keys);\n    }\n    forEach(fn, thisArg) {\n        for (let p of this) {\n            fn.call(thisArg, p, p, this);\n        }\n    }\n    has(key) {\n        return __private.get(this).has(key);\n    }\n    get(key, notFound) {\n        return __private.get(this).get(key, notFound);\n    }\n    opts() {\n        return __private.get(this).opts();\n    }\n}\n","import { isNumber } from \"@thi.ng/checks\";\nimport { illegalArgs } from \"@thi.ng/errors\";\nimport { dissoc } from \"./dissoc\";\nimport { into } from \"./into\";\nconst __private = new WeakMap();\nconst fail = () => illegalArgs(`dense & sparse arrays must be of same size`);\n/**\n * After \"An Efficient Representation for Sparse Sets\"\n * Preston Briggs and Linda Torczon (1993)\n *\n * https://research.swtch.com/sparse\n * https://programmingpraxis.com/2012/03/09/sparse-sets/\n * https://blog.molecular-matters.com/2013/07/24/adventures-in-data-oriented-design-part-3c-external-references/\n */\nexport class ASparseSet extends Set {\n    constructor(dense, sparse) {\n        super();\n        __private.set(this, { dense, sparse, n: 0 });\n    }\n    [Symbol.iterator]() {\n        return this.keys();\n    }\n    get size() {\n        return __private.get(this).n;\n    }\n    get capacity() {\n        return __private.get(this).dense.length;\n    }\n    clear() {\n        __private.get(this).n = 0;\n    }\n    equiv(o) {\n        if (this === o) {\n            return true;\n        }\n        if (!(o instanceof Set) || this.size !== o.size) {\n            return false;\n        }\n        const $this = __private.get(this);\n        const d = $this.dense;\n        for (let i = $this.n; --i >= 0;) {\n            if (!o.has(d[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    add(key) {\n        const $this = __private.get(this);\n        const dense = $this.dense;\n        const sparse = $this.sparse;\n        const max = dense.length;\n        const i = sparse[key];\n        const n = $this.n;\n        if (key < max && n < max && !(i < n && dense[i] === key)) {\n            dense[n] = key;\n            sparse[key] = n;\n            $this.n++;\n        }\n        return this;\n    }\n    delete(key) {\n        const $this = __private.get(this);\n        const dense = $this.dense;\n        const sparse = $this.sparse;\n        const i = sparse[key];\n        if (i < $this.n && dense[i] === key) {\n            const j = dense[--$this.n];\n            dense[i] = j;\n            sparse[j] = i;\n            return true;\n        }\n        return false;\n    }\n    has(key) {\n        const $this = __private.get(this);\n        const i = $this.sparse[key];\n        return i < $this.n && $this.dense[i] === key;\n    }\n    get(key, notFound = -1) {\n        return this.has(key) ? key : notFound;\n    }\n    first() {\n        const $this = __private.get(this);\n        return $this.n ? $this.dense[0] : undefined;\n    }\n    into(keys) {\n        return into(this, keys);\n    }\n    disj(keys) {\n        return dissoc(this, keys);\n    }\n    forEach(fn, thisArg) {\n        const $this = __private.get(this);\n        const d = $this.dense;\n        const n = $this.n;\n        for (let i = 0; i < n; i++) {\n            const v = d[i];\n            fn.call(thisArg, v, v, this);\n        }\n    }\n    *entries() {\n        const $this = __private.get(this);\n        const d = $this.dense;\n        const n = $this.n;\n        for (let i = 0; i < n; i++) {\n            yield [d[i], d[i]];\n        }\n    }\n    *keys() {\n        const $this = __private.get(this);\n        const d = $this.dense;\n        const n = $this.n;\n        for (let i = 0; i < n; i++) {\n            yield d[i];\n        }\n    }\n    values() {\n        return this.keys();\n    }\n    __copyTo(dest) {\n        const $this = __private.get(this);\n        const $c = __private.get(dest);\n        $c.dense = $this.dense.slice();\n        $c.sparse = $this.sparse.slice();\n        $c.n = $this.n;\n        return dest;\n    }\n}\nexport class SparseSet8 extends ASparseSet {\n    constructor(n, sparse) {\n        isNumber(n)\n            ? super(new Uint8Array(n), new Uint8Array(n))\n            : n.length === sparse.length\n                ? super(n, sparse)\n                : fail();\n    }\n    get [Symbol.species]() {\n        return SparseSet8;\n    }\n    get [Symbol.toStringTag]() {\n        return \"SparseSet8\";\n    }\n    copy() {\n        return this.__copyTo(new SparseSet8(0));\n    }\n    empty() {\n        return new SparseSet8(this.capacity);\n    }\n}\nexport class SparseSet16 extends ASparseSet {\n    constructor(n, sparse) {\n        isNumber(n)\n            ? super(new Uint16Array(n), new Uint16Array(n))\n            : n.length === sparse.length\n                ? super(n, sparse)\n                : fail();\n    }\n    get [Symbol.species]() {\n        return SparseSet16;\n    }\n    get [Symbol.toStringTag]() {\n        return \"SparseSet16\";\n    }\n    copy() {\n        return this.__copyTo(new SparseSet16(0));\n    }\n    empty() {\n        return new SparseSet16(this.capacity);\n    }\n}\nexport class SparseSet32 extends ASparseSet {\n    constructor(n, sparse) {\n        isNumber(n)\n            ? super(new Uint32Array(n), new Uint32Array(n))\n            : n.length === sparse.length\n                ? super(n, sparse)\n                : fail();\n    }\n    get [Symbol.species]() {\n        return SparseSet32;\n    }\n    get [Symbol.toStringTag]() {\n        return \"SparseSet32\";\n    }\n    copy() {\n        return this.__copyTo(new SparseSet32(0));\n    }\n    empty() {\n        return new SparseSet32(this.capacity);\n    }\n}\n/**\n * Creates a new sparse set with given max. capacity (max ID + 1) and\n * chooses most memory efficient implementation, e.g. if `n` <= 256\n * returns a `SparseSet8` instance.\n *\n * @param n\n */\nexport const sparseSet = (n) => n <= 0x100\n    ? new SparseSet8(n)\n    : n <= 0x10000\n        ? new SparseSet16(n)\n        : new SparseSet32(n);\n","import { xformSetOp } from \"./internal/xform-setop\";\nimport { into } from \"./into\";\nimport { copy } from \"./utils\";\n/**\n * Computes union of sets `a` and `b` and writes results to new set or\n * optionally given set `out` (assumed to be empty for correct results).\n *\n * @param a\n * @param b\n * @param out\n */\nexport const union = (a, b, out) => {\n    if (a.size < b.size) {\n        const t = a;\n        a = b;\n        b = t;\n    }\n    out = out ? into(out, a) : copy(a, Set);\n    return a === b ? out : into(out, b);\n};\nexport function unionR(src) {\n    return xformSetOp(unionR, union, src);\n}\n","import { empty, ensureSet } from \"./utils\";\nexport const withoutKeysMap = (src, keys) => {\n    const ks = ensureSet(keys);\n    const dest = empty(src, Map);\n    for (let p of src.entries()) {\n        const k = p[0];\n        !ks.has(k) && dest.set(k, p[1]);\n    }\n    return dest;\n};\nexport const withoutKeysObj = (src, keys) => {\n    const ks = ensureSet(keys);\n    const dest = {};\n    for (let k in src) {\n        src.hasOwnProperty(k) && !ks.has(k) && (dest[k] = src[k]);\n    }\n    return dest;\n};\n","export * from \"./array-set\";\nexport * from \"./common-keys\";\nexport * from \"./difference\";\nexport * from \"./dissoc\";\nexport * from \"./equiv-map\";\nexport * from \"./hash-map\";\nexport * from \"./indexed\";\nexport * from \"./intersection\";\nexport * from \"./into\";\nexport * from \"./invert\";\nexport * from \"./join\";\nexport * from \"./ll-set\";\nexport * from \"./merge-apply\";\nexport * from \"./merge-deep\";\nexport * from \"./merge-with\";\nexport * from \"./merge\";\nexport * from \"./rename-keys\";\nexport * from \"./select-keys\";\nexport * from \"./sorted-map\";\nexport * from \"./sorted-set\";\nexport * from \"./sparse-set\";\nexport * from \"./union\";\nexport * from \"./without-keys\";\n","import { NULL_LOGGER } from \"@thi.ng/api\";\nexport var State;\n(function (State) {\n    State[State[\"IDLE\"] = 0] = \"IDLE\";\n    State[State[\"ACTIVE\"] = 1] = \"ACTIVE\";\n    State[State[\"DONE\"] = 2] = \"DONE\";\n    State[State[\"ERROR\"] = 3] = \"ERROR\";\n    State[State[\"DISABLED\"] = 4] = \"DISABLED\"; // TODO currently unused\n})(State || (State = {}));\n/**\n * Closing behaviors.\n */\nexport var CloseMode;\n(function (CloseMode) {\n    /**\n     * Never close, even if no more inputs/outputs.\n     */\n    CloseMode[CloseMode[\"NEVER\"] = 0] = \"NEVER\";\n    /**\n     * Close when first input/output is done / removed.\n     */\n    CloseMode[CloseMode[\"FIRST\"] = 1] = \"FIRST\";\n    /**\n     * Close when last input/output is done / removed.\n     */\n    CloseMode[CloseMode[\"LAST\"] = 2] = \"LAST\";\n})(CloseMode || (CloseMode = {}));\nexport let LOGGER = NULL_LOGGER;\nexport const setLogger = (logger) => (LOGGER = logger);\n","let NEXT_ID = 0;\nexport const nextID = () => NEXT_ID++;\nexport const optsWithID = (prefix, opts) => ((!opts || !opts.id ? Object.assign(Object.assign({}, opts), { id: prefix + \"-\" + nextID() }) : opts));\n","import { SEMAPHORE } from \"@thi.ng/api\";\nimport { peek } from \"@thi.ng/arrays\";\nimport { implementsFunction, isFunction, isPlainObject } from \"@thi.ng/checks\";\nimport { illegalArity, illegalState } from \"@thi.ng/errors\";\nimport { comp, isReduced, push, unreduced } from \"@thi.ng/transducers\";\nimport { LOGGER } from \"./api\";\nimport { nextID } from \"./utils/idgen\";\n/**\n * Creates a new {@link Subscription} instance, the fundamental datatype\n * and building block provided by this package.\n *\n * @remarks\n * Most other types in rstream, including {@link Stream}s, are\n * `Subscription`s and all can be:\n *\n * - linked into directed graphs (sync or async & not necessarily DAGs)\n * - transformed using transducers (incl. support for early termination)\n * - can have any number of subscribers (optionally each w/ their own\n *   transducers)\n * - recursively unsubscribe themselves from parent after their last\n *   subscriber unsubscribed (configurable)\n * - will go into a non-recoverable error state if none of the\n *   subscribers has an error handler itself\n * - implement the {@link @thi.ng/api#IDeref} interface\n *\n * Subscription behavior can be customized via the additional (optional)\n * options arg. See `CommonOpts` and `SubscriptionOpts` for further\n * details.\n *\n * @example\n * ```ts\n * // as reactive value mechanism (same as with stream() above)\n * s = subscription();\n * s.subscribe(trace(\"s1\"));\n * s.subscribe(trace(\"s2\"), { xform: tx.filter((x) => x > 25) });\n *\n * // external trigger\n * s.next(23);\n * // s1 23\n * s.next(42);\n * // s1 42\n * // s2 42\n * ```\n *\n * @param sub\n * @param opts\n */\nexport const subscription = (sub, opts) => new Subscription(sub, opts);\nexport class Subscription {\n    constructor(sub, opts = {}) {\n        this.state = 0 /* IDLE */;\n        this.parent = opts.parent;\n        this.closeIn =\n            opts.closeIn !== undefined ? opts.closeIn : 2 /* LAST */;\n        this.closeOut =\n            opts.closeOut !== undefined ? opts.closeOut : 2 /* LAST */;\n        this.cacheLast = opts.cache !== false;\n        this.id = opts.id || `sub-${nextID()}`;\n        this.last = SEMAPHORE;\n        this.subs = [];\n        if (sub) {\n            this.subs.push(sub);\n        }\n        if (opts.xform) {\n            this.xform = opts.xform(push());\n        }\n    }\n    deref() {\n        return this.last !== SEMAPHORE ? this.last : undefined;\n    }\n    getState() {\n        return this.state;\n    }\n    subscribe(...args) {\n        this.ensureState();\n        let sub;\n        let opts = args.length > 1 && isPlainObject(peek(args))\n            ? Object.assign({}, args.pop()) : {};\n        switch (args.length) {\n            case 1:\n                if (isFunction(args[0])) {\n                    opts.xform = args[0];\n                    !opts.id && (opts.id = `xform-${nextID()}`);\n                }\n                else {\n                    sub = args[0];\n                }\n                break;\n            case 2:\n                sub = args[0];\n                opts.xform = args[1];\n                break;\n            default:\n                illegalArity(args.length);\n        }\n        if (implementsFunction(sub, \"subscribe\")) {\n            sub.parent = this;\n        }\n        else {\n            // FIXME inherit options from this sub or defaults?\n            sub = subscription(sub, Object.assign({ parent: this }, opts));\n        }\n        this.last !== SEMAPHORE && sub.next(this.last);\n        return this.addWrapped(sub);\n    }\n    /**\n     * Returns array of new child subscriptions for all given\n     * subscribers.\n     *\n     * @param subs\n     */\n    subscribeAll(...subs) {\n        const wrapped = [];\n        for (let s of subs) {\n            wrapped.push(this.subscribe(s));\n        }\n        return wrapped;\n    }\n    transform(...xf) {\n        const n = xf.length - 1;\n        return isPlainObject(xf[n])\n            ? this.subscribe(comp(...xf.slice(0, n)), xf[n])\n            : this.subscribe(comp(...xf));\n    }\n    /**\n     * If called without arg, removes this subscription from parent (if\n     * any), cleans up internal state and goes into DONE state. If\n     * called with arg, removes the sub from internal pool and if no\n     * other subs are remaining also cleans up itself and goes into DONE\n     * state.\n     *\n     * @param sub\n     */\n    unsubscribe(sub) {\n        LOGGER.debug(this.id, \"unsub start\", sub ? sub.id : \"self\");\n        if (!sub) {\n            let res = true;\n            if (this.parent) {\n                res = this.parent.unsubscribe(this);\n            }\n            this.state = 2 /* DONE */;\n            this.cleanup();\n            return res;\n        }\n        if (this.subs) {\n            LOGGER.debug(this.id, \"unsub child\", sub.id);\n            const idx = this.subs.indexOf(sub);\n            if (idx >= 0) {\n                this.subs.splice(idx, 1);\n                if (this.closeOut === 1 /* FIRST */ ||\n                    (!this.subs.length && this.closeOut !== 0 /* NEVER */)) {\n                    this.unsubscribe();\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    next(x) {\n        if (this.state < 2 /* DONE */) {\n            if (this.xform) {\n                const acc = this.xform[2]([], x);\n                const uacc = unreduced(acc);\n                const n = uacc.length;\n                for (let i = 0; i < n; i++) {\n                    this.dispatch(uacc[i]);\n                }\n                if (isReduced(acc)) {\n                    this.done();\n                }\n            }\n            else {\n                this.dispatch(x);\n            }\n        }\n    }\n    done() {\n        LOGGER.debug(this.id, \"entering done()\");\n        if (this.state < 2 /* DONE */) {\n            if (this.xform) {\n                const acc = this.xform[1]([]);\n                const uacc = unreduced(acc);\n                const n = uacc.length;\n                for (let i = 0; i < n; i++) {\n                    this.dispatch(uacc[i]);\n                }\n            }\n            this.state = 2 /* DONE */;\n            for (let s of [...this.subs]) {\n                try {\n                    s.done && s.done();\n                }\n                catch (e) {\n                    s.error ? s.error(e) : this.error(e);\n                }\n            }\n            this.unsubscribe();\n            LOGGER.debug(this.id, \"exiting done()\");\n        }\n    }\n    error(e) {\n        this.state = 3 /* ERROR */;\n        let notified = false;\n        if (this.subs && this.subs.length) {\n            for (let s of this.subs.slice()) {\n                if (s.error) {\n                    s.error(e);\n                    notified = true;\n                }\n            }\n        }\n        if (!notified) {\n            LOGGER.warn(this.id, \"unhandled error:\", e);\n            if (this.parent) {\n                LOGGER.debug(this.id, \"unsubscribing...\");\n                this.unsubscribe();\n                this.state = 3 /* ERROR */;\n            }\n        }\n    }\n    addWrapped(wrapped) {\n        this.subs.push(wrapped);\n        this.state = 1 /* ACTIVE */;\n        return wrapped;\n    }\n    dispatch(x) {\n        // LOGGER.debug(this.id, \"dispatch\", x);\n        this.cacheLast && (this.last = x);\n        const subs = this.subs;\n        let s;\n        if (subs.length === 1) {\n            s = subs[0];\n            try {\n                s.next && s.next(x);\n            }\n            catch (e) {\n                s.error ? s.error(e) : this.error(e);\n            }\n        }\n        else {\n            for (let i = subs.length; --i >= 0;) {\n                s = subs[i];\n                try {\n                    s.next && s.next(x);\n                }\n                catch (e) {\n                    s.error ? s.error(e) : this.error(e);\n                }\n            }\n        }\n    }\n    ensureState() {\n        if (this.state >= 2 /* DONE */) {\n            illegalState(`operation not allowed in state ${this.state}`);\n        }\n    }\n    cleanup() {\n        LOGGER.debug(this.id, \"cleanup\");\n        this.subs.length = 0;\n        delete this.parent;\n        delete this.xform;\n        delete this.last;\n    }\n}\n","import { isPlainObject } from \"@thi.ng/checks\";\nimport { comp, labeled, mapVals, partitionSync } from \"@thi.ng/transducers\";\nimport { LOGGER } from \"./api\";\nimport { Subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\n/**\n * Similar to {@link StreamMerge}, but with extra synchronization of\n * inputs. Before emitting any new values, {@link StreamSync} collects\n * values until at least one has been received from *all* inputs. Once\n * that's the case, the collected values are sent as labeled tuple\n * object to downstream subscribers.\n *\n * @remarks\n * Each value in the emitted tuple objects is stored under their input\n * stream's ID. Only the last value received from each input is passed\n * on. After the initial tuple has been emitted, you can choose from two\n * possible behaviors:\n *\n * 1) Any future change in any input will produce a new result tuple.\n *    These tuples will retain the most recently read values from other\n *    inputs. This behavior is the default and illustrated in the above\n *    schematic.\n * 2) If the `reset` option is `true`, every input will have to provide\n *    at least one new value again until another result tuple is\n *    produced.\n *\n * Any done inputs are automatically removed. By default, `StreamSync`\n * calls {@link ISubscriber.done} when the last active input is done,\n * but this behavior can be overridden via the provided options.\n *\n * Input streams can be added and removed dynamically and the emitted\n * tuple size adjusts to the current number of inputs (the next time a\n * value is received from any input).\n *\n * If the `reset` option is enabled, the last emitted tuple is allowed\n * to be incomplete, by default. To only allow complete tuples, also set\n * the `all` option to `false`.\n *\n * The synchronization is done via the `partitionSync()` transducer from\n * the @thi.ng/transducers package. See this function's docs for further\n * details.\n *\n * @example\n * ```ts\n * const a = rs.stream();\n * const b = rs.stream();\n * s = sync({ src: { a, b } }).subscribe(trace(\"result: \"));\n * a.next(1);\n * b.next(2);\n * // result: { a: 1, b: 2 }\n * ```\n *\n * @see StreamSyncOpts\n *\n * @param opts\n */\nexport const sync = (opts) => new StreamSync(opts);\nexport class StreamSync extends Subscription {\n    constructor(opts) {\n        const srcIDs = new Set();\n        const psync = partitionSync(srcIDs, {\n            key: (x) => x[0],\n            mergeOnly: opts.mergeOnly === true,\n            reset: opts.reset === true,\n            all: opts.all !== false,\n            backPressure: opts.backPressure || 0\n        });\n        const mapv = mapVals((x) => x[1]);\n        super(undefined, optsWithID(\"streamsync\", Object.assign(Object.assign({}, opts), { xform: opts.xform\n                ? comp(psync, mapv, opts.xform)\n                : comp(psync, mapv) })));\n        this.sources = new Map();\n        this.realSourceIDs = new Map();\n        this.invRealSourceIDs = new Map();\n        this.idSources = new Map();\n        this.sourceIDs = srcIDs;\n        opts.src && this.addAll(opts.src);\n    }\n    add(src, id) {\n        id || (id = src.id);\n        this.ensureState();\n        this.sourceIDs.add(id);\n        this.realSourceIDs.set(id, src.id);\n        this.invRealSourceIDs.set(src.id, id);\n        this.idSources.set(src.id, src);\n        this.sources.set(src, src.subscribe({\n            next: (x) => {\n                if (x[1] instanceof Subscription) {\n                    this.add(x[1]);\n                }\n                else {\n                    this.next(x);\n                }\n            },\n            done: () => this.markDone(src),\n            __owner: this\n        }, labeled(id), { id: `in-${id}` }));\n    }\n    addAll(src) {\n        if (isPlainObject(src)) {\n            // pre-add all source ids for partitionSync\n            for (let id in src) {\n                this.sourceIDs.add(id);\n            }\n            for (let id in src) {\n                this.add(src[id], id);\n            }\n        }\n        else {\n            // pre-add all source ids for partitionSync\n            for (let s of src) {\n                this.sourceIDs.add(s.id);\n            }\n            for (let s of src) {\n                this.add(s);\n            }\n        }\n    }\n    remove(src) {\n        const sub = this.sources.get(src);\n        if (sub) {\n            const id = this.invRealSourceIDs.get(src.id);\n            LOGGER.info(`removing src: ${src.id} (${id})`);\n            this.sourceIDs.delete(id);\n            this.realSourceIDs.delete(id);\n            this.invRealSourceIDs.delete(src.id);\n            this.idSources.delete(src.id);\n            this.sources.delete(src);\n            sub.unsubscribe();\n            return true;\n        }\n        return false;\n    }\n    removeID(id) {\n        const src = this.getSourceForID(id);\n        return src ? this.remove(src) : false;\n    }\n    removeAll(src) {\n        // pre-remove all source ids for partitionSync\n        for (let s of src) {\n            this.sourceIDs.delete(this.invRealSourceIDs.get(s.id));\n        }\n        let ok = true;\n        for (let s of src) {\n            ok = this.remove(s) && ok;\n        }\n        return ok;\n    }\n    removeAllIDs(ids) {\n        let ok = true;\n        for (let id of ids) {\n            ok = this.removeID(id) && ok;\n        }\n        return ok;\n    }\n    getSourceForID(id) {\n        return this.idSources.get(this.realSourceIDs.get(id));\n    }\n    getSources() {\n        const res = {};\n        for (let [id, src] of this.idSources) {\n            res[this.invRealSourceIDs.get(id)] = src;\n        }\n        return res;\n    }\n    unsubscribe(sub) {\n        if (!sub) {\n            for (let s of this.sources.values()) {\n                s.unsubscribe();\n            }\n            this.state = 2 /* DONE */;\n            this.sources.clear();\n            this.sourceIDs.clear();\n            this.realSourceIDs.clear();\n            this.invRealSourceIDs.clear();\n            this.idSources.clear();\n        }\n        return super.unsubscribe(sub);\n    }\n    markDone(src) {\n        this.remove(src);\n        if (this.closeIn === 1 /* FIRST */ ||\n            (this.closeIn === 2 /* LAST */ && !this.sources.size)) {\n            this.done();\n        }\n    }\n}\n","export const inlineWorker = (src) => makeWorker(new Blob([src], { type: \"text/javascript\" }));\nexport const makeWorker = (worker) => worker instanceof Worker\n    ? worker\n    : new Worker(worker instanceof Blob ? URL.createObjectURL(worker) : worker);\n","import { LOGGER } from \"../api\";\nimport { Subscription } from \"../subscription\";\nimport { nextID } from \"../utils/idgen\";\nimport { makeWorker } from \"../utils/worker\";\n/**\n * Returns a {@link Subscription} which processes received values via\n * the configured worker(s) and then passes values received back from\n * the worker(s) downstream, thereby allowing workers to be used\n * transparently for stream processing.\n *\n * @remarks\n * Multiple worker instances are supported for concurrent processing.\n * See the {@link TunnelOpts} for details.\n *\n * Also see {@link forkJoin} and {@link postWorker}.\n *\n * @param opts\n */\nexport const tunnel = (opts) => new Tunnel(opts);\nexport class Tunnel extends Subscription {\n    constructor(opts) {\n        super(undefined, { id: opts.id || `tunnel-${nextID()}` });\n        this.src = opts.src;\n        this.workers = new Array(opts.maxWorkers || 1);\n        this.transferables = opts.transferables;\n        this.terminate = opts.terminate || 1000;\n        this.interrupt = opts.interrupt || false;\n        this.index = 0;\n    }\n    next(x) {\n        if (this.state < 2 /* DONE */) {\n            let tx;\n            if (this.transferables) {\n                tx = this.transferables(x);\n            }\n            let worker = this.workers[this.index];\n            if (this.interrupt && worker) {\n                worker.terminate();\n                worker = null;\n            }\n            if (!worker) {\n                this.workers[this.index++] = worker = makeWorker(this.src);\n                this.index %= this.workers.length;\n                worker.addEventListener(\"message\", (e) => this.dispatch(e.data));\n                worker.addEventListener(\"error\", (e) => this.error(e));\n            }\n            worker.postMessage(x, tx || []);\n        }\n    }\n    done() {\n        super.done();\n        if (this.terminate > 0) {\n            setTimeout(() => {\n                LOGGER.info(\"terminating workers...\");\n                this.workers.forEach((worker) => worker && worker.terminate());\n                delete this.workers;\n            }, this.terminate);\n        }\n    }\n}\n","import { comp, map, mapcat, range } from \"@thi.ng/transducers\";\nimport { sync } from \"./stream-sync\";\nimport { tunnel } from \"./subs/tunnel\";\n/**\n * Returns a {@link StreamSync} instance which creates & attaches\n * multiple subscriptions to given `src` input stream, processes each\n * received value in parallel via web workers, then recombines partial\n * results and passes the resulting transformed value downstream.\n *\n * @remarks\n * See {@link ForkJoinOpts} for further details & behavior options and\n * the {@link forkBuffer} and {@link joinBuffer} helpers for array-based\n * value processing (most likely use case).\n *\n * @param src input stream\n * @param opts\n */\nexport const forkJoin = (opts) => {\n    const numWorkers = opts.numWorkers || navigator.hardwareConcurrency || 4;\n    const workerIDs = range(numWorkers);\n    return sync({\n        src: [\n            ...map((id) => opts.src\n                .transform(map((x) => opts.fork(id, numWorkers, x)))\n                .subscribe(tunnel({\n                src: opts.worker,\n                transferables: opts.transferables,\n                interrupt: opts.interrupt === true,\n                terminate: opts.terminate,\n                id: String(id)\n            })), workerIDs)\n        ],\n        xform: comp(\n        // form result tuple in original order\n        map((results) => [...map((id) => results[id], workerIDs)]), \n        // apply user join function\n        map(opts.join)),\n        reset: true,\n        backPressure: opts.backPressure\n    });\n};\n/**\n * Higher-order fork function for scenarios involving the split-parallel\n * processing of a large buffer.\n *\n * @remarks\n * The returned function is meant to be used as `fork` function in a\n * {@link ForkJoinOpts} config and extracts a workload slice of the\n * original buffer for a single worker. The HOF itself takes a minimum\n * chunk size as optional parameter (default: 1).\n *\n * **Note:** Depending on the configured `minChunkSize` and the size of\n * the input buffer to be partitioned, the returned fork function might\n * produce empty sub-arrays for some workers, iff the configured number\n * of workers exceeds the resulting number of chunks / input values.\n * E.g. If the number of workers = 8, buffer size = 10 and min chunk\n * size = 2, then the last 3 (i.e. 8 - 10 / 2) workers will only receive\n * empty workloads.\n *\n * More generally, if the input buffer size is not equally distributable\n * over the given number of workers, the last worker(s) might receive a\n * larger, smaller or empty chunk.\n *\n * Also see {@link forkJoin} and {@link joinBuffer}.\n *\n * @example\n * ```ts\n * forkJoin<number[], number[], number[], number[]>({\n *     src,\n *     // job definition / split buffer into chunks (min size 256 values)\n *     fork: forkBuffer(256),\n *     // re-join partial results\n *     join: joinBuffer(),\n *     worker: \"./worker.js\",\n * })\n * ```\n *\n * @param minChunkSize\n */\nexport const forkBuffer = (minChunkSize = 1) => (id, numWorkers, buf) => {\n    const chunkSize = Math.max(minChunkSize, (buf.length / numWorkers) | 0);\n    return id < numWorkers - 1\n        ? buf.slice(id * chunkSize, (id + 1) * chunkSize)\n        : buf.slice(id * chunkSize);\n};\n/**\n * Higher-order join function for scenarios involving the split-parallel\n * processing of a large buffer.\n *\n * @remarks\n * The returned function is meant to be used as `join` function in a\n * {@link ForkJoinOpts} config, receives the processed result chunks\n * from all workers (ordered by worker ID) and concatenates them back\n * into a single result array.\n *\n * The optional `fn` arg can be used to pick the actual result chunk\n * from each worker result. This is useful if the worker result type is\n * not an array and includes other data points (e.g. execution metrics\n * etc.). If `fn` is not given, it defaults to the identity function\n * (i.e. each worker's result is assumed to be an array).\n *\n * Also see {@link forkJoin} and {@link forkBuffer}.\n *\n * @param fn\n */\nexport const joinBuffer = (fn) => fn\n    ? (parts) => [...mapcat(fn, parts)]\n    : (parts) => Array.prototype.concat.apply([], parts);\n","import { assert } from \"@thi.ng/api\";\nimport { Subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\n/**\n * Returns a {@link Subscription} which transforms each incoming value\n * into a new {@link Stream}, subscribes to it (via an hidden / internal\n * subscription) and then only passes values from that stream to its own\n * subscribers.\n *\n * @remarks\n * If a new value is received, the metastream first unsubscribes from\n * any still active stream, before creating and subscribing to the new\n * stream. Hence this stream type is useful for cases where streams need\n * to be dynamically created & inserted into an existing dataflow\n * topology.\n *\n * The user supplied `factory` function will be called for each incoming\n * value and is responsible for creating the new stream instances. If\n * the function returns null/undefined, no further action will be taken\n * (acts like a filter transducer).\n *\n * The factory function does NOT need to create *new* streams, but can\n * merely return other existing streams, and so making the meta stream\n * act like a switch with arbitrary criteria.\n *\n * If the meta stream itself is the only subscriber to existing input\n * streams, you'll need to configure the input's\n * {@link CommonOpts.closeOut} option to keep them alive and support\n * dynamic switching between them.\n *\n * @example\n * ```ts\n * // transform each received odd number into a stream\n * // producing 3 copies of that number in the metastream\n * // even numbers are ignored\n * a = metastream(\n *   (x) => (x & 1)\n *     ? fromIterable(tx.repeat(x, 3), { delay: 100 })\n *     : null\n * );\n *\n * a.subscribe(trace())\n * a.next(23)\n *\n * // 23\n * // 23\n * // 23\n *\n * a.next(42) // ignored by factory fn\n *\n * a.next(43)\n * // 43\n * // 43\n * // 43\n * ```\n *\n * @example\n * ```ts\n * // infinite inputs\n * a = fromIterable(\n *   tx.repeat(\"a\"),\n *   { delay: 1000, closeOut: CloseMode.NEVER }\n * );\n * b = fromIterable(\n *   tx.repeat(\"b\"),\n *   { delay: 1000, closeOut: CloseMode.NEVER }\n * );\n *\n * // stream selector / switch\n * m = metaStream((x) => x ? a : b);\n * m.subscribe(trace(\"meta from: \"));\n *\n * m.next(true);\n * // meta from: a\n *\n * m.next(false);\n * // meta from: b\n *\n * m.next(true);\n * // meta from: a\n * ```\n *\n * @param factory\n * @param id\n */\nexport const metaStream = (factory, opts) => new MetaStream(factory, opts);\nexport class MetaStream extends Subscription {\n    constructor(factory, opts) {\n        super(undefined, optsWithID(\"metastram\", opts));\n        this.factory = factory;\n    }\n    next(x) {\n        if (this.state < 2 /* DONE */) {\n            if (this.stream) {\n                this.stream.unsubscribe(this.sub);\n            }\n            let stream = this.factory(x);\n            if (stream) {\n                this.stream = stream;\n                this.sub = this.stream.subscribe({\n                    next: (x) => {\n                        stream === this.stream && super.dispatch(x);\n                    },\n                    done: () => {\n                        this.stream.unsubscribe(this.sub);\n                        if (stream === this.stream) {\n                            this.stream = undefined;\n                            this.sub = undefined;\n                        }\n                    },\n                    error: (e) => super.error(e),\n                    __owner: this\n                });\n            }\n        }\n    }\n    done() {\n        if (this.stream) {\n            this.detach();\n        }\n        super.done();\n    }\n    unsubscribe(sub) {\n        if (this.stream && (!sub || this.subs.length === 1)) {\n            this.detach();\n        }\n        return super.unsubscribe();\n    }\n    detach() {\n        assert(!!this.stream, \"input stream already removed\");\n        this.stream.unsubscribe(this.sub);\n        delete this.stream;\n        delete this.sub;\n    }\n}\n","import { EquivMap } from \"@thi.ng/associative\";\nimport { unsupported } from \"@thi.ng/errors\";\nimport { LOGGER } from \"./api\";\nimport { Subscription, subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\n/**\n * Topic based stream splitter. Applies `topic` function to each\n * received value and only forwards it to the child subscriptions of the\n * returned topic.\n *\n * @remarks\n * The actual topic (return value from `topic` fn) can be of any type,\n * apart from `undefined`. Complex topics (e.g objects / arrays) are\n * allowed and they're matched with registered topics using\n * @thi.ng/equiv by default (but customizable via `equiv` option). Each\n * topic can have any number of subscribers.\n *\n * If a `xform` transducer is given, it is always applied prior to\n * passing the input to the topic function. I.e. in this case the topic\n * function will receive the transformed inputs.\n *\n * {@link PubSub} supports dynamic topic subscriptions and\n * unsubscriptions via {@link PubSub.subscribeTopic} and\n * {@link PubSub.unsubscribeTopic}. However, the standard\n * {@link ISubscribable.subscribe} / {@link ISubscribable.unsubscribe}\n * methods are NOT supported (since meaningless) and will throw an\n * error! `unsubscribe()` can only be called WITHOUT argument to\n * unsubscribe the entire `PubSub` instance (incl. all topic\n * subscriptions) from the parent stream.\n *\n * @param opts\n */\nexport const pubsub = (opts) => new PubSub(opts);\nexport class PubSub extends Subscription {\n    constructor(opts) {\n        opts = opts || {};\n        super(undefined, optsWithID(\"pubsub\", {\n            xform: opts.xform\n        }));\n        this.topicfn = opts.topic;\n        this.topics = new EquivMap(undefined, {\n            equiv: opts.equiv\n        });\n    }\n    /**\n     * Unsupported. Use `subscribeTopic()` instead.\n     */\n    subscribe() {\n        return unsupported(`use subscribeTopic() instead`);\n    }\n    /**\n     * Unsupported. Use `subscribeTopic()` instead.\n     */\n    transform() {\n        return unsupported(`use subscribeTopic() instead`);\n    }\n    subscribeTopic(topicID, sub, opts) {\n        let t = this.topics.get(topicID);\n        !t && this.topics.set(topicID, (t = subscription()));\n        return t.subscribe(sub, opts);\n    }\n    unsubscribeTopic(topicID, sub) {\n        const t = this.topics.get(topicID);\n        return t ? t.unsubscribe(sub) : false;\n    }\n    unsubscribe(sub) {\n        if (!sub) {\n            for (let t of this.topics.values()) {\n                t.unsubscribe();\n            }\n            this.topics.clear();\n            return super.unsubscribe();\n        }\n        return unsupported();\n    }\n    done() {\n        for (let t of this.topics.values()) {\n            t.done();\n        }\n        super.done();\n    }\n    dispatch(x) {\n        LOGGER.debug(this.id, \"dispatch\", x);\n        const t = this.topicfn(x);\n        if (t !== undefined) {\n            const sub = this.topics.get(t);\n            if (sub) {\n                try {\n                    sub.next && sub.next(x);\n                }\n                catch (e) {\n                    sub.error ? sub.error(e) : this.error(e);\n                }\n            }\n        }\n    }\n}\n","import { isFunction } from \"@thi.ng/checks\";\nimport { LOGGER } from \"./api\";\nimport { Subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\nexport function stream(src, opts) {\n    return new Stream(src, opts);\n}\nexport class Stream extends Subscription {\n    // prettier-ignore\n    constructor(src, opts) {\n        const [_src, _opts] = isFunction(src) ? [src, opts] : [undefined, src];\n        super(undefined, optsWithID(\"stream\", _opts));\n        this.src = _src;\n        this._inited = false;\n    }\n    subscribe(...args) {\n        const wrapped = super.subscribe.apply(this, args);\n        if (!this._inited) {\n            this._cancel = (this.src && this.src(this)) || (() => void 0);\n            this._inited = true;\n        }\n        return wrapped;\n    }\n    unsubscribe(sub) {\n        const res = super.unsubscribe(sub);\n        if (res &&\n            (!sub ||\n                ((!this.subs || !this.subs.length) &&\n                    this.closeOut !== 0 /* NEVER */))) {\n            this.cancel();\n        }\n        return res;\n    }\n    done() {\n        this.cancel();\n        super.done();\n        delete this.src;\n        delete this._cancel;\n    }\n    error(e) {\n        super.error(e);\n        this.cancel();\n    }\n    cancel() {\n        if (this._cancel) {\n            LOGGER.debug(this.id, \"cancel\");\n            const f = this._cancel;\n            delete this._cancel;\n            f();\n        }\n    }\n}\n","import { Subscription } from \"./subscription\";\nimport { optsWithID } from \"./utils/idgen\";\n/**\n * Returns a new {@link StreamMerge} subscription, consuming values from\n * multiple inputs and passing received values on to any subscribers.\n *\n * @remarks\n * Input streams can be added and removed dynamically. By default,\n * `StreamMerge` calls {@link ISubscriber.done} when the last active\n * input is done, but this behavior can be overridden via the provided\n * {@link StreamMergeOpts | options}.\n *\n * @example\n * ```ts\n * merge({\n *     // input streams w/ different frequencies\n *     src: [\n *         fromIterable([1, 2, 3], { delay: 10 }),\n *         fromIterable([10, 20, 30], { delay: 21 }),\n *         fromIterable([100, 200, 300], { delay: 7 })\n *     ]\n * }).subscribe(trace());\n * // 100\n * // 1\n * // 200\n * // 10\n * // 2\n * // 300\n * // 3\n * // 20\n * // 30\n * ```\n *\n * @example\n * Use the {@link @thi.ng/transducers#labeled} transducer for each\n * input to create a stream of labeled values and track their provenance:\n *\n * ```ts\n * merge({\n *     src: [\n *         fromIterable([1, 2, 3]).transform(tx.labeled(\"a\")),\n *         fromIterable([10, 20, 30]).transform(tx.labeled(\"b\")),\n *     ]\n * }).subscribe(trace());\n * // [\"a\", 1]\n * // [\"b\", 10]\n * // [\"a\", 2]\n * // [\"b\", 20]\n * // [\"a\", 3]\n * // [\"b\", 30]\n * ```\n *\n * @param opts\n */\nexport const merge = (opts) => new StreamMerge(opts);\nexport class StreamMerge extends Subscription {\n    constructor(opts) {\n        opts = opts || {};\n        super(undefined, optsWithID(\"streammerge\", opts));\n        this.sources = new Map();\n        opts.src && this.addAll(opts.src);\n    }\n    add(src) {\n        this.ensureState();\n        this.sources.set(src, src.subscribe({\n            next: (x) => {\n                if (x instanceof Subscription) {\n                    this.add(x);\n                }\n                else {\n                    this.next(x);\n                }\n            },\n            done: () => this.markDone(src),\n            __owner: this\n        }, { id: `in-${src.id}` }));\n    }\n    addAll(src) {\n        for (let s of src) {\n            this.add(s);\n        }\n    }\n    remove(src) {\n        const sub = this.sources.get(src);\n        if (sub) {\n            this.sources.delete(src);\n            sub.unsubscribe();\n            return true;\n        }\n        return false;\n    }\n    removeID(id) {\n        for (let s of this.sources) {\n            if (s[0].id === id) {\n                return this.remove(s[0]);\n            }\n        }\n        return false;\n    }\n    removeAll(src) {\n        let ok = true;\n        for (let s of src) {\n            ok = this.remove(s) && ok;\n        }\n        return ok;\n    }\n    removeAllIDs(ids) {\n        let ok = true;\n        for (let id of ids) {\n            ok = this.removeID(id) && ok;\n        }\n        return ok;\n    }\n    unsubscribe(sub) {\n        if (!sub) {\n            for (let s of this.sources.values()) {\n                s.unsubscribe();\n            }\n            this.state = 2 /* DONE */;\n            this.sources.clear();\n        }\n        return super.unsubscribe(sub);\n    }\n    markDone(src) {\n        this.remove(src);\n        if (this.closeIn === 1 /* FIRST */ ||\n            (this.closeIn === 2 /* LAST */ && !this.sources.size)) {\n            this.done();\n        }\n    }\n}\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns a {@link Stream} of values from provided iterable, emitted at\n * the given `delay` interval.\n *\n * @remarks\n * Asynchronously starts pulling values from source iterable when the\n * first subscriber becomes available. The values are processed &\n * emitted via `setInterval()`, using the given `delay` value (default:\n * 0). By default, once the iterable is exhausted (if finite), calls\n * {@link ISubscriber.done} to close the stream, but this can be\n * re-configured via provided {@link CommonOpts | options}.\n *\n * @param src\n * @param opts\n */\nexport const fromIterable = (src, opts = {}) => new Stream((stream) => {\n    const iter = src[Symbol.iterator]();\n    const id = setInterval(() => {\n        let val;\n        if ((val = iter.next()).done) {\n            clearInterval(id);\n            stream.closeIn !== 0 /* NEVER */ && stream.done();\n        }\n        else {\n            stream.next(val.value);\n        }\n    }, opts.delay || 0);\n    return () => clearInterval(id);\n}, optsWithID(\"iterable\", opts));\n/**\n * Creates a new `Stream` of given iterable which synchronously calls\n * `.next()` for each item of the iterable when the first (and in this\n * case the only one) subscriber becomes available. Once the iterable is\n * exhausted (MUST be finite!), then calls `.done()` by default, but can\n * be avoided by passing `false` as last argument.\n *\n * @param src\n * @param opts\n */\nexport const fromIterableSync = (src, opts) => new Stream((stream) => {\n    for (let s of src) {\n        stream.next(s);\n    }\n    stream.closeIn !== 0 /* NEVER */ && stream.done();\n}, optsWithID(\"iterable-sync\", opts));\n","import { fromIterable } from \"./from/iterable\";\nimport { optsWithID } from \"./utils/idgen\";\nexport function trigger(x = true) {\n    return fromIterable([x], optsWithID(\"trigger\"));\n}\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns a {@link Stream} of monotonically increasing counter values,\n * emitted at given `delay` interval and up to the optionally defined\n * max value (default: ), after which the stream is closed.\n *\n * @remarks\n * The stream only starts when the first subscriber becomes available.\n *\n * @param delay\n * @param opts\n */\nexport const fromInterval = (delay, opts) => {\n    opts = optsWithID(\"interval\", Object.assign({ num: Infinity }, opts));\n    return new Stream((stream) => {\n        let i = 0;\n        let count = opts.num;\n        stream.next(i++);\n        let id = setInterval(() => {\n            stream.next(i++);\n            if (--count <= 0) {\n                clearInterval(id);\n                stream.closeIn !== 0 /* NEVER */ && stream.done();\n            }\n        }, delay);\n        return () => clearInterval(id);\n    }, opts);\n};\n","import { isNode } from \"@thi.ng/checks\";\nimport { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\nimport { fromInterval } from \"./interval\";\n/**\n * Yields {@link Stream} of a monotonically increasing counter,\n * triggered by a `requestAnimationFrame()` loop (only available in\n * browser environments).\n *\n * @remarks\n * In NodeJS, this function falls back to {@link fromInterval}, yielding\n * a similar (approx. 60Hz) stream.\n *\n * All subscribers to this stream will be processed during that same\n * loop iteration.\n */\nexport const fromRAF = (opts) => isNode()\n    ? fromInterval(16, opts)\n    : new Stream((stream) => {\n        let i = 0;\n        let isActive = true;\n        let loop = () => {\n            isActive && stream.next(i++);\n            isActive && (id = requestAnimationFrame(loop));\n        };\n        let id = requestAnimationFrame(loop);\n        return () => {\n            isActive = false;\n            cancelAnimationFrame(id);\n        };\n    }, optsWithID(\"raf\", opts));\n","import { isNumber } from \"@thi.ng/checks\";\nimport { dedupe, reducer, scan } from \"@thi.ng/transducers\";\nimport { fromInterval } from \"./from/interval\";\nimport { fromRAF } from \"./from/raf\";\nimport { sync } from \"./stream-sync\";\n/**\n * Takes an existing stream/subscription `src` and attaches new\n * subscription which interpolates between incoming values from `src`\n * using the given `mix` function.\n *\n * @remarks\n * The returned construct produces values at a rate controlled by the\n * `clock` stream or frequency. If omitted, `clock` defaults to\n * {@link fromRAF} (~60Hz). If the `clock` is given as number, creates a\n * {@link fromInterval} or else uses the given `clock` stream directly.\n * In general, the frequency of the `clock` should always be higher than\n * that of `src` or else interpolation will have undefined behavior.\n *\n * If `stop` is given as well, no values will be passed downstream if\n * that function returns true. This can be used to limit traffic once\n * the tween target value has been reached.\n *\n * The returned subscription closes automatically when either `src` or\n * `clock` are exhausted.\n *\n * @example\n * ```ts\n * val = stream();\n *\n * tween(\n *   // consume from `val` stream\n *   val,\n *   // initial start value to interpolate from\n *   0,\n *   // interpolation fn (LERP)\n *   (a, b) => a + (b - a) * 0.5,\n *   // stop emitting values if difference to previous result < 0.01\n *   (a, b) => Math.abs(a - b) < 0.01\n * ).subscribe(trace(\"tweened\"))\n *\n * a.next(10)\n * // 5\n * // 7.5\n * // ...\n * // 9.98046875\n *\n * a.next(100)\n * // 55\n * // 77.5\n * // ...\n * // 99.989013671875\n * ```\n *\n * @param src\n * @param initial\n * @param mix\n * @param stop\n * @param clock\n */\nexport const tween = (src, initial, mix, stop, clock) => sync({\n    src: {\n        src,\n        _: clock == null\n            ? fromRAF()\n            : isNumber(clock)\n                ? fromInterval(clock)\n                : clock\n    },\n    closeIn: 1 /* FIRST */\n}).transform(scan(reducer(() => initial, (acc, { src }) => mix(acc, src))), dedupe(stop || (() => false)));\n/**\n * Convenience version of `tween` for its most common use case, tweening\n * of numeric streams.\n *\n * @param src\n * @param init\n * @param speed\n * @param eps\n * @param clock\n */\nexport const tweenNumber = (src, init = 0, speed = 0.05, eps = 1e-3, clock) => tween(src, init, (a, b) => a + (b - a) * speed, (a, b) => Math.abs(a - b) < eps, clock);\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Yields {@link Stream} of value changes in given\n * {@link @thi.ng/atom# | Atom-like state container}.\n *\n * @remarks\n * Attaches a {@link @thi.ng/api#IWatch.addWatch | watch} to the atom\n * and checks for value changes with given `changed` predicate (`!==` by\n * default). If the predicate returns truthy result, the new value is\n * emitted on the stream. If `emitFirst` is true (default), also emits\n * atom's current value when first subscriber attaches to stream.\n *\n * Also see {@link fromView}\n *\n * @example\n * ```ts\n * db = new Atom({ a: 23, b: 88 });\n * cursor = new Cursor(db, \"a\")\n *\n * rs.fromAtom(cursor).subscribe(rs.trace(\"cursor val:\"))\n * // cursor val: 23\n *\n * cursor.reset(42);\n * // cursor val: 42\n *\n * db.reset({a: 66})\n * // cursor val: 66\n * ```\n *\n * @param atom\n * @param opts\n */\nexport const fromAtom = (atom, opts) => {\n    opts = optsWithID(\"atom\", Object.assign({ emitFirst: true, changed: (a, b) => a !== b }, opts));\n    return new Stream((stream) => {\n        atom.addWatch(stream.id, (_, prev, curr) => {\n            if (opts.changed(prev, curr)) {\n                stream.next(curr);\n            }\n        });\n        opts.emitFirst && stream.next(atom.deref());\n        return () => atom.removeWatch(stream.id);\n    }, opts);\n};\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Creates a {@link Stream} of events attached to given element / event\n * target and using given event listener options (same as supported by\n * `addEventListener()`, default: false).\n *\n * @param src event target\n * @param name event name\n * @param listenerOpts listener opts\n * @param streamOpts stream opts\n */\nexport const fromEvent = (src, name, listenerOpts = false, streamOpts) => new Stream((stream) => {\n    let listener = (e) => stream.next(e);\n    src.addEventListener(name, listener, listenerOpts);\n    return () => src.removeEventListener(name, listener, listenerOpts);\n}, optsWithID(`event-${name}`, streamOpts));\n/**\n * Same as `fromEvent`, however only supports well-known DOM event\n * names. Returned stream instance will use corresponding concrete event\n * type in its type signature, whereas `fromEvent` will only use the\n * generic `Event`.\n *\n * ```\n * fromDOMEvent(document.body, \"mousemove\"); // Stream<MouseEvent>\n * fromEvent(document.body, \"mousemove\"); // Stream<Event>\n * ```\n *\n * @see fromEvent\n *\n * @param src\n * @param name\n * @param listenerOpts\n * @param streamOpts\n */\nexport const fromDOMEvent = (src, name, listenerOpts = false, streamOpts) => fromEvent(src, name, listenerOpts, streamOpts);\n","import { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Yields a single-value {@link Stream} of the resolved promise and then\n * automatically marks itself done.\n *\n * @remarks\n * It doesn't matter if the promise resolves before the first subscriber\n * has attached.\n *\n * @param src\n * @param opts\n */\nexport const fromPromise = (src, opts) => {\n    let canceled = false;\n    let isError = false;\n    let err = {};\n    src.catch((e) => {\n        err = e;\n        isError = true;\n    });\n    return new Stream((stream) => {\n        src.then((x) => {\n            if (!canceled && stream.getState() < 2 /* DONE */) {\n                if (isError) {\n                    stream.error(err);\n                    err = null;\n                }\n                else {\n                    stream.next(x);\n                    stream.closeIn !== 0 /* NEVER */ && stream.done();\n                }\n            }\n        }, (e) => stream.error(e));\n        return () => {\n            canceled = true;\n        };\n    }, optsWithID(\"promise\", opts));\n};\n","import { mapcat } from \"@thi.ng/transducers\";\nimport { optsWithID } from \"../utils/idgen\";\nimport { fromPromise } from \"./promise\";\n/**\n * Wraps given iterable in `Promise.all()` to yield {@link Stream} of\n * results in same order as arguments, then closes.\n *\n * @remarks\n * If any of the promises rejects, all others will do so too. In this\n * case the stream calls {@link ISubscriber.error} in all of its\n * subscribers.\n *\n * @example\n * ```ts\n * fromPromises([\n *     Promise.resolve(1),\n *     Promise.resolve(2),\n *     Promise.resolve(3)\n * ]).subscribe(trace())\n * // 1\n * // 2\n * // 3\n * // done\n * ```\n *\n * @example\n * If individual error handling is required, an alternative is below\n * (however this approach provides no ordering guarantees):\n *\n * ```ts\n * fromIterable([\n *     Promise.resolve(1),\n *     new Promise(() => setTimeout(() => { throw new Error(\"eeek\"); }, 10)),\n *     Promise.resolve(3)\n * ]).subscribe(resolve()).subscribe(trace())\n * ```\n *\n * @param promises\n */\nexport const fromPromises = (promises, opts) => fromPromise(Promise.all(promises), optsWithID(\"promises\", opts)).transform(mapcat((x) => x));\n","import { isArray, isString } from \"@thi.ng/checks\";\n/**\n * Converts the given key path to canonical form (array).\n *\n * ```\n * toPath(\"a.b.c\");\n * // [\"a\", \"b\", \"c\"]\n *\n * toPath(0)\n * // [0]\n *\n * toPath([\"a\", \"b\", \"c\"])\n * // [\"a\", \"b\", \"c\"]\n * ```\n *\n * @param path\n */\nexport const toPath = (path) => isArray(path)\n    ? path\n    : isString(path)\n        ? path.length > 0\n            ? path.split(\".\")\n            : []\n        : path != null\n            ? [path]\n            : [];\n/**\n * Takes an arbitrary object and lookup path. Descends into object along\n * path and returns true if the full path exists (even if final leaf\n * value is `null` or `undefined`). Checks are performed using\n * `hasOwnProperty()`.\n *\n * @param obj\n * @param path\n */\nexport const exists = (obj, path) => {\n    if (obj == null) {\n        return false;\n    }\n    path = toPath(path);\n    for (let n = path.length - 1, i = 0; i <= n; i++) {\n        const k = path[i];\n        if (!obj.hasOwnProperty(k)) {\n            return false;\n        }\n        obj = obj[k];\n        if (obj == null && i < n) {\n            return false;\n        }\n    }\n    return true;\n};\n","import { toPath } from \"./path\";\n/**\n * Composes a getter function for given nested lookup path. Optimized\n * fast execution paths are provided for path lengths <= 4.\n *\n * @remarks\n * Supports any `[]`-indexable data structure (arrays, objects,\n * strings).\n *\n * If `path` is given as string, it will be split using `.`. Returns\n * function which accepts single object and when called, returns value\n * at given path.\n *\n * If any intermediate key is not present in the given obj, descent\n * stops and the function returns `undefined`.\n *\n * If `path` is an empty string or array, the returned getter will\n * simply return the given state arg (identity function).\n *\n * Also see: `getIn()`\n *\n * @example\n * ```ts\n * interface Foo {\n *   a: { b: { c: number; } }\n * }\n *\n * // fully typed getter\n * g = getter<Foo, \"a\", \"b\", \"c\">([\"a\",\"b\",\"c\"]);\n *\n * // error (wrong `d` key)\n * g = getter<Foo, \"a\", \"b\", \"d\">([\"a\",\"b\",\"d\"]);\n *\n * // unchecked (accepts any, returns any)\n * g = getter(\"a.b.c\");\n *\n * g({ a: { b: { c: 23} } }) // 23\n * g({ x: 23 }) // undefined\n * g() // undefined\n * ```\n *\n * @param path\n */\nexport const getter = (path) => getterT(path);\nexport function getterT(path) {\n    const ks = toPath(path);\n    let [a, b, c, d] = ks;\n    switch (ks.length) {\n        case 0:\n            return (s) => s;\n        case 1:\n            return (s) => (s != null ? s[a] : undefined);\n        case 2:\n            return (s) => s != null ? ((s = s[a]) != null ? s[b] : undefined) : undefined;\n        case 3:\n            return (s) => s != null\n                ? (s = s[a]) != null\n                    ? (s = s[b]) != null\n                        ? s[c]\n                        : undefined\n                    : undefined\n                : undefined;\n        case 4:\n            return (s) => s != null\n                ? (s = s[a]) != null\n                    ? (s = s[b]) != null\n                        ? (s = s[c]) != null\n                            ? s[d]\n                            : undefined\n                        : undefined\n                    : undefined\n                : undefined;\n        default:\n            return (s) => {\n                const n = ks.length - 1;\n                let res = s;\n                for (let i = 0; res != null && i <= n; i++) {\n                    res = res[ks[i]];\n                }\n                return res;\n            };\n    }\n}\n","import { isArray } from \"@thi.ng/checks\";\nimport { toPath } from \"./path\";\n/**\n * Composes a setter function for given nested update path. Optimized\n * fast execution paths are provided for path lengths less up to 4.\n *\n * @remarks\n * Supports both arrays and objects and creates intermediate shallow\n * copies at each level of the path. Thus provides structural sharing\n * with the original data for any branches not being updated by the\n * setter.\n *\n * If `path` is given as string, it will be split using `.`. Returns\n * function which accepts single object and when called, **immutably**\n * updates value at given path, i.e. produces a partial deep copy of obj\n * up until given path.\n *\n * If any intermediate key is not present in the given obj, creates a\n * plain empty object for that key and descends further.\n *\n * If `path` is an empty string or array, the returned setter will\n * simply return the new value.\n *\n * Only keys in the path will be modified, all other keys present in the\n * given object retain their original values to provide efficient\n * structural sharing / re-use.\n *\n * Also see: {@link setIn}, {@link updateIn}, {@link deleteIn}\n *\n * @example\n * ```\n * s = setter(\"a.b.c\");\n * // or\n * s = setter([\"a\",\"b\",\"c\"]);\n *\n * s({ a: { b: { c: 23} } }, 24)\n * // { a: { b: { c: 24} } }\n *\n * s({ x: 23 }, 24)\n * // { x: 23, a: { b: { c: 24 } } }\n *\n * s(null, 24)\n * // { a: { b: { c: 24 } } }\n * ```\n *\n * @example\n * ```ts\n * s = setter(\"a.b.c\");\n *\n * a = {x: {y: {z: 1}}};\n * b = s(a, 2);\n * // { x: { y: { z: 1 } }, a: { b: { c: 2 } } }\n *\n * a.x === b.x // true\n * a.x.y === b.x.y // true\n * ```\n *\n * @param path\n */\nexport const setter = (path) => setterT(path);\nexport function setterT(path) {\n    const ks = toPath(path);\n    let [a, b, c, d] = ks;\n    switch (ks.length) {\n        case 0:\n            return (_, v) => v;\n        case 1:\n            return (s, v) => ((s = _copy(s)), (s[a] = v), s);\n        case 2:\n            return (s, v) => {\n                let x;\n                s = _copy(s);\n                s[a] = x = _copy(s[a]);\n                x[b] = v;\n                return s;\n            };\n        case 3:\n            return (s, v) => {\n                let x, y;\n                s = _copy(s);\n                s[a] = x = _copy(s[a]);\n                x[b] = y = _copy(x[b]);\n                y[c] = v;\n                return s;\n            };\n        case 4:\n            return (s, v) => {\n                let x, y, z;\n                s = _copy(s);\n                s[a] = x = _copy(s[a]);\n                x[b] = y = _copy(x[b]);\n                y[c] = z = _copy(y[c]);\n                z[d] = v;\n                return s;\n            };\n        default:\n            let f;\n            for (let i = ks.length; --i >= 0;) {\n                f = compS(ks[i], f);\n            }\n            return f;\n    }\n}\nconst _copy = (s) => (isArray(s) ? s.slice() : Object.assign({}, s));\nconst compS = (k, f) => (s, v) => ((s = _copy(s)), (s[k] = f ? f(s[k], v) : v), s);\n","import { getterT } from \"./getter\";\nimport { setterT } from \"./setter\";\n/**\n * Similar to {@link setIn}, but applies given function to current path\n * value (incl. any additional/optional arguments passed to `updateIn`)\n * and uses result as new value. Does not modify original state (unless\n * given function does so itself).\n *\n * ```\n * add = (x, y) => x + y;\n * updateIn({ a: { b: { c: 23 } } }, \"a.b.c\", add, 10);\n * // { a: { b: { c: 33 } } }\n * ```\n *\n * @param state - state to update\n * @param path - update path\n * @param fn - update function\n * @param args - optional args for `fn`\n */\nexport const updateIn = (state, path, fn, ...args) => updateInT(state, path, fn, ...args);\nexport function updateInT(state, path, fn, ...args) {\n    return setterT(path)(state, fn.apply(null, (args.unshift(getterT(path)(state)), args)));\n}\n","import { toPath } from \"./path\";\nimport { updateInT } from \"./update-in\";\n/**\n * Uses {@link updateIn} and returns updated state with key for given\n * path removed. Does not modify original state.Returns `undefined` if\n * `path` is an empty string or array.\n *\n * ```\n * deleteIn({ a: { b: { c: 23 } } }, \"a.b.c\");\n * // { a: { b: { } } }\n * ```\n *\n * @param state\n * @param path\n */\nexport const deleteIn = (state, path) => deleteInT(state, path);\nexport function deleteInT(state, path) {\n    const ks = [...toPath(path)];\n    if (ks.length > 0) {\n        const k = ks.pop();\n        return updateInT(state, ks, (x) => ((x = Object.assign({}, x)), delete x[k], x));\n    }\n}\n","import { getterT } from \"./getter\";\n/**\n * Immediate use getter, i.e. same as: `getter(path)(state)`.\n *\n * @remarks\n * Supports type checked paths and values for path lengths <= 8. String\n * paths are always unchecked (i.e. `state` is `any`).\n *\n * @example\n * ```ts\n * // checked path and inferred return type\n * getIn({ a: { b: { c: 23 } } }, [\"a\",\"b\",\"c\"]);\n * // 23\n *\n * // unchecked path\n * getIn({ a: { b: { c: 23 } } }, \"a.b.c\");\n * // 23\n * ```\n *\n * @param state\n * @param path\n */\nexport const getIn = (state, path) => getterT(path)(state);\nexport function getInT(state, path) {\n    return getterT(path)(state);\n}\n","import { toPath } from \"./path\";\n/**\n * Higher-order function, similar to {@link setter}. Returns function\n * which when called mutates given object/array at given path location.\n *\n * @remarks\n * The returned function bails if any intermediate path values are\n * non-indexable (only the very last path element can be missing in the\n * actual object structure). If successful, returns original (mutated)\n * object, else `undefined`. This function provides optimized versions\n * for path lengths <= 4. Type checking is supported for path lengths <=\n * 8.\n *\n * @param path\n */\nexport const mutator = (path) => mutatorT(path);\nexport function mutatorT(path) {\n    const ks = toPath(path);\n    let [a, b, c, d] = ks;\n    switch (ks.length) {\n        case 0:\n            return (_, x) => x;\n        case 1:\n            return (s, x) => (s ? ((s[a] = x), s) : undefined);\n        case 2:\n            return (s, x) => {\n                let t;\n                return s\n                    ? (t = s[a])\n                        ? ((t[b] = x), s)\n                        : undefined\n                    : undefined;\n            };\n        case 3:\n            return (s, x) => {\n                let t;\n                return s\n                    ? (t = s[a])\n                        ? (t = t[b])\n                            ? ((t[c] = x), s)\n                            : undefined\n                        : undefined\n                    : undefined;\n            };\n        case 4:\n            return (s, x) => {\n                let t;\n                return s\n                    ? (t = s[a])\n                        ? (t = t[b])\n                            ? (t = t[c])\n                                ? ((t[d] = x), s)\n                                : undefined\n                            : undefined\n                        : undefined\n                    : undefined;\n            };\n        default:\n            return (s, x) => {\n                let t = s;\n                const n = ks.length - 1;\n                for (let k = 0; k < n; k++) {\n                    if (!(t = t[ks[k]]))\n                        return;\n                }\n                t[ks[n]] = x;\n                return s;\n            };\n    }\n}\n","import { mutatorT } from \"./mutator\";\n/**\n * Immediate use mutator, i.e. same as: `mutator(path)(state, val)`.\n *\n * @remarks\n * Also see {@link setIn}, {@link updateIn}, {@link deleteIn}.\n *\n * @example\n * ```ts\n * interface Foo {\n *   a: { b: number[]; }\n * }\n *\n * // fully type checked\n * mutIn({ a: { b: [10, 20] } }, [\"a\", \"b\", 1], 23)\n * // { a: { b: [ 10, 23 ] } }\n *\n * // unchecked\n * mutIn({ a: { b: [10, 20] } }, \"a.b.1\", 23);\n * // { a: { b: [ 10, 23 ] } }\n *\n * // fails (see `mutator` docs)\n * mutIn({}, \"a.b.c\", 23);\n * // undefined\n * ```\n *\n * @param state\n * @param path\n * @param val\n */\nexport const mutIn = (state, path, val) => mutInT(state, path, val);\nexport function mutInT(state, path, val) {\n    return mutatorT(path)(state, val);\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nimport { mutInT } from \"./mut-in\";\n/**\n * Similar to {@link mutIn}, but takes any number of path-value pairs as\n * args and applies them in sequence using `mutIn()`. All key paths must\n * already be present in the given data structure until their\n * penultimate key.\n *\n * @remarks\n * Unlike {@link mutIn}, this function does not use type checked paths.\n *\n * @example\n * ```ts\n * mutInMany(\n *   { a: { b: 1 }, x: { y: { z: 2 } } },\n *   \"a.b\", 10,\n *   \"x.y.z\", 20\n * )\n * // { a: { b: 10 }, x: { y: { z: 20 } } }\n * ```\n *\n * @param state\n * @param pairs\n */\nexport const mutInMany = (state, ...pairs) => {\n    const n = pairs.length;\n    n & 1 && illegalArgs(`require even number of args (got ${pairs.length})`);\n    for (let i = 0; i < n && state; i += 2) {\n        state = mutInT(state, pairs[i], pairs[i + 1]);\n    }\n    return state;\n};\n","import { setterT } from \"./setter\";\n/**\n * Immediate use setter, i.e. same as: `setter(path)(state, val)`.\n *\n * @remarks\n * Supports type checked paths and values for path lengths <= 8. String\n * paths are always unchecked (i.e. `state` is `any`).\n *\n * @example\n * ```ts\n *\n * setIn({}, \"a.b.c\", 23);\n * // { a: { b: { c: 23} } }\n * ```\n *\n * @param state\n * @param path\n */\nexport const setIn = (state, path, val) => setterT(path)(state, val);\nexport function setInT(state, path, val) {\n    return setterT(path)(state, val);\n}\n","import { illegalArgs } from \"@thi.ng/errors\";\nimport { setInT } from \"./set-in\";\n/**\n * Similar to {@link setIn}, but takes any number of path-value pairs as\n * args and applies them in sequence by calling `setIn()` for each.\n *\n * @remarks\n * Any key paths missing in the data structure will be created. Does\n * *not* mutate original (instead use {@link mutInMany} for this\n * purpose).\n *\n * Unlike {@link setIn}, this function does not use type checked paths.\n *\n * ```\n * setInMany({}, \"a.b\", 10, \"x.y.z\", 20)\n * // { a: { b: 10 }, x: { y: { z: 20 } } }\n * ```\n *\n * @param state\n * @param pairs\n */\nexport const setInMany = (state, ...pairs) => {\n    const n = pairs.length;\n    n & 1 &&\n        illegalArgs(`require even number of KV args (got ${pairs.length})`);\n    for (let i = 0; i < n; i += 2) {\n        state = setInT(state, pairs[i], pairs[i + 1]);\n    }\n    return state;\n};\n","import { getterT } from \"./getter\";\nimport { setterT } from \"./setter\";\n/**\n * Similar to {@link setter}, returns a function to update values at\n * given `path` using provided update `fn`.\n *\n * @remarks\n * The returned function accepts a single object / array and applies\n * `fn` to current path value (incl. any additional/optional arguments\n * passed) and uses result as new value. Does not modify original state\n * (unless given function does so itself).\n *\n * ```\n * add = updater(\"a.b\", (x, n) => x + n);\n *\n * add({a: {b: 10}}, 13);\n * // { a: { b: 23 } }\n * ```\n *\n * @param path\n * @param fn\n */\nexport const updater = (path, fn) => updaterT(path, fn);\nexport function updaterT(path, fn) {\n    const g = getterT(path);\n    const s = setterT(path);\n    return (state, ...args) => s(state, fn.apply(null, (args.unshift(g(state)), args)));\n}\n","export * from \"./delete-in\";\nexport * from \"./getter\";\nexport * from \"./get-in\";\nexport * from \"./mut-in\";\nexport * from \"./mut-in-many\";\nexport * from \"./mutator\";\nexport * from \"./path\";\nexport * from \"./setter\";\nexport * from \"./set-in\";\nexport * from \"./set-in-many\";\nexport * from \"./updater\";\nexport * from \"./update-in\";\n","let NEXT_ID = 0;\nexport const nextID = () => NEXT_ID++;\n","import { equiv as _equiv } from \"@thi.ng/equiv\";\nimport { getter, toPath } from \"@thi.ng/paths\";\nimport { nextID } from \"./idgen\";\n/**\n * This class implements readonly access to a deeply nested value with\n * in an Atom/Cursor. An optional transformer function can be supplied\n * at creation time to produce a derived/materialized view of the actual\n * value held in the atom. Views can be created directly or via the\n * `.addView()` method of the parent state. Views can be `deref()`'d\n * like atoms and polled for value changes using `changed()`. The\n * transformer is only applied once per value change and its result\n * cached until the next change.\n *\n * If the optional `lazy` is true (default), the transformer will only\n * be executed with the first `deref()` after each value change. If\n * `lazy` is false, the transformer function will be executed\n * immediately after a value change occurred and so can be used like a\n * watch which only triggers if there was an actual value change (in\n * contrast to normal watches, which execute with each update,\n * regardless of value change).\n *\n * Related, the actual value change predicate can be customized. If not\n * given, the default `@thi.ng/equiv` will be used.\n *\n * ```\n * a = new Atom({a: {b: 1}});\n * v = a.addView(\"a.b\", (x) => x * 10);\n *\n * v.deref()\n * // 10\n *\n * // update atom state\n * a.swap((state) => setIn(state, \"a.b\", 2));\n * // {a: {b: 2}}\n *\n * v.changed()\n * // true\n * v.deref()\n * // 20\n *\n * v.release()\n * // remove view from parent state\n * ```\n */\nexport class View {\n    constructor(parent, path, tx, lazy = true, equiv = _equiv) {\n        this.parent = parent;\n        this.id = `view-${nextID()}`;\n        this.tx = tx || ((x) => x);\n        this.path = toPath(path);\n        this.isDirty = true;\n        this.isLazy = lazy;\n        const lookup = getter(this.path);\n        const state = this.parent.deref();\n        this.unprocessed = state ? lookup(state) : undefined;\n        if (!lazy) {\n            this.state = this.tx(this.unprocessed);\n            this.unprocessed = undefined;\n        }\n        parent.addWatch(this.id, (_, prev, curr) => {\n            const pval = prev ? lookup(prev) : prev;\n            const val = curr ? lookup(curr) : curr;\n            if (!equiv(val, pval)) {\n                if (lazy) {\n                    this.unprocessed = val;\n                }\n                else {\n                    this.state = this.tx(val);\n                }\n                this.isDirty = true;\n            }\n        });\n    }\n    get value() {\n        return this.deref();\n    }\n    /**\n     * Returns view's value. If the view has a transformer, the\n     * transformed value is returned. The transformer is only run once\n     * per value change. See class comments about difference between\n     * lazy/eager behaviors.\n     */\n    deref() {\n        if (this.isDirty) {\n            if (this.isLazy) {\n                this.state = this.tx(this.unprocessed);\n                this.unprocessed = undefined;\n            }\n            this.isDirty = false;\n        }\n        return this.state;\n    }\n    /**\n     * Returns true, if the view's value has changed since last\n     * `deref()`.\n     */\n    changed() {\n        return this.isDirty;\n    }\n    /**\n     * Like `deref()`, but doesn't update view's cached state and dirty\n     * flag if value has changed. If there's an unprocessed value\n     * change, returns result of this sub's transformer or else the\n     * cached value.\n     *\n     * **Important:** Use this function only if the view has none or or\n     * a stateless transformer. Else might cause undefined/inconsistent\n     * behavior when calling `view()` or `deref()` subsequently.\n     */\n    view() {\n        return this.isDirty && this.isLazy\n            ? this.tx(this.unprocessed)\n            : this.state;\n    }\n    /**\n     * Disconnects this view from parent state, marks itself\n     * dirty/changed and sets its unprocessed raw value to `undefined`.\n     */\n    release() {\n        this.unprocessed = undefined;\n        if (!this.isLazy) {\n            this.state = this.tx(undefined);\n        }\n        this.isDirty = true;\n        return this.parent.removeWatch(this.id);\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { IWatchMixin } from \"@thi.ng/api\";\nimport { illegalState } from \"@thi.ng/errors\";\nimport { setIn, updateIn } from \"@thi.ng/paths\";\nimport { View } from \"./view\";\n/**\n * Mutable wrapper for an (usually) immutable value. Support for\n * watches.\n */\nlet Atom = class Atom {\n    constructor(val, valid) {\n        if (valid && !valid(val)) {\n            illegalState(\"initial state value did not validate\");\n        }\n        this._value = val;\n        this.valid = valid;\n    }\n    get value() {\n        return this._value;\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    deref() {\n        return this._value;\n    }\n    equiv(o) {\n        return this === o;\n    }\n    reset(val) {\n        const old = this._value;\n        if (this.valid && !this.valid(val)) {\n            return old;\n        }\n        this._value = val;\n        this.notifyWatches(old, val);\n        return val;\n    }\n    resetIn(path, val) {\n        return this.reset(setIn(this._value, path, val));\n    }\n    swap(fn, ...args) {\n        return this.reset(fn.apply(null, [this._value, ...args]));\n    }\n    swapIn(path, fn, ...args) {\n        return this.reset(updateIn(this._value, path, fn, ...args));\n    }\n    // mixin stub\n    /* istanbul ignore next */\n    addWatch(_, __) {\n        return false;\n    }\n    // mixin stub\n    /* istanbul ignore next */\n    removeWatch(_) {\n        return false;\n    }\n    // mixin stub\n    /* istanbul ignore next */\n    notifyWatches(_, __) { }\n    addView(path, tx, lazy = true) {\n        return new View(this, path, tx, lazy);\n    }\n    release() {\n        delete this._watches;\n        delete this._value;\n        return true;\n    }\n};\nAtom = __decorate([\n    IWatchMixin\n], Atom);\nexport { Atom };\n","import { isArray, isFunction } from \"@thi.ng/checks\";\nimport { illegalArgs, illegalArity } from \"@thi.ng/errors\";\nimport { getter, setter } from \"@thi.ng/paths\";\nimport { Atom } from \"./atom\";\nimport { nextID } from \"./idgen\";\nimport { View } from \"./view\";\n/**\n * A cursor provides read/write access to a path location within a\n * nested parent state (Atom or another Cursor). Cursors behave like\n * Atoms for all practical purposes, i.e. support `deref()`, `reset()`,\n * `swap()`, `addWatch()` etc. However, when updating a cursor's value,\n * the parent state will be updated at the cursor's path as well (incl.\n * triggering any watches and/or validators) attached to the parent.\n * Likewise, when the parent state is modified externally, the cursor's\n * value will automatically update as well. The update order of cursor's\n * sharing a common parent is undefined, but can be overridden by\n * extending this class with a custom `notifyWatches()` implementation.\n *\n * If creating multiple cursors w/ a shared parent and each cursor\n * configured with a custom ID (provided via config object to ctor),\n * it's the user's responsibility to ensure the given IDs are unique.\n * Cursors are implemented by attaching a watch to the parent and the ID\n * is used to identify each watch.\n *\n * When using the optional validator predicate (also specified via\n * config object to ctor), the cursor's validator MUST NOT conflict with\n * the one assigned to the parent or else both will go out-of-sync.\n * Therefore, when requiring validation and updating values via cursors\n * it's recommended to only specify validators for leaf-level cursors in\n * the hierarchy.\n */\nexport class Cursor {\n    constructor(...args) {\n        let parent;\n        let lookup;\n        let update;\n        let validate;\n        let opts;\n        let id;\n        switch (args.length) {\n            case 1:\n                opts = args[0];\n                id = opts.id;\n                parent = opts.parent;\n                validate = opts.validate;\n                if (opts.path) {\n                    if (isArray(opts.path) && isFunction(opts.path[0])) {\n                        [lookup, update] = opts.path;\n                    }\n                    else {\n                        lookup = getter(opts.path);\n                        update = setter(opts.path);\n                    }\n                }\n                else {\n                    illegalArgs(\"missing path config\");\n                }\n                break;\n            case 2:\n                parent = args[0];\n                lookup = getter(args[1]);\n                update = setter(args[1]);\n                break;\n            case 3:\n                [parent, lookup, update] = args;\n                break;\n            default:\n                illegalArity(args.length);\n        }\n        this.parent = parent;\n        this.id = id || `cursor-${nextID()}`;\n        this.selfUpdate = false;\n        if (!lookup || !update) {\n            illegalArgs();\n        }\n        this.local = new Atom(lookup(parent.deref()), validate);\n        this.local.addWatch(this.id, (_, prev, curr) => {\n            if (prev !== curr) {\n                this.selfUpdate = true;\n                parent.swap((state) => update(state, curr));\n                this.selfUpdate = false;\n            }\n        });\n        parent.addWatch(this.id, (_, prev, curr) => {\n            if (!this.selfUpdate) {\n                const cval = lookup(curr);\n                if (cval !== lookup(prev)) {\n                    this.local.reset(cval);\n                }\n            }\n        });\n    }\n    get value() {\n        return this.deref();\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    deref() {\n        return this.local.deref();\n    }\n    release() {\n        this.local.release();\n        this.parent.removeWatch(this.id);\n        delete this.local;\n        delete this.parent;\n        return true;\n    }\n    reset(val) {\n        return this.local.reset(val);\n    }\n    resetIn(path, val) {\n        return this.local.resetIn(path, val);\n    }\n    swap(fn, ...args) {\n        return this.local.swap(fn, ...args);\n    }\n    swapIn(path, fn, ...args) {\n        return this.local.swapIn(path, fn, ...args);\n    }\n    addWatch(id, fn) {\n        return this.local.addWatch(id, fn);\n    }\n    removeWatch(id) {\n        return this.local.removeWatch(id);\n    }\n    /* istanbul ignore next */\n    notifyWatches(oldState, newState) {\n        return this.local.notifyWatches(oldState, newState);\n    }\n    addView(path, tx, lazy = true) {\n        return new View(this, path, tx, lazy);\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar History_1;\nimport { INotifyMixin } from \"@thi.ng/api\";\nimport { equiv } from \"@thi.ng/equiv\";\nimport { getIn, setIn, updateIn } from \"@thi.ng/paths\";\nimport { View } from \"./view\";\n/**\n * Undo/redo history stack wrapper for atoms and cursors. Implements\n * `IAtom` interface and so can be used directly in place and delegates\n * to wrapped atom/cursor. Value changes are only recorded in history if\n * `changed` predicate returns truthy value, or else by calling\n * `record()` directly. This class too implements the @thi.ng/api\n * `INotify` interface to support event listeners for `undo()`, `redo()`\n * and `record()`.\n */\nlet History = History_1 = class History {\n    /**\n     * @param state parent state\n     * @param maxLen max size of undo stack\n     * @param changed predicate to determine changed values (default `!equiv(a,b)`)\n     */\n    constructor(state, maxLen = 100, changed) {\n        this.state = state;\n        this.maxLen = maxLen;\n        this.changed = changed || ((a, b) => !equiv(a, b));\n        this.clear();\n    }\n    get value() {\n        return this.deref();\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    canUndo() {\n        return this.history.length > 0;\n    }\n    canRedo() {\n        return this.future.length > 0;\n    }\n    /**\n     * Clears history & future stacks\n     */\n    clear() {\n        this.history = [];\n        this.future = [];\n    }\n    /**\n     * Attempts to re-apply most recent historical value to atom and\n     * returns it if successful (i.e. there's a history). Before the\n     * switch, first records the atom's current value into the future\n     * stack (to enable `redo()` feature). Returns `undefined` if\n     * there's no history.\n     *\n     * If undo was possible, the `History.EVENT_UNDO` event is emitted\n     * after the restoration with both the `prev` and `curr` (restored)\n     * states provided as event value (and object with these two keys).\n     * This allows for additional state handling to be executed, e.g.\n     * application of the \"Command pattern\". See `addListener()` for\n     * registering event listeners.\n     */\n    undo() {\n        if (this.history.length) {\n            const prev = this.state.deref();\n            this.future.push(prev);\n            const curr = this.state.reset(this.history.pop());\n            this.notify({ id: History_1.EVENT_UNDO, value: { prev, curr } });\n            return curr;\n        }\n    }\n    /**\n     * Attempts to re-apply most recent value from future stack to atom\n     * and returns it if successful (i.e. there's a future). Before the\n     * switch, first records the atom's current value into the history\n     * stack (to enable `undo()` feature). Returns `undefined` if\n     * there's no future (so sad!).\n     *\n     * If redo was possible, the `History.EVENT_REDO` event is emitted\n     * after the restoration with both the `prev` and `curr` (restored)\n     * states provided as event value (and object with these two keys).\n     * This allows for additional state handling to be executed, e.g.\n     * application of the \"Command pattern\". See `addListener()` for\n     * registering event listeners.\n     */\n    redo() {\n        if (this.future.length) {\n            const prev = this.state.deref();\n            this.history.push(prev);\n            const curr = this.state.reset(this.future.pop());\n            this.notify({ id: History_1.EVENT_REDO, value: { prev, curr } });\n            return curr;\n        }\n    }\n    /**\n     * `IAtom.reset()` implementation. Delegates to wrapped atom/cursor,\n     * but too applies `changed` predicate to determine if there was a\n     * change and if the previous value should be recorded.\n     *\n     * @param val\n     */\n    reset(val) {\n        const prev = this.state.deref();\n        this.state.reset(val);\n        const changed = this.changed(prev, this.state.deref());\n        if (changed) {\n            this.record(prev);\n        }\n        return val;\n    }\n    resetIn(path, val) {\n        const prev = this.state.deref();\n        const prevV = getIn(prev, path);\n        const curr = setIn(prev, path, val);\n        this.state.reset(curr);\n        this.changed(prevV, getIn(curr, path)) && this.record(prev);\n        return curr;\n    }\n    /**\n     * `IAtom.swap()` implementation. Delegates to wrapped atom/cursor,\n     * but too applies `changed` predicate to determine if there was a\n     * change and if the previous value should be recorded.\n     *\n     * @param val\n     */\n    swap(fn, ...args) {\n        return this.reset(fn(this.state.deref(), ...args));\n    }\n    swapIn(path, fn, ...args) {\n        const prev = this.state.deref();\n        const prevV = getIn(prev, path);\n        const curr = updateIn(this.state.deref(), path, fn, ...args);\n        this.state.reset(curr);\n        this.changed(prevV, getIn(curr, path)) && this.record(prev);\n        return curr;\n    }\n    /**\n     * Records given state in history. This method is only needed when\n     * manually managing snapshots, i.e. when applying multiple swaps on\n     * the wrapped atom directly, but not wanting to create an history\n     * entry for each change. **DO NOT call this explicitly if using\n     * `History.reset()` / `History.swap()` etc.**\n     *\n     * If no `state` is given, uses the wrapped atom's current state\n     * value (user code SHOULD always call without arg).\n     *\n     * If recording succeeded, the `History.EVENT_RECORD` event is\n     * emitted with the recorded state provided as event value.\n     *\n     * @param state\n     */\n    record(state) {\n        const history = this.history;\n        const n = history.length;\n        let ok = true;\n        // check for arg given and not if `state == null` we want to\n        // allow null/undefined as possible values\n        if (!arguments.length) {\n            state = this.state.deref();\n            ok = !n || this.changed(history[n - 1], state);\n        }\n        if (ok) {\n            if (n >= this.maxLen) {\n                history.shift();\n            }\n            history.push(state);\n            this.notify({ id: History_1.EVENT_RECORD, value: state });\n            this.future.length = 0;\n        }\n    }\n    /**\n     * Returns wrapped atom's **current** value.\n     */\n    deref() {\n        return this.state.deref();\n    }\n    /**\n     * `IWatch.addWatch()` implementation. Delegates to wrapped\n     * atom/cursor.\n     *\n     * @param id\n     * @param fn\n     */\n    addWatch(id, fn) {\n        return this.state.addWatch(id, fn);\n    }\n    /**\n     * `IWatch.removeWatch()` implementation. Delegates to wrapped\n     * atom/cursor.\n     *\n     * @param id\n     */\n    removeWatch(id) {\n        return this.state.removeWatch(id);\n    }\n    /**\n     * `IWatch.notifyWatches()` implementation. Delegates to wrapped\n     * atom/cursor.\n     *\n     * @param oldState\n     * @param newState\n     */\n    notifyWatches(oldState, newState) {\n        return this.state.notifyWatches(oldState, newState);\n    }\n    addView(path, tx, lazy = true) {\n        return new View(this, path, tx, lazy);\n    }\n    release() {\n        this.state.release();\n        delete this.state;\n        return true;\n    }\n    addListener(_, __, ___) {\n        return false;\n    }\n    removeListener(_, __, ___) {\n        return false;\n    }\n    notify(_) { }\n};\nHistory.EVENT_UNDO = \"undo\";\nHistory.EVENT_REDO = \"redo\";\nHistory.EVENT_RECORD = \"record\";\nHistory = History_1 = __decorate([\n    INotifyMixin\n], History);\nexport { History };\n","import { assert } from \"@thi.ng/api\";\nimport { setIn, updateIn } from \"@thi.ng/paths\";\nimport { nextID } from \"./idgen\";\nimport { View } from \"./view\";\nexport class Transacted {\n    constructor(parent) {\n        this.parent = parent;\n        this.current = undefined;\n        this.isActive = false;\n        this.id = `tx${nextID()}-`;\n    }\n    get value() {\n        return this.deref();\n    }\n    set value(val) {\n        this.reset(val);\n    }\n    get isTransaction() {\n        return this.isActive;\n    }\n    deref() {\n        return this.isActive ? this.current : this.parent.deref();\n    }\n    equiv(o) {\n        return this === o;\n    }\n    reset(val) {\n        this.ensureTx();\n        this.current = val;\n        return val;\n    }\n    resetIn(path, val) {\n        this.ensureTx();\n        return this.reset(setIn(this.current, path, val));\n    }\n    swap(fn, ...args) {\n        this.ensureTx();\n        return this.reset(fn.apply(null, [this.current, ...args]));\n    }\n    swapIn(path, fn, ...args) {\n        this.ensureTx();\n        return this.reset(updateIn(this.current, path, fn, ...args));\n    }\n    begin() {\n        assert(!this.isActive, \"transaction already started\");\n        this.current = this.parent.deref();\n        this.isActive = true;\n    }\n    commit() {\n        this.ensureTx();\n        const val = this.current;\n        this.parent.reset(this.current);\n        this.isActive = false;\n        this.current = undefined;\n        return val;\n    }\n    cancel() {\n        this.ensureTx();\n        this.isActive = false;\n        this.current = undefined;\n    }\n    addWatch(id, watch) {\n        return this.parent.addWatch(this.id + id, (_, prev, curr) => watch(id, prev, curr));\n    }\n    removeWatch(id) {\n        return this.parent.removeWatch(this.id + id);\n    }\n    notifyWatches(old, curr) {\n        this.parent.notifyWatches(old, curr);\n    }\n    addView(path, tx, lazy = true) {\n        return new View(this, path, tx, lazy);\n    }\n    release() {\n        delete this.parent;\n        delete this.current;\n        delete this.isActive;\n        delete this._watches;\n        return true;\n    }\n    ensureTx() {\n        assert(this.isActive, \"no active transaction\");\n    }\n}\n","export * from \"./atom\";\nexport * from \"./cursor\";\nexport * from \"./history\";\nexport * from \"./transacted\";\nexport * from \"./view\";\n","import { View } from \"@thi.ng/atom\";\nimport { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Similar to {@link fromAtom}, but creates an eager derived view for a\n * nested value in atom / cursor and yields stream of its value changes.\n *\n * @remarks\n * Views are readonly and more lightweight versions of\n * {@link @thi.ng/atom#Cursor | cursors}. The view checks for value\n * changes with given `equiv` predicate ({@link @thi.ng/equiv#equiv} by\n * default). If the predicate returns a falsy result, the new value is\n * emitted on the stream. The first value emitted is always the\n * (possibly transformed) current value at the stream's start time (i.e.\n * when the first subscriber attaches).\n *\n * If the `tx` option is given, the raw value is first passed to this\n * transformer function and its result emitted on the stream instead.\n *\n * When the stream is cancelled the view is destroyed as well.\n *\n * @example\n * ```ts\n * db = new Atom({ a: 1, b: { c: 2 }});\n *\n * fromView(\n *   db,\n *   {\n *     path: \"b.c\",\n *     tx: (x) => x != null ? x : \"n/a\"\n * }).subscribe(trace(\"view:\"))\n * // view: 2\n *\n * db.swapIn(\"b.c\", (x: number) => x + 1);\n * // view: 3\n *\n * db.reset({ a: 10 });\n * // view: n/a\n * ```\n *\n * @param atom\n * @param opts\n */\nexport const fromView = (atom, opts) => {\n    opts = optsWithID(\"view\", opts);\n    return new Stream((stream) => {\n        let isActive = true;\n        const tx = opts.tx;\n        const view = new View(atom, opts.path, tx\n            ? (x) => isActive && ((x = tx(x)), stream.next(x), x)\n            : (x) => isActive && (stream.next(x), x), false, opts.equiv);\n        return () => {\n            isActive = false;\n            view.release();\n        };\n    });\n};\n","import { LOGGER } from \"../api\";\nimport { Stream } from \"../stream\";\nimport { optsWithID } from \"../utils/idgen\";\nimport { makeWorker } from \"../utils/worker\";\n/**\n * Returns a {@link Stream} which adds `message` and `error` event\n * listeners to given `worker` and then emits received values.\n *\n * @remarks\n * If `terminate` is true (default), the worker will be terminated when\n * the stream is being closed (either directly or indirectly, i.e. if\n * the user called {@link ISubscriber.done} on the stream or the last\n * child subscription has unsubscribed, depending on\n * {@link CommonOpts | config options}).\n *\n * As with {@link postWorker}, the `worker` can be an existing `Worker`\n * instance, a JS source code `Blob` or an URL string. In the latter two\n * cases, a worker is created automatically.\n *\n * @example\n * ```ts\n *\n * ```\n *\n * @param worker\n * @param opts\n */\nexport const fromWorker = (worker, opts) => {\n    const _worker = makeWorker(worker);\n    opts = optsWithID(\"worker\", opts);\n    return new Stream((stream) => {\n        const ml = (e) => {\n            stream.next(e.data);\n        };\n        const el = (e) => {\n            stream.error(e.data);\n        };\n        _worker.addEventListener(\"message\", ml);\n        _worker.addEventListener(\"error\", el);\n        return () => {\n            _worker.removeEventListener(\"message\", ml);\n            _worker.removeEventListener(\"error\", el);\n            if (opts.terminate !== false) {\n                LOGGER.info(\"terminating worker\", _worker);\n                _worker.terminate();\n            }\n        };\n    }, opts);\n};\n","import { PubSub } from \"../pubsub\";\n/**\n * Returns a {@link PubSub} using given predicate `pred` as boolean\n * {@link PubSubOpts.topic | topic function} and `truthy` & `falsey` as\n * subscribers for their respective values.\n *\n * @remarks\n * If `a` or `b` need to be subscribed to directly, then `a` / `b` MUST\n * be first created as `Subscription` (if not already) and a reference\n * kept prior to calling `bisect()`.\n *\n * @example\n * ```ts\n * fromIterable([1, 2, 3, 4]).subscribe(\n *   bisect(\n *     (x) => !!(x & 1),\n *     trace(\"odd\"),\n *     trace(\"even\")\n *   )\n * );\n * // odd 1\n * // even 2\n * // odd 3\n * // even 4\n * // odd done\n * // even done\n * ```\n *\n * @example\n * ```ts\n * const odd = subscription();\n * const even = subscription();\n * odd.subscribe(trace(\"odd\"));\n * odd.subscribe(trace(\"odd x10\"), map((x) => x * 10));\n * even.subscribe(trace(\"even\"));\n *\n * fromIterable([1, 2, 3, 4]).subscribe(\n *     bisect((x) => !!(x & 1), odd, even)\n * );\n * ```\n *\n * @param pred predicate function\n * @param truthy subscription for truthy branch\n * @param falsy subscription for falsy branch\n */\nexport const bisect = (pred, truthy, falsy) => {\n    const sub = new PubSub({ topic: pred });\n    truthy && sub.subscribeTopic(true, truthy);\n    falsy && sub.subscribeTopic(false, falsy);\n    return sub;\n};\n","import { isTransferable } from \"@thi.ng/checks\";\nimport { isTypedArray } from \"@thi.ng/checks\";\nimport { LOGGER } from \"../api\";\nimport { makeWorker } from \"../utils/worker\";\n/**\n * Creates a {@link ISubscriber | subscriber} which forwards received\n * values to given worker.\n *\n * @remarks\n * The `worker` can be an existing `Worker` instance, a JS source code\n * `Blob` or an URL string. In the latter two cases, a worker is created\n * automatically. If `transfer` is true, the received values will be\n * marked as *transferrable* and the host app loses all access\n * permissions to these marked values. See `Worker.postMessage()` for\n * details.\n *\n * If `terminate` is set to a positive number, then the worker will be\n * automatically terminated after the stated number of milliseconds\n * since the parent subscription is {@link ISubscriber.done}.\n *\n * @example\n * ```ts\n * // worker source code\n * src = `self.onmessage = (e) => console.log(\"worker\", e.data);`;\n *\n * a = stream();\n * a.subscribe(\n *   postWorker(src, { type: \"application/javascript\" }))\n * );\n *\n * a.next(42)\n * // worker 42\n * ```\n *\n * @param worker\n * @param transfer\n * @param terminate worker termination delay (ms)\n */\nexport const postWorker = (worker, transfer = false, terminate = 0) => {\n    const _worker = makeWorker(worker);\n    return {\n        next(x) {\n            if (x instanceof Promise) {\n                x.then((y) => this.next(y));\n                return;\n            }\n            let tx;\n            if (transfer) {\n                const ta = isTypedArray(x);\n                if (ta || isTransferable(x)) {\n                    tx = [ta ? x.buffer : x];\n                }\n            }\n            _worker.postMessage(x, tx || []);\n        },\n        done() {\n            if (terminate > 0) {\n                setTimeout(() => {\n                    LOGGER.info(\"terminating worker...\");\n                    _worker.terminate();\n                }, terminate);\n            }\n        }\n    };\n};\n","import { LOGGER } from \"../api\";\nimport { Subscription } from \"../subscription\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Creates a {@link Subscription} which receives promises, buffers them\n * and then passes their resolved values downstream.\n *\n * @remarks\n * If the optional `fail` handler is provided, it'll be called with the\n * error of each failed promise. If none is provided, the sub's\n * {@link ISubscriber.error} handler is called, which then stops the sub\n * from receiving further values.\n *\n * @example\n * ```ts\n * fromIterable([1, 2, 3], 100)\n *   .transform(tx.delayed(1000))\n *   .subscribe(resolve())\n *   .subscribe(trace(\"result\"))\n * // result 1\n * // result 2\n * // result 3\n * // result done\n * ```\n *\n * @param opts\n */\nexport const resolve = (opts) => new Resolver(opts);\nexport class Resolver extends Subscription {\n    constructor(opts = {}) {\n        super(undefined, optsWithID(\"resolve\"));\n        this.outstanding = 0;\n        this.fail = opts.fail;\n    }\n    next(x) {\n        this.outstanding++;\n        x.then((y) => {\n            if (this.state < 2 /* DONE */) {\n                this.dispatch(y);\n                if (--this.outstanding === 0) {\n                    this.done();\n                }\n            }\n            else {\n                LOGGER.warn(`resolved value in state ${this.state} (${x})`);\n            }\n        }, (e) => {\n            if (this.fail) {\n                this.fail(e);\n            }\n            else {\n                this.error(e);\n            }\n        });\n    }\n    done() {\n        if (this.parent.getState() === 2 /* DONE */ && this.outstanding === 0) {\n            super.done();\n        }\n    }\n}\n","import { Subscription } from \"../subscription\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns a {@link Subscription} which buffers values from `src` until\n * side chain fires, then emits buffer (unless empty) and repeats\n * process until either input is done.\n *\n * @remarks\n * By default, the values read from the side chain are ignored (i.e.\n * only their timing is used), however the `pred`icate option can be\n * used to only trigger for specific values / conditions.\n *\n * @example\n * ```t\n * // merge various event streams\n * events = merge([\n *     fromEvent(document,\"mousemove\"),\n *     fromEvent(document,\"mousedown\"),\n *     fromEvent(document,\"mouseup\")\n * ]);\n *\n * // queue event processing to only execute during the\n * // requestAnimationFrame cycle (RAF)\n * events.subscribe(sidechainPartition(fromRAF())).subscribe(trace())\n * ```\n *\n * @param side\n * @param opts\n */\nexport const sidechainPartition = (side, opts) => new SidechainPartition(side, opts);\nexport class SidechainPartition extends Subscription {\n    constructor(side, opts) {\n        opts = optsWithID(\"sidepart\", opts);\n        super(undefined, opts);\n        this.buf = [];\n        const pred = opts.pred || (() => true);\n        const $this = this;\n        this.sideSub = side.subscribe({\n            next(x) {\n                if ($this.buf.length && pred(x)) {\n                    $this.dispatch($this.buf);\n                    $this.buf = [];\n                }\n            },\n            done() {\n                if ($this.buf.length) {\n                    $this.dispatch($this.buf);\n                }\n                $this.done();\n                delete $this.buf;\n            }\n        });\n    }\n    unsubscribe(sub) {\n        const res = super.unsubscribe(sub);\n        if (!sub || !this.subs.length) {\n            this.sideSub.unsubscribe();\n        }\n        return res;\n    }\n    next(x) {\n        if (this.state < 2 /* DONE */) {\n            this.buf.push(x);\n        }\n    }\n    done() {\n        this.sideSub.unsubscribe();\n        super.done();\n    }\n}\n","import { Subscription } from \"../subscription\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns {@link Subscription} which filters values from input based on\n * values received from side chain.\n *\n * @remarks\n * By default, the value read from the side chain is ignored (i.e. only\n * their timing is used), however the `pred`icate option can be used to\n * only trigger for specific values/conditions. Every time the predicate\n * fn returns true, the filter will be toggled on/off. Whilst switched\n * off, no input values will be forwarded.\n *\n * @example\n * ```ts\n * // use slower interval stream to toggle main stream on/off\n * fromInterval(500)\n *   .subscribe(sidechainToggle(fromInterval(1000)))\n *   .subscribe(trace());\n * // 0\n * // 3\n * // 4\n * // 7\n * // 8\n * ...\n * ```\n *\n * @param side\n * @param opts\n */\nexport const sidechainToggle = (side, opts) => new SidechainToggle(side, opts);\nexport class SidechainToggle extends Subscription {\n    constructor(side, opts) {\n        opts = optsWithID(\"sidetoggle\", opts);\n        super(undefined, opts);\n        this.isActive = !!opts.initial;\n        const pred = opts.pred || (() => true);\n        const $this = this;\n        this.sideSub = side.subscribe({\n            next(x) {\n                if (pred(x)) {\n                    $this.isActive = !$this.isActive;\n                }\n            },\n            done() {\n                $this.done();\n            }\n        });\n    }\n    unsubscribe(sub) {\n        const res = super.unsubscribe(sub);\n        if (!sub || !this.subs.length) {\n            this.sideSub.unsubscribe();\n        }\n        return res;\n    }\n    next(x) {\n        if (this.isActive) {\n            super.next(x);\n        }\n    }\n    done() {\n        super.done();\n        this.sideSub.unsubscribe();\n    }\n}\n","import { Subscription } from \"../subscription\";\nimport { optsWithID } from \"../utils/idgen\";\n/**\n * Returns a {@link Subscription} that calls the\n * {@link ISubscriber.error} handlers of all child subscriptions with an\n * arbitrary error object after a given time.\n *\n * @remarks\n * If no `error` is given, uses a new `Error` instance by default. If\n * `resetTimeout` is false (default), the error is emitted regardless of\n * any received values in the meantime. However, if `true`, the timeout\n * resets with each received value and then only triggers once the time\n * interval since the last value has exceeded.\n *\n * @param timeoutMs timeout period in milliseconds\n * @param opts\n */\nexport const timeout = (timeoutMs, opts) => new Timeout(timeoutMs, opts);\nclass Timeout extends Subscription {\n    constructor(timeoutMs, opts) {\n        opts = optsWithID(\"timeout\", opts);\n        super(undefined, opts);\n        this.timeoutMs = timeoutMs;\n        this.errorObj = opts.error;\n        this.resetTimeout = opts.reset === true;\n        this.reset();\n    }\n    next(x) {\n        if (this.resetTimeout) {\n            clearTimeout(this.timeoutId);\n            this.reset();\n        }\n        super.next(x);\n    }\n    reset() {\n        this.timeoutId = setTimeout(() => {\n            if (this.state < 2 /* DONE */) {\n                this.error(this.errorObj ||\n                    new Error(`Timeout stream \"${this.id}\" after ${this.timeoutMs} ms`));\n            }\n        }, this.timeoutMs);\n    }\n    cleanup() {\n        clearTimeout(this.timeoutId);\n        super.cleanup();\n    }\n}\n","/**\n * Helper {@link ISubscriber} for inspection / debugging purposes.\n * Simply logs received values to console, optionally with given\n * `prefix`.\n *\n * @param prefix\n */\nexport const trace = (prefix) => ({\n    next(x) {\n        prefix ? console.log(prefix, x) : console.log(x);\n    },\n    done() {\n        prefix ? console.log(prefix, \"done\") : console.log(\"done\");\n    },\n    error(e) {\n        prefix ? console.log(prefix, \"error\", e) : console.log(\"error\", e);\n    }\n});\n","import { isReduced } from \"@thi.ng/transducers\";\n/**\n * Returns a promise which subscribes to given input and transforms\n * incoming values using given transducer `xform` and reducer `rfn`.\n *\n * @remarks\n * Once the input or the reducer is done, the promise will resolve with\n * the final reduced result (or fail with error).\n *\n * @example\n * ```ts\n * transduce(\n *   fromIterable(tx.range(10)),\n *   tx.map((x) => x * 10),\n *   tx.add()\n * ).then((x) => console.log(\"result\", x))\n *\n * // result 450\n * ```\n *\n * @param src\n * @param xform\n * @param rfn\n * @param init\n */\nexport const transduce = (src, xform, rfn, init) => {\n    let acc = init !== undefined ? init : rfn[0]();\n    let sub;\n    return new Promise((resolve, reject) => {\n        sub = src.subscribe({\n            next(x) {\n                const _acc = rfn[2](acc, x);\n                if (isReduced(_acc)) {\n                    resolve(_acc.deref());\n                }\n                else {\n                    acc = _acc;\n                }\n            },\n            done() {\n                resolve(acc);\n            },\n            error(e) {\n                reject(e);\n            }\n        }, xform);\n    }).then((fulfilled) => {\n        sub.unsubscribe();\n        return fulfilled;\n    }, (rejected) => {\n        sub.unsubscribe();\n        throw rejected;\n    });\n};\n","export * from \"./api\";\nexport * from \"./forkjoin\";\nexport * from \"./metastream\";\nexport * from \"./pubsub\";\nexport * from \"./stream\";\nexport * from \"./stream-merge\";\nexport * from \"./stream-sync\";\nexport * from \"./subscription\";\nexport * from \"./trigger\";\nexport * from \"./tween\";\nexport * from \"./from/atom\";\nexport * from \"./from/event\";\nexport * from \"./from/interval\";\nexport * from \"./from/iterable\";\nexport * from \"./from/promise\";\nexport * from \"./from/promises\";\nexport * from \"./from/raf\";\nexport * from \"./from/view\";\nexport * from \"./from/worker\";\nexport * from \"./subs/bisect\";\nexport * from \"./subs/post-worker\";\nexport * from \"./subs/resolve\";\nexport * from \"./subs/sidechain-partition\";\nexport * from \"./subs/sidechain-toggle\";\nexport * from \"./subs/timeout\";\nexport * from \"./subs/trace\";\nexport * from \"./subs/transduce\";\nexport * from \"./subs/tunnel\";\nexport * from \"./utils/idgen\";\nexport * from \"./utils/worker\";\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","import qs from \"querystring\"\r\n\r\nlet hrefs = [\r\n  \"https://api.census.gov/data.html\",\r\n  \"https://api.census.gov/data/2017/acs/acs1?query=some%20text\",\r\n  \"https://census.gov/developers/apis#getting-started\",\r\n  \"https://census.gov/developers/apis/?slash=true\",\r\n  \"https://www.census.gov/developers/apis/?slash=true#focus\",\r\n  \"https://www.census.gov/developers/apis/#focus?slash=true\",\r\n  \"https://www.census.gov/developers/apis#focus?slash=false\",\r\n  \"http://www.example.com/path/to/resource?query=text&search=find+me#focus-heading\"\r\n]\r\n\r\nconst log = console.log\r\n\r\nexport const parse_href = href => {\r\n  let parts = href.split(/(?=\\?)|(?=#)/g)\r\n  let path_str = parts[0]\r\n  let query_str = parts.filter(part => part.slice(0, 1) === \"?\")[0] || \"\"\r\n  let hash_str = parts.filter(part => part.slice(0, 1) === \"#\")[0] || \"\"\r\n  let full_path = path_str.split(\"/\").filter(x => x !== \"\")\r\n  let domain = full_path[1].split(\".\")\r\n  let path = full_path.slice(2)\r\n  let query = qs.parse(query_str.slice(1))\r\n  let hash = hash_str.slice(1)\r\n  return { path, query, hash, domain }\r\n}\r\n\r\nlet all = hrefs.map(x => parse_href(x)) //?\r\n\r\nlet test = all.slice(-1)[0]\r\n\r\nqs.encode(test.query).replace(\"%20\", \"+\") //?\r\n","import { EquivMap } from \"@thi.ng/associative\"\r\nimport { stream, fromDOMEvent, trace, merge } from \"@thi.ng/rstream\"\r\nimport * as xf from \"@thi.ng/transducers\"\r\nimport qs from \"querystring\"\r\nimport { parse_href } from \"./parse-href\"\r\n\r\n//  FRIVOLOUS\r\n//           d8                      d8\r\n//   d88~\\ _d88__   /~~~8e  888-~\\ _d88__\r\n//  C888    888         88b 888     888\r\n//   Y88b   888    e88~-888 888     888\r\n//    888D  888   C888  888 888     888\r\n//  \\_88P   \"88_/  \"88_-888 888     \"88_/\r\n//\r\n//\r\n\r\nlet link1 = Object.assign(document.createElement(\"a\"), {\r\n  href: \"/todos\",\r\n  innerText: \" todos \"\r\n})\r\nlet link2 = Object.assign(document.createElement(\"a\"), {\r\n  href: \"/users\",\r\n  innerText: \" users \"\r\n})\r\nlet link3 = Object.assign(document.createElement(\"a\"), {\r\n  href: \"/users/2\",\r\n  innerText: \" user 2\"\r\n})\r\nlet link4 = Object.assign(document.createElement(\"a\"), {\r\n  href: \"/todos/2\",\r\n  innerText: \" todos 2\"\r\n})\r\ndocument.body.appendChild(link1)\r\ndocument.body.appendChild(link2)\r\ndocument.body.appendChild(link3)\r\ndocument.body.appendChild(link4)\r\n\r\n//  TODO: change to a component\r\n\r\nconst log = console.log\r\nlog(\"JS Loaded!\")\r\n\r\n// log(\"routing once\")\r\n// route({ state: \"01\" }, \"title: 01\", \"/title\")\r\n// log(\"routing twice\")\r\n// route({ state: \"03\" }, \"title: 02\", \"/rand\")\r\n\r\n//\r\n//                           888\r\n//   e88~~8e  888-~88e  e88~\\888\r\n//  d888  88b 888  888 d888  888\r\n//  8888__888 888  888 8888  888\r\n//  Y888    , 888  888 Y888  888\r\n//   \"88___/  888  888  \"88_/888\r\n//\r\n//  FRIVOLOUS\r\n\r\n// exports two things, a route_stream and a route function that can push events to the route_stream\r\n\r\nlet preloadForPage = async (query, path, b) => {\r\n  let base = \"https://jsonplaceholder.typicode.com/\"\r\n  let data = b\r\n    ? await fetch(`${base}${path}/${b}`).then(r => r.json())\r\n    : await fetch(`${base}${path}/`).then(r => r.json())\r\n  let el = document.createElement(\"pre\")\r\n  el.innerText = JSON.stringify(data, null, 2)\r\n  return el\r\n}\r\n\r\nconst pushHistory = (...args) => (log(args), history.pushState(...args))\r\n\r\n// dispatch should take config data and then be \"activated\"\r\nlet config = config => async href => {\r\n  let route_obj = parse_href(href)\r\n  // log(route_obj)\r\n  let { domain, hash, path, query } = route_obj\r\n  let [a, b, c, d] = path\r\n  let el =\r\n    (await new EquivMap([\r\n      [{ ...parse_href(href), path: [\"todos\"] }, preloadForPage(query, \"todos\", null)],\r\n      [{ ...parse_href(href), path: [\"todos\", b] }, preloadForPage(query, \"todos\", b)],\r\n      [{ ...parse_href(href), path: [\"users\"] }, preloadForPage(query, \"users\", null)],\r\n      [{ ...parse_href(href), path: [\"users\", b] }, preloadForPage(query, \"users\", b)]\r\n    ]).get(route_obj)) || \"404\"\r\n  // this would be an hdom + spec -> page\r\n  // log(el)\r\n  if (el !== \"404\") document.body.appendChild(el)\r\n  // pushHistory({}, null, href) // <- \r\n}\r\n\r\n// let router_config = new EquivMap([\r\n//   [[\"users\"], { preload: \"https://jsonplaceholder.typicode.com/users\", then: \"\" }],\r\n//   [\r\n//     [\"users\", \"?\"],\r\n//     [{ preload: \"https://jsonplaceholder.typicode.com/users\", with: \"?\" }, { then: \"\" }]\r\n//   ]\r\n// ])\r\n\r\n//\r\n//                                                 d8\r\n//   e88~~8e  Y88b  /  888-~88e   e88~-_  888-~\\ _d88__  d88~\\\r\n//  d888  88b  Y88b/   888  888b d888   i 888     888   C888\r\n//  8888__888   Y88b   888  8888 8888   | 888     888    Y88b\r\n//  Y888    ,   /Y88b  888  888P Y888   ' 888     888     888D\r\n//   \"88___/   /  Y88b 888-_88\"   \"88_-~  888     \"88_/ \\_88P\r\n//                     888\r\n//\r\n\r\n// navigation bar\r\nconst route_stream = fromDOMEvent(window, \"popstate\", \"route-stream\")\r\nconst load_stream = fromDOMEvent(window, \"load\", \"load-stream\")\r\n\r\nconst nav_stream_DOM = merge({ src: [route_stream, load_stream] })\r\n\r\n// link clicking\r\nlet href_handler = e => {\r\n  e.preventDefault()\r\n  if (window.location.href === e.target.href) {\r\n    return\r\n  }\r\n\r\n  route_stream.next({\r\n    target: {\r\n      location: e.target\r\n    }\r\n  })\r\n  pushHistory({}, null, e.target.href)\r\n}\r\n\r\n// just an example use\r\ndocument.querySelectorAll(\"a\").forEach(a => a.addEventListener(\"click\", href_handler))\r\n\r\nlet dispatch = config()\r\nnav_stream_DOM.subscribe(\r\n  // trace(\"route\"),\r\n  xf.map(x => dispatch(x.target.location.href))\r\n)\r\n\r\n/* TBD/TOD:\r\n- nav_stream_SRV\r\n- memoization/caching strategy\r\n- async support in config\r\n- decouple all the things\r\n\r\n*/\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}