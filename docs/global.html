<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="command$"><span class="type-signature">(constant) </span>command$<span class="type-signature"></span></h4>




<div class="description">
    <h1><code>command$</code> stream</h1>
<p><code>3&gt;-</code>: stream (if single event object)</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="dispatchers_streams.js.html">dispatchers/streams.js</a>, <a href="dispatchers_streams.js.html#line95">line 95</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="dispatcher"><span class="type-signature">(constant) </span>dispatcher<span class="type-signature"></span></h4>




<div class="description">
    <h1>Task Dispatcher</h1>
<p>Async <code>reduce</code> function</p>
<h2>TL;DR:</h2>
<p>Handles any state updates and/or other effects which
require <em>ordered</em> choreography</p>
<h2>Synopsis:</h2>
<ul>
<li>very simple async finite state machine.</li>
<li>Commands are composed in-situ in userland (Ad hoc)</li>
<li>spools a collection of Commands as a Task</li>
<li>resolves any promises contained within a Command</li>
<li>passes an accumulator (STATE) to subsequent Commands in
a Task</li>
</ul>
<h2>Type checks on function signatures</h2>
<p>There are two valid forms for Task entries:</p>
<ol>
<li>a Unary function: alias/refer to sub Tasks</li>
<li>A Command object: dispatch to Command stream</li>
</ol>
<h3>Recognized Keys</h3>
<p>There are 5 recognized keys for a Command object:</p>
<ul>
<li><code>sub$</code>: String</li>
<li><code>args</code>: Any üßê</li>
<li><code>path</code>: Array | String | Undefined</li>
<li><code>reso</code>: Function | Undefined</li>
<li><code>erro</code>: Function | Undefined</li>
</ul>
<p><code>args</code> key = primary control structure</p>
<ul>
<li>non-function vals send the Command as-is</li>
<li><code>(0)=&gt;</code> nullary fns send the <em>args</em> as a Command</li>
<li><code>(1)=&gt;</code> unary fns are passed the STATE and called</li>
<li>Promises returned from fns are resolved</li>
<li>new vals are merged with STATE (dupe keys overwrite)</li>
</ul>
<h4>Promise-specific keys:</h4>
<p>if <code>args</code> is/returns a Promise, these keys are used:
<code>reso</code> key = handle resolved promises (‚ö† binary)</p>
<ul>
<li><code>(2)=&gt;</code> MUST be a binary <code>(STATE, resolved Promise) =&gt;</code>
<code>erro</code> key = handle rejected promises (‚ö† binary)</li>
<li><code>(2)=&gt;</code> MUST be binary <code>(STATE, Promise rejection) =&gt;</code></li>
</ul>
<h2>Subtasks:</h2>
<p>Subtasks are the way you compose tasks. Insert a Task and
the dispatcher will unpack it in place
(super -&gt; sub order preserved)
A Subtask must be defined as a unary function that
accepts a state object and returns a Task, e.g.:</p>
<pre class="prettyprint source lang-js"><code>// pseudo:
let someSubtask = state => [{C}, {C}, (S)=>[...], ...]
// { C: Command }
// ( S: STATE ) => [...]: Subtask
</code></pre>
<h2>Caveat:</h2>
<p>The dispatcher preserves execution order of Commands
within a Task, but doesn't do anything to prevent
Commands sent directly to the Command stream - while the
Task is spooling - from being executed during the
execution of the Commands in the Task queue.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="dispatchers_streams.js.html">dispatchers/streams.js</a>, <a href="dispatchers_streams.js.html#line199">line 199</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="hurl_dispatch"><span class="type-signature">(constant) </span>hurl_dispatch<span class="type-signature"></span></h4>




<div class="description">
    <p>preconfigured dispatch from hurl_data_stream
this is an event handler that subscribes to the
<code>hurl_data_stream</code> internally and applies a user-defined callback <code>fn</code>
to every emission of data from the stream</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="hurl-router.js.html">hurl-router.js</a>, <a href="hurl-router.js.html#line31">line 31</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="hurl_router"><span class="type-signature">(constant) </span>hurl_router<span class="type-signature"></span></h4>




<div class="description">
    <p>Takes a routing configuration function and returns a router that
recieves a stream of incomming URLs/ and applies the configuration
to each one. Once the data is resolved for the URL, dispatches to a
completion stream to actually triggers a change in the browser router</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="hurl-router.js.html">hurl-router.js</a>, <a href="hurl-router.js.html#line67">line 67</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="parse_href"><span class="type-signature">(constant) </span>parse_href<span class="type-signature"></span></h4>




<div class="description">
    <h1>HREF/URL Parser</h1>
<p>Takes an href (full or relative) and pulls out the various
components to be used for instrumentation of various
high-level event handling.</p>
<h2>Examples:</h2>
<pre class="prettyprint source lang-js"><code>
parse_href(&quot;http://localhost:1234/about?get=some#today&quot;)
res = {
  URL: &quot;http://localhost:1234/about?get=some#today&quot;,
  subdomain: [],
  domain: [&quot;localhost:1234&quot;],
  path: [&quot;about&quot;],
  query: { get: &quot;some&quot; },
  hash: &quot;today&quot;
}

parse_href(&quot;https://github.com/thi-ng/umbrella/#blog-posts&quot;)
res = {
  URL: 'https://github.com/thi-ng/umbrella/#blog-posts',
  subdomain: [],
  domain: [&quot;github&quot;, &quot;com&quot;],
  path: [&quot;thi-ng&quot;, &quot;umbrella&quot;],
  query: {},
  hash: &quot;blog-posts&quot;
}

parse_href(&quot;https://very-long-sub.dom.cloud.eu/site/my/happy/&quot;)
res = {
  URL: 'https://very-long-sub.dom.cloud.eu/site/my/happy/',
  subdomain: [&quot;very-long-sub&quot;, &quot;dom&quot;],
  domain: [&quot;cloud&quot;, &quot;eu&quot;],
  path: [&quot;site&quot;, &quot;my&quot;, &quot;happy&quot;],
  query: {},
  hash: &quot;&quot;
}

parse_href(&quot;https://api.census.gov/data?get=NAME&in=state:01&in=county:*&quot;)
res = {
  URL: &quot;https://api.census.gov/data?get=NAME&in=state:01&in=county:*&quot;,
  subdomain: [&quot;api&quot;],
  domain: [&quot;census&quot;, &quot;gov&quot;],
  path: [&quot;data&quot;],
  query: { get: &quot;NAME&quot;, in: [&quot;state:01&quot;, &quot;county:*&quot;] },
  hash: &quot;&quot;
}

parse_href(&quot;/data?get=NAME&in=state#indeed&quot;)
res = {
  URL: &quot;/data?get=NAME&in=state#indeed&quot;,
  subdomain: [],
  domain: [],
  path: [&quot;data&quot;],
  query: { get: &quot;NAME&quot;, in: &quot;state&quot; },
  hash: &quot;indeed&quot;
}
</code></pre>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="parse_href.js.html">parse_href.js</a>, <a href="parse_href.js.html#line79">line 79</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="register_router_BOM"><span class="type-signature">(constant) </span>register_router_BOM<span class="type-signature"></span></h4>




<div class="description">
    <p>takes a <code>hurl_router</code> (configured routing fn) and applies the router on
every emission of the browser navigation stream (a stream of nav events)
the returned dispatching function allows the user to hook into the data
emitted as per her router configuration and deploy some function thereupon</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="hurl.js.html">hurl.js</a>, <a href="hurl.js.html#line67">line 67</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="run$"><span class="type-signature">(constant) </span>run$<span class="type-signature"></span></h4>




<div class="description">
    <h1>Stream Architecture:</h1>
<p><code>run$</code> is the primary event stream exposed to the user
via the <code>ctx</code> object injected into every <code>hdom</code> component
the command stream is the only way the user changes
anything in <code>hurl</code></p>
<h2>Marble Diagram</h2>
<pre class="prettyprint source"><code>0>- |ps|---c-------c--[ a, b, a ]-a----c---> : run$
1>- |ps|---1-------1------------0-1----1---> : pubsub
2>- ---|tp|xf|-!-!------------!-?----------> : task$
3>- ---|tp|----*-*-*----------*---*----*---> : command$
4>- ------|ps|-a-b-c----------a---a----c---> : pubsub
Handlers:
a>- ------|ps|-*------------*-----*-------->
b>- ------|ps|---*------------------------->
c>- ------|ps|-----*-------------------*--->
</code></pre>
<h2>Streams</h2>
<ul>
<li><code>0&gt;-</code>: <code>ctx.run.next(x)</code> calls</li>
<li><code>1&gt;-</code>: <code>pubsub({ topic: x =&gt; x.length === 0 })</code></li>
<li><code>2&gt;-</code>: <code>false</code> -&gt; <code>task$</code>: Task Dispatcher</li>
<li><code>3&gt;-</code>: <code>true</code> -&gt; <code>command$</code>: Commands stream</li>
<li><code>4&gt;-</code>: <code>pubsub({ topic: x =&gt; x.sub })</code></li>
</ul>
<h2>Handlers</h2>
<p><code>4&gt;-</code> this is the stream to which the user (and framework)
attaches handlers. Handlers receive events they subscribe
to as topics based on a <code>sub$</code> key in a Command object.</p>
<h3>Handlers (framework provided):</h3>
<ul>
<li>&quot;state&quot;: Global state mutations</li>
<li>&quot;route&quot;: Routing</li>
<li>&quot;FLIP&quot; : F.L.I.P. animations</li>
</ul>
<p>üìå TODO:</p>
<ul>
<li>add <code>beforeunload</code> event handler within #4 (orphan):
SEE https://youtu.be/QQukWZcIptM</li>
<li>enable ctx.run.cancel() via external or internal events
(e.g., popstate / { sub$:  &quot;cancel&quot; })</li>
</ul>
<h2><code>run$</code> stream</h2>
<ul>
<li><code>1&gt;-</code>: root event stream (exposed via <code>ctx</code>)</li>
<li>bisects (based on whether or not the payload is an array)
to <em>either</em>:</li>
</ul>
<h3><code>task$</code> stream</h3>
<ul>
<li><code>2&gt;-</code>: stream (if array of event objects)</li>
</ul>
<h3><code>command$</code> stream</h3>
<ul>
<li><code>3&gt;-</code>: stream (if single event object)
(see <code>dispatcher</code> for more details on #2 below)</li>
</ul>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="dispatchers_streams.js.html">dispatchers/streams.js</a>, <a href="dispatchers_streams.js.html#line87">line 87</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="task$"><span class="type-signature">(constant) </span>task$<span class="type-signature"></span></h4>




<div class="description">
    <h1><code>task$</code> stream</h1>
<p><code>2&gt;-</code>: stream (if array of event objects)</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="dispatchers_streams.js.html">dispatchers/streams.js</a>, <a href="dispatchers_streams.js.html#line262">line 262</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="trace_stream"><span class="type-signature">(constant) </span>trace_stream<span class="type-signature"></span></h4>




<div class="description">
    <p>simple ad-hoc tracer to log one of the streams emmissions</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="handlers.js.html">handlers.js</a>, <a href="handlers.js.html#line27">line 27</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="prefetch_link"><span class="type-signature"></span>prefetch_link<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>PSEUDO:</p>
<ul>
<li>create some test payloads for dispatcher: single obj &amp; array</li>
<li>create a handler that handles a single obj (O)</li>
<li>create a handler that uses O on every elem of array</li>
<li>async reducer that resolves intermediary values to be assoc'ed to accumulator</li>
<li>use <code>scan</code> to pass the accumulator</li>
</ul>
<p>DIAGRAM:</p>
<p>9   8  7  6      5  4  3  2  1</p>
<blockquote>
<p>--<em>--[</em>, *, <em>]----[</em>, *, *, <em>]-</em>---&gt;
|  |            |            |
A  B            B            A      &lt;== ctx.run.next()'s
E  rE rE rE     rE rE rE rE  E</p>
</blockquote>
<p>A: single emmission   : x =&gt; form_1(x)
B: sequence emmission : form_2 = [x, x, x].scan((a,c) =&gt; form_1(x)).subscribe(resolve()).subscribe...</p>
<p>HOF (A|B): x =&gt; isArray(x) ? form_2(x) : form_1(x)</p>
<p>A) Description:</p>
<ul>
<li>takes any promises and passes them through as-is,</li>
<li>wraps any non-promise in Promise.resolve(x)</li>
</ul>
<p>Canceling ü§î:</p>
<ul>
<li>enable ctx.run.cancel() via external or internal events (e.g., popstate / { sub$:  &quot;cancel&quot; })</li>
</ul>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="handlers.js.html">handlers.js</a>, <a href="handlers.js.html#line59">line 59</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="unknown_key"><span class="type-signature"></span>unknown_key<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>just a helpful warning for the probable case of a user
misspelling one or more of a command's accepted keys</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="dispatchers_streams.js.html">dispatchers/streams.js</a>, <a href="dispatchers_streams.js.html#line101">line 101</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    
        <h3 class="subsection-title">Type Definitions</h3>

        
                
<h4 class="name" id="URLComponentsObject">URLComponentsObject</h4>




<div class="description">
    <p>An object that contains the semantic parts of a URL
in a neat little package</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">object</span>


        </li>
    </ul>





    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>URL</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The URL supplied</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>subdomain</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>The subdomain if any</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>domain</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>The domain if any</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>The path if any</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>query</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Query components if any</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>hash</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Any hash within the URL</p></td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="parse_href.js.html">parse_href.js</a>, <a href="parse_href.js.html#line3">line 3</a>
    </li></ul></dd>
    

    

    

    
</dl>






            
    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#command$">command$</a></li><li><a href="global.html#dispatcher">dispatcher</a></li><li><a href="global.html#hurl_dispatch">hurl_dispatch</a></li><li><a href="global.html#hurl_router">hurl_router</a></li><li><a href="global.html#parse_href">parse_href</a></li><li><a href="global.html#prefetch_link">prefetch_link</a></li><li><a href="global.html#register_router_BOM">register_router_BOM</a></li><li><a href="global.html#run$">run$</a></li><li><a href="global.html#task$">task$</a></li><li><a href="global.html#trace_stream">trace_stream</a></li><li><a href="global.html#unknown_key">unknown_key</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Sat Dec 21 2019 19:26:17 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>