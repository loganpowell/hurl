<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="command$"><span class="type-signature">(constant) </span>command$<span class="type-signature"></span></h4>




<div class="description">
    # `command$` stream`3>-`: stream (if single event object)
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="streams.js.html">streams.js</a>, <a href="streams.js.html#line95">line 95</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="dispatcher"><span class="type-signature">(constant) </span>dispatcher<span class="type-signature"></span></h4>




<div class="description">
    # Task DispatcherAsync `reduce` function## TL;DR:Handles any state updates and/or other effects whichrequire _ordered_ choreography## Synopsis:- very simple async finite state machine.- Commands are composed in-situ in userland (Ad hoc)- spools a collection of Commands as a Task- resolves any promises contained within a Command- passes an accumulator (STATE) to subsequent Commands in  a Task## Type checks on function signaturesThere are two valid forms for Task entries:1. a Unary function: alias/refer to sub Tasks2. A Command object: dispatch to Command stream### Recognized KeysThere are 5 recognized keys for a Command object:- `sub$`: String- `args`: Any 🧐- `path`: Array | String | Undefined- `reso`: Function | Undefined- `erro`: Function | Undefined`args` key = primary control structure- non-function vals send the Command as-is- `(0)=>` nullary fns send the _args_ as a Command- `(1)=>` unary fns are passed the STATE and called- Promises returned from fns are resolved- new vals are merged with STATE (dupe keys overwrite)#### Promise-specific keys:if `args` is/returns a Promise, these keys are used:`reso` key = handle resolved promises (⚠ binary)- `(2)=>` MUST be a binary `(STATE, resolved Promise) =>``erro` key = handle rejected promises (⚠ binary)- `(2)=>` MUST be binary `(STATE, Promise rejection) =>`## Subtasks:Subtasks are the way you compose tasks. Insert a Task andthe dispatcher will unpack it in place(super -> sub order preserved)A Subtask must be defined as a unary function thataccepts a state object and returns a Task, e.g.:```js// pseudo:let someSubtask = state => [{C}, {C}, (S)=>[...], ...]// { C: Command }// ( S: STATE ) => [...]: Subtask```## Caveat:The dispatcher preserves execution order of Commandswithin a Task, but doesn't do anything to preventCommands sent directly to the Command stream - while theTask is spooling - from being executed during theexecution of the Commands in the Task queue.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="streams.js.html">streams.js</a>, <a href="streams.js.html#line199">line 199</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="run$"><span class="type-signature">(constant) </span>run$<span class="type-signature"></span></h4>




<div class="description">
    # Stream Architecture:`run$` is the primary event stream exposed to the uservia the `ctx` object injected into every `hdom` componentthe command stream is the only way the user changesanything in `hurl`## Marble Diagram```0>- |ps|---c-------c--[ a, b, a ]-a----c--->1>- |ps|---1-------1------------0-1----1--->2>- ---|tp|xf|-☑-☑------------☑🔄---------->3>- ---|tp|----*-*-*----------*---*----*--->4>- ------|ps|-a-b-c----------a---a----c--->Handlers:a>- ------|ps|-*------------*-----*-------->b>- ------|ps|---*------------------------->c>- ------|ps|-----*-------------------*--->```## Streams- `0>-`: `ctx.run.next(x)` calls- `1>-`: `pubsub({ topic: x => x.length === 0 })`- `2>-`: `false` -> `task$`: Task Dispatcher- `3>-`: `true` -> `command$`: Commands stream- `4>-`: `pubsub({ topic: x => x.sub })`## Handlers`4>-` this is the stream to which the user (and framework)attaches handlers. Handlers receive events they subscribeto as topics based on a `sub$` key in a Command object.### Handlers (framework provided):- "state": Global state mutations- "route": Routing- "FLIP" : F.L.I.P. animations📌 TODO:- add `beforeunload` event handler within #4 (orphan):   SEE https://youtu.be/QQukWZcIptM- enable ctx.run.cancel() via external or internal events   (e.g., popstate / { sub$:  "cancel" })## `run$` stream- `1>-`: root event stream (exposed via `ctx`)- bisects (based on whether or not the payload is an array)  to _either_:### `task$` stream- `2>-`: stream (if array of event objects)### `command$` stream- `3>-`: stream (if single event object)  (see `dispatcher` for more details on #2 below)
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="streams.js.html">streams.js</a>, <a href="streams.js.html#line87">line 87</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="task$"><span class="type-signature">(constant) </span>task$<span class="type-signature"></span></h4>




<div class="description">
    # `task$` stream`2>-`: stream (if array of event objects)
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="streams.js.html">streams.js</a>, <a href="streams.js.html#line262">line 262</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="unknown_key"><span class="type-signature"></span>unknown_key<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    just a helpful warning for the probable case of a usermisspelling one or more of a command's accepted keys
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="streams.js.html">streams.js</a>, <a href="streams.js.html#line101">line 101</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#command$">command$</a></li><li><a href="global.html#dispatcher">dispatcher</a></li><li><a href="global.html#run$">run$</a></li><li><a href="global.html#task$">task$</a></li><li><a href="global.html#unknown_key">unknown_key</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Sat Dec 21 2019 18:52:00 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>